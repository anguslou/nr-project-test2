[
    {
        "id": "97b4d820.582a98",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "dbb2de0a.9c535",
        "type": "tab",
        "label": "Flow 2",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b5012ecb.7edad",
        "type": "tab",
        "label": "Stress test",
        "disabled": false,
        "info": ""
    },
    {
        "id": "3e8e163b.955132",
        "type": "tab",
        "label": "stress test 2",
        "disabled": false,
        "info": ""
    },
    {
        "id": "70453cca.cc7de4",
        "type": "tab",
        "label": "stress test 3",
        "disabled": false,
        "info": ""
    },
    {
        "id": "3d146b75.03e074",
        "type": "tab",
        "label": "stress test 4",
        "disabled": false,
        "info": ""
    },
    {
        "id": "beb40c8e.f2d98",
        "type": "tab",
        "label": "stress test 5",
        "disabled": false,
        "info": ""
    },
    {
        "id": "bcebcde0.9d2408",
        "type": "tab",
        "label": "stress test 6",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d6269b0e.abe448",
        "type": "tab",
        "label": "stress test 7",
        "disabled": false,
        "info": ""
    },
    {
        "id": "197773db.fd264c",
        "type": "tab",
        "label": "stress test 8",
        "disabled": false,
        "info": ""
    },
    {
        "id": "6c0c4da1.437604",
        "type": "tab",
        "label": "stress test 9",
        "disabled": false,
        "info": ""
    },
    {
        "id": "cffa44d4.98d378",
        "type": "tab",
        "label": "stress test 10",
        "disabled": false,
        "info": ""
    },
    {
        "id": "a1b2b31b.65fe7",
        "type": "tab",
        "label": "Flow 1"
    },
    {
        "id": "74e7ce82.3e484",
        "type": "tab",
        "label": "Flow 3",
        "disabled": false,
        "info": ""
    },
    {
        "id": "117174ad.123423",
        "type": "aws-config"
    },
    {
        "id": "74759f92.b837e8",
        "type": "amazon config",
        "name": "AWS",
        "region": "ap-northeast-1",
        "proxyRequired": false,
        "proxy": ""
    },
    {
        "id": "b3a5bf25.3cb76",
        "type": "amazon config",
        "name": "AWS",
        "region": "ap-northeast-1",
        "proxyRequired": false,
        "proxy": ""
    },
    {
        "id": "a20ca2ed.577658",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "7598b6f7.c4ad9",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "37e6d80b.323c2",
        "type": "ui_group",
        "name": "Default",
        "tab": "a20ca2ed.577658",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "c3f64ee.ef4ab3",
        "type": "config-log",
        "logname": "log",
        "logdir": "/Users/angus/Documents/node-red log",
        "stamp": "utc",
        "logstyle": "plain",
        "logrotate": false,
        "logcompress": false,
        "logrotatecount": "5",
        "logsize": "1000"
    },
    {
        "id": "496ddb54.a46bb4",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "Start",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 320,
        "wires": [
            [
                "9a0dfcd0.21a4f"
            ]
        ]
    },
    {
        "id": "9756b923.21e188",
        "type": "split",
        "z": "97b4d820.582a98",
        "name": "Split",
        "splt": "",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 710,
        "y": 320,
        "wires": [
            [
                "46acd19c.d49fa"
            ]
        ]
    },
    {
        "id": "a464f25.233c11",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "File",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1070,
        "y": 320,
        "wires": []
    },
    {
        "id": "9a0dfcd0.21a4f",
        "type": "fs-ops-dir",
        "z": "97b4d820.582a98",
        "name": "",
        "path": "/Volumes/Data/fake face/1mFakeFaces/1m_faces_60/1m_faces_60",
        "pathType": "str",
        "filter": "*jpg",
        "filterType": "str",
        "dir": "payload",
        "dirType": "msg",
        "x": 540,
        "y": 320,
        "wires": [
            [
                "9756b923.21e188",
                "714332a4.94919c"
            ]
        ]
    },
    {
        "id": "714332a4.94919c",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "File",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 260,
        "wires": []
    },
    {
        "id": "f831e53a.efbd98",
        "type": "fs-ops-dir",
        "z": "97b4d820.582a98",
        "name": "",
        "path": "",
        "pathType": "str",
        "filter": "*jpg",
        "filterType": "str",
        "dir": "payload",
        "dirType": "msg",
        "x": 540,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "46acd19c.d49fa",
        "type": "counter",
        "z": "97b4d820.582a98",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 860,
        "y": 320,
        "wires": [
            [
                "a464f25.233c11",
                "8d8d6dc9.02a11"
            ]
        ]
    },
    {
        "id": "8d8d6dc9.02a11",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "File",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 260,
        "wires": []
    },
    {
        "id": "ead20d58.152df",
        "type": "comment",
        "z": "dbb2de0a.9c535",
        "name": "Aggregator pattern",
        "info": "",
        "x": 270,
        "y": 180,
        "wires": []
    },
    {
        "id": "77fe5da9.8801a4",
        "type": "function",
        "z": "dbb2de0a.9c535",
        "name": "payload=451",
        "func": "msg.payload = 451;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 553.8332901000977,
        "y": 263.50011253356934,
        "wires": [
            [
                "43be81d8.bc418"
            ]
        ]
    },
    {
        "id": "43be81d8.bc418",
        "type": "function",
        "z": "dbb2de0a.9c535",
        "name": "Calculate Sum",
        "func": "// Reduce the number of inputs\ncontext.global.n--;\n\n// Store the data in msg.payload for all operations as they complete\ncontext.global.data[context.global.n] = msg.payload;\n\n// When all operations are complete calculate the sum and return\nif (context.global.n === 0)\n{   // Calculate the total value\n    var sum = 0;\n    for (var i = 0; i < context.global.data.length; i++)\n    {\n        sum += context.global.data[i];\n    }\n    msg.payload = sum;\n\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 748.8333435058594,
        "y": 286.50013542175293,
        "wires": [
            [
                "a465abf3.5b9a58"
            ]
        ]
    },
    {
        "id": "30a7f66d.cf580a",
        "type": "function",
        "z": "dbb2de0a.9c535",
        "name": "payload=326",
        "func": "msg.payload = 326;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 552.8333129882812,
        "y": 311.50012493133545,
        "wires": [
            [
                "43be81d8.bc418"
            ]
        ]
    },
    {
        "id": "a465abf3.5b9a58",
        "type": "debug",
        "z": "dbb2de0a.9c535",
        "name": "Returns 777",
        "active": true,
        "console": "false",
        "complete": "payload",
        "x": 930.8333206176758,
        "y": 286.5001230239868,
        "wires": []
    },
    {
        "id": "4ec8c1ad.b1374",
        "type": "function",
        "z": "dbb2de0a.9c535",
        "name": "Combine 2 Functions",
        "func": "context.global.n = 2;\ncontext.global.data = new Array(2);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 349.83331298828125,
        "y": 288.5001220703125,
        "wires": [
            [
                "77fe5da9.8801a4",
                "30a7f66d.cf580a"
            ]
        ]
    },
    {
        "id": "b72a20f4.48d5e",
        "type": "comment",
        "z": "dbb2de0a.9c535",
        "name": "↓ 1st value",
        "info": "",
        "x": 552.5798034667969,
        "y": 225.07418823242188,
        "wires": []
    },
    {
        "id": "45b83155.ba47d",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "Calculate the sum of 2 numbers",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 309.8893585205078,
        "y": 224.19322204589844,
        "wires": [
            [
                "4ec8c1ad.b1374"
            ]
        ]
    },
    {
        "id": "77741e74.888be",
        "type": "comment",
        "z": "dbb2de0a.9c535",
        "name": "↑ 2nd value",
        "info": "",
        "x": 551.4131546020508,
        "y": 352.07410049438477,
        "wires": []
    },
    {
        "id": "1f06d968.e0f927",
        "type": "comment",
        "z": "dbb2de0a.9c535",
        "name": "Define how many parallel operations ↑",
        "info": "",
        "x": 299.3417053222656,
        "y": 331.62158203125,
        "wires": []
    },
    {
        "id": "1971bcd5.e68e43",
        "type": "comment",
        "z": "dbb2de0a.9c535",
        "name": "↑ Once all parallel operations complete, calculate sum",
        "info": "",
        "x": 835.9132080078125,
        "y": 328.907470703125,
        "wires": []
    },
    {
        "id": "a8f2b28e.45d998",
        "type": "AWS S3",
        "z": "97b4d820.582a98",
        "aws": "74759f92.b837e8",
        "operation": "ListObjects",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 460,
        "y": 600,
        "wires": [
            [
                "d360d081.ad69a",
                "dd7cde0e.93cb"
            ],
            []
        ]
    },
    {
        "id": "7b5ba4a9.b2be64",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 620,
        "wires": [
            [
                "a8f2b28e.45d998"
            ]
        ]
    },
    {
        "id": "d360d081.ad69a",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 540,
        "wires": []
    },
    {
        "id": "dd7cde0e.93cb",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 640,
        "y": 620,
        "wires": [
            [
                "833097e4.21f5d"
            ]
        ]
    },
    {
        "id": "833097e4.21f5d",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 620,
        "wires": []
    },
    {
        "id": "49dd9241.50edb4",
        "type": "template",
        "z": "97b4d820.582a98",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3 list-objects-v2 --bucket 1m-faces --prefix 00",
        "output": "str",
        "x": 420,
        "y": 740,
        "wires": [
            [
                "56c81167.138938",
                "bf6d6b54.2cadf"
            ]
        ]
    },
    {
        "id": "fec0880f.347d3",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 740,
        "wires": [
            [
                "49dd9241.50edb4"
            ]
        ]
    },
    {
        "id": "bf6d6b54.2cadf",
        "type": "exec",
        "z": "97b4d820.582a98",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 590,
        "y": 780,
        "wires": [
            [
                "2bd9d1e6.f563ce"
            ],
            [
                "81f0b46.6bd8048"
            ],
            []
        ]
    },
    {
        "id": "56c81167.138938",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 590,
        "y": 720,
        "wires": []
    },
    {
        "id": "2bd9d1e6.f563ce",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 760,
        "wires": []
    },
    {
        "id": "81f0b46.6bd8048",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 820,
        "wires": []
    },
    {
        "id": "214f0528.f68952",
        "type": "comment",
        "z": "97b4d820.582a98",
        "name": "Rekognition stress test",
        "info": "",
        "x": 280,
        "y": 960,
        "wires": []
    },
    {
        "id": "26197c72.d579bc",
        "type": "AWS S3",
        "z": "97b4d820.582a98",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 730,
        "y": 980,
        "wires": [
            [
                "b0f8d9e7.51a568",
                "53f49fd0.ed2598"
            ],
            []
        ]
    },
    {
        "id": "b0f8d9e7.51a568",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 990,
        "y": 980,
        "wires": [
            [
                "3928c1cb.ff473e"
            ]
        ]
    },
    {
        "id": "50779349.4bb30c",
        "type": "template",
        "z": "97b4d820.582a98",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 520,
        "y": 1120,
        "wires": [
            [
                "ce73f8be.b46b",
                "75a93638.38a788"
            ]
        ]
    },
    {
        "id": "aa7775f8.44b2e8",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 230,
        "y": 1120,
        "wires": [
            [
                "6227cfe8.a38ba"
            ]
        ]
    },
    {
        "id": "75a93638.38a788",
        "type": "exec",
        "z": "97b4d820.582a98",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 670,
        "y": 1120,
        "wires": [
            [
                "fde45409.59181"
            ],
            [
                "23838870.dadad8"
            ],
            []
        ]
    },
    {
        "id": "ce73f8be.b46b",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 1060,
        "wires": []
    },
    {
        "id": "6bf117ca.bcacb8",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 1080,
        "wires": []
    },
    {
        "id": "23838870.dadad8",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 1080,
        "wires": []
    },
    {
        "id": "c399693e.5ca908",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 530,
        "y": 980,
        "wires": [
            [
                "26197c72.d579bc"
            ]
        ]
    },
    {
        "id": "3928c1cb.ff473e",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 980,
        "wires": []
    },
    {
        "id": "53f49fd0.ed2598",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 920,
        "wires": []
    },
    {
        "id": "fde45409.59181",
        "type": "json",
        "z": "97b4d820.582a98",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 810,
        "y": 1120,
        "wires": [
            [
                "e6479d88.847638",
                "8645a9ba.63a2b"
            ]
        ]
    },
    {
        "id": "6227cfe8.a38ba",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "config",
        "func": "//var getPrefix = flow.get(\"_prefix\")\n\nmsg.bucket = \"1m-faces\";\n//msg._prefix = getPrefix;\nmsg.collectionID = \"xxxxxx\";\nmsg.master_k_f = \"XXXXX\";\nmsg.master_f_k = \"xxssss\";\n/*\nflow.set(\"bucket\", msg.bucket);\nflow.set(\"collectionID\", \"xxxx\");\nflow.set(\"master_k_f\", \"xxxxx\");\nflow.set(\"master_f_k\", \"xxxxx\");\n*/\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 370,
        "y": 1120,
        "wires": [
            [
                "50779349.4bb30c"
            ]
        ]
    },
    {
        "id": "3dc587bb.f9dad8",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    _keyNu = _key.substring(0,2);\n    if (parseInt(_keyNu) < 10){\n        list.push(_key);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 980,
        "y": 1080,
        "wires": [
            [
                "6bf117ca.bcacb8"
            ]
        ]
    },
    {
        "id": "e6479d88.847638",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 1040,
        "wires": []
    },
    {
        "id": "8645a9ba.63a2b",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 980,
        "y": 1120,
        "wires": [
            [
                "6bf117ca.bcacb8",
                "e6889da5.86d848"
            ]
        ]
    },
    {
        "id": "e6889da5.86d848",
        "type": "split",
        "z": "97b4d820.582a98",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1150,
        "y": 1120,
        "wires": [
            [
                "bda104a4.e4651",
                "8136e7ca.3271f",
                "a2e87248.d4f15"
            ]
        ]
    },
    {
        "id": "bda104a4.e4651",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1330,
        "y": 1000,
        "wires": []
    },
    {
        "id": "8136e7ca.3271f",
        "type": "delay",
        "z": "97b4d820.582a98",
        "name": "",
        "pauseType": "delay",
        "timeout": "0",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1290,
        "y": 1180,
        "wires": [
            [
                "55171909.2a9e48"
            ]
        ]
    },
    {
        "id": "a2e87248.d4f15",
        "type": "link out",
        "z": "97b4d820.582a98",
        "name": "",
        "links": [],
        "x": 1315,
        "y": 1100,
        "wires": []
    },
    {
        "id": "dcfab1bc.49795",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n\n\nif (_prefix < 2){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1600,
        "y": 1180,
        "wires": [
            [
                "f6996ec9.75ab58",
                "50779349.4bb30c"
            ]
        ]
    },
    {
        "id": "e4e0cf14.e73878",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "start",
        "func": "flow.set(\"_prefix\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 250,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "f6996ec9.75ab58",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1730,
        "y": 1220,
        "wires": []
    },
    {
        "id": "55171909.2a9e48",
        "type": "join",
        "z": "97b4d820.582a98",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 1450,
        "y": 1180,
        "wires": [
            [
                "eae0a4e6.83322",
                "dcfab1bc.49795"
            ]
        ]
    },
    {
        "id": "eae0a4e6.83322",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1570,
        "y": 1240,
        "wires": []
    },
    {
        "id": "d3a97691.6e27d",
        "type": "template",
        "z": "b5012ecb.7edad",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 270,
        "y": 720,
        "wires": [
            [
                "989ba0f7.8fdad",
                "a190f916.5adbc"
            ]
        ]
    },
    {
        "id": "989ba0f7.8fdad",
        "type": "exec",
        "z": "b5012ecb.7edad",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 480,
        "y": 720,
        "wires": [
            [
                "1f46ad3d.a46c8b",
                "a9bd743e.33b18"
            ],
            [
                "262e9140.de4506"
            ],
            []
        ]
    },
    {
        "id": "1f46ad3d.a46c8b",
        "type": "json",
        "z": "b5012ecb.7edad",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 650,
        "y": 720,
        "wires": [
            [
                "7c6d261f.77366"
            ]
        ]
    },
    {
        "id": "2db3662.17adb1a",
        "type": "exec",
        "z": "b5012ecb.7edad",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1510,
        "y": 720,
        "wires": [
            [
                "7e6f7013.62d308",
                "2f0bf506.6f0662"
            ],
            [
                "b01552f0.cbbb1"
            ],
            []
        ]
    },
    {
        "id": "75d1f74c.9263f",
        "type": "template",
        "z": "b5012ecb.7edad",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1040,
        "y": 720,
        "wires": [
            [
                "bd9eafb8.42f7a",
                "a35903ef.226628"
            ]
        ]
    },
    {
        "id": "bd9eafb8.42f7a",
        "type": "template",
        "z": "b5012ecb.7edad",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1280,
        "y": 720,
        "wires": [
            [
                "2db3662.17adb1a",
                "395ee258.19a4de"
            ]
        ]
    },
    {
        "id": "7c6d261f.77366",
        "type": "function",
        "z": "b5012ecb.7edad",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 810,
        "y": 720,
        "wires": [
            [
                "75d1f74c.9263f"
            ]
        ]
    },
    {
        "id": "a35903ef.226628",
        "type": "template",
        "z": "b5012ecb.7edad",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1280,
        "y": 760,
        "wires": [
            [
                "2fcaccc6.0eb564",
                "6dff7795.dc01d"
            ]
        ]
    },
    {
        "id": "2fcaccc6.0eb564",
        "type": "exec",
        "z": "b5012ecb.7edad",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1510,
        "y": 760,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "15be79a0.581b76",
        "type": "link in",
        "z": "b5012ecb.7edad",
        "name": "",
        "links": [
            "9cca5701.23dac8"
        ],
        "x": 135,
        "y": 720,
        "wires": [
            [
                "d3a97691.6e27d"
            ]
        ]
    },
    {
        "id": "ac58baf0.c85c08",
        "type": "comment",
        "z": "b5012ecb.7edad",
        "name": "Rekognition stress test",
        "info": "",
        "x": 200,
        "y": 220,
        "wires": []
    },
    {
        "id": "8193d311.378df8",
        "type": "AWS S3",
        "z": "b5012ecb.7edad",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 650,
        "y": 180,
        "wires": [
            [
                "fb158a51.112c4",
                "20d16bc8.062b64"
            ],
            []
        ]
    },
    {
        "id": "fb158a51.112c4",
        "type": "function",
        "z": "b5012ecb.7edad",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 860,
        "y": 180,
        "wires": [
            [
                "438f6ab2.096f24"
            ]
        ]
    },
    {
        "id": "f1953a63.39ff38",
        "type": "template",
        "z": "b5012ecb.7edad",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 580,
        "y": 380,
        "wires": [
            [
                "fda9f864.ec625",
                "6a965ce8.c2763c"
            ]
        ]
    },
    {
        "id": "1e98425b.237516",
        "type": "inject",
        "z": "b5012ecb.7edad",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 270,
        "y": 380,
        "wires": [
            [
                "cd6a1480.60a078"
            ]
        ]
    },
    {
        "id": "6a965ce8.c2763c",
        "type": "exec",
        "z": "b5012ecb.7edad",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 730,
        "y": 380,
        "wires": [
            [
                "c2a22739.f8c41"
            ],
            [
                "4e03d858.af25d8"
            ],
            []
        ]
    },
    {
        "id": "fda9f864.ec625",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 340,
        "wires": []
    },
    {
        "id": "4e03d858.af25d8",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 340,
        "wires": []
    },
    {
        "id": "5b59e064.a4f748",
        "type": "inject",
        "z": "b5012ecb.7edad",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 460,
        "y": 180,
        "wires": [
            [
                "8193d311.378df8"
            ]
        ]
    },
    {
        "id": "438f6ab2.096f24",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 180,
        "wires": []
    },
    {
        "id": "20d16bc8.062b64",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 140,
        "wires": []
    },
    {
        "id": "c2a22739.f8c41",
        "type": "json",
        "z": "b5012ecb.7edad",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 870,
        "y": 380,
        "wires": [
            [
                "9205be89.2afe58",
                "ddcc1bc9.4c789"
            ]
        ]
    },
    {
        "id": "cd6a1480.60a078",
        "type": "function",
        "z": "b5012ecb.7edad",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"01\"; //start\nmsg.end = \"01\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 380,
        "wires": [
            [
                "f1953a63.39ff38"
            ]
        ]
    },
    {
        "id": "9205be89.2afe58",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 340,
        "wires": []
    },
    {
        "id": "ddcc1bc9.4c789",
        "type": "function",
        "z": "b5012ecb.7edad",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 380,
        "wires": [
            [
                "1ed4d8f1.71c6a7"
            ]
        ]
    },
    {
        "id": "419a2cdc.fad274",
        "type": "split",
        "z": "b5012ecb.7edad",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1390,
        "y": 380,
        "wires": [
            [
                "4d120b2f.c90574",
                "a6b1476b.023468"
            ]
        ]
    },
    {
        "id": "9cca5701.23dac8",
        "type": "link out",
        "z": "b5012ecb.7edad",
        "name": "",
        "links": [
            "15be79a0.581b76"
        ],
        "x": 2275,
        "y": 340,
        "wires": []
    },
    {
        "id": "bb5cbeae.3f67e",
        "type": "function",
        "z": "b5012ecb.7edad",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2290,
        "y": 460,
        "wires": [
            [
                "c36220bc.8c13b",
                "f1953a63.39ff38",
                "ee4bc2b3.2d8428"
            ]
        ]
    },
    {
        "id": "c36220bc.8c13b",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2430,
        "y": 460,
        "wires": []
    },
    {
        "id": "a4f01c6.04f496",
        "type": "join",
        "z": "b5012ecb.7edad",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2130,
        "y": 460,
        "wires": [
            [
                "bfd590f9.41489",
                "bb5cbeae.3f67e"
            ]
        ]
    },
    {
        "id": "bfd590f9.41489",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2350,
        "y": 380,
        "wires": []
    },
    {
        "id": "4d120b2f.c90574",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1550,
        "y": 320,
        "wires": []
    },
    {
        "id": "a6b1476b.023468",
        "type": "counter",
        "z": "b5012ecb.7edad",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1550,
        "y": 380,
        "wires": [
            [
                "79e250dd.8c38f"
            ]
        ]
    },
    {
        "id": "79e250dd.8c38f",
        "type": "switch",
        "z": "b5012ecb.7edad",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1710,
        "y": 380,
        "wires": [
            [
                "505ea3c6.4c2c04"
            ]
        ]
    },
    {
        "id": "a9bd743e.33b18",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 680,
        "wires": []
    },
    {
        "id": "262e9140.de4506",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 780,
        "wires": []
    },
    {
        "id": "a190f916.5adbc",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 450,
        "y": 660,
        "wires": []
    },
    {
        "id": "395ee258.19a4de",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1450,
        "y": 680,
        "wires": []
    },
    {
        "id": "6dff7795.dc01d",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1450,
        "y": 800,
        "wires": []
    },
    {
        "id": "7e6f7013.62d308",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1720,
        "y": 700,
        "wires": []
    },
    {
        "id": "b01552f0.cbbb1",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1710,
        "y": 740,
        "wires": []
    },
    {
        "id": "30bd27bd.889ad",
        "type": "function",
        "z": "b5012ecb.7edad",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2140,
        "y": 380,
        "wires": [
            [
                "9cca5701.23dac8"
            ]
        ]
    },
    {
        "id": "1ed4d8f1.71c6a7",
        "type": "change",
        "z": "b5012ecb.7edad",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 380,
        "wires": [
            [
                "419a2cdc.fad274",
                "25499547.c12102"
            ]
        ]
    },
    {
        "id": "25499547.c12102",
        "type": "debug",
        "z": "b5012ecb.7edad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1370,
        "y": 320,
        "wires": []
    },
    {
        "id": "2f0bf506.6f0662",
        "type": "function",
        "z": "b5012ecb.7edad",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1830,
        "y": 540,
        "wires": [
            [
                "505ea3c6.4c2c04"
            ]
        ]
    },
    {
        "id": "41101774.7f8d98",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "input",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 380,
        "y": 780,
        "wires": [
            [
                "e86716dc.75de9"
            ]
        ]
    },
    {
        "id": "40d25bc1.d8f8c4",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "open",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "open",
        "payloadType": "str",
        "x": 420,
        "y": 600,
        "wires": [
            [
                "e86716dc.75de9"
            ]
        ]
    },
    {
        "id": "ad8d0a28.a3b218",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "toggle",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "toggle",
        "payloadType": "str",
        "x": 420,
        "y": 680,
        "wires": [
            [
                "e86716dc.75de9"
            ]
        ]
    },
    {
        "id": "aef911e9.8d1ce8",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "close",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "close",
        "payloadType": "str",
        "x": 420,
        "y": 640,
        "wires": [
            [
                "e86716dc.75de9"
            ]
        ]
    },
    {
        "id": "3551df65.8b711",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "default",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "default",
        "payloadType": "str",
        "x": 420,
        "y": 720,
        "wires": [
            [
                "e86716dc.75de9"
            ]
        ]
    },
    {
        "id": "2ecfd2a4.7c6eee",
        "type": "debug",
        "z": "dbb2de0a.9c535",
        "name": "output",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "x": 820,
        "y": 780,
        "wires": []
    },
    {
        "id": "d75bf97a.b18a28",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "queue",
        "props": [
            {
                "p": "payload",
                "v": "queue",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "queue",
        "payloadType": "str",
        "x": 420,
        "y": 840,
        "wires": [
            [
                "e86716dc.75de9"
            ]
        ]
    },
    {
        "id": "5734d644.111988",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "flush",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "flush",
        "payloadType": "str",
        "x": 420,
        "y": 920,
        "wires": [
            [
                "e86716dc.75de9"
            ]
        ]
    },
    {
        "id": "3b9ed807.975318",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 420,
        "y": 880,
        "wires": [
            [
                "e86716dc.75de9"
            ]
        ]
    },
    {
        "id": "e0d27782.346e28",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "reset",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "reset",
        "payloadType": "str",
        "x": 420,
        "y": 960,
        "wires": [
            [
                "e86716dc.75de9"
            ]
        ]
    },
    {
        "id": "e86716dc.75de9",
        "type": "q-gate",
        "z": "dbb2de0a.9c535",
        "name": "q-gate demo",
        "controlTopic": "control",
        "defaultState": "open",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "5",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 660,
        "y": 780,
        "wires": [
            [
                "2ecfd2a4.7c6eee"
            ]
        ]
    },
    {
        "id": "505ea3c6.4c2c04",
        "type": "q-gate",
        "z": "b5012ecb.7edad",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 1970,
        "y": 380,
        "wires": [
            [
                "30bd27bd.889ad",
                "a4f01c6.04f496",
                "b0711832.a74458"
            ]
        ]
    },
    {
        "id": "43b37220.c5944c",
        "type": "function",
        "z": "b5012ecb.7edad",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1810,
        "y": 300,
        "wires": [
            [
                "505ea3c6.4c2c04"
            ]
        ]
    },
    {
        "id": "a67d8208.e8b198",
        "type": "inject",
        "z": "b5012ecb.7edad",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1890,
        "y": 180,
        "wires": [
            [
                "505ea3c6.4c2c04"
            ]
        ]
    },
    {
        "id": "ee4bc2b3.2d8428",
        "type": "delay",
        "z": "b5012ecb.7edad",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2100,
        "y": 540,
        "wires": [
            [
                "2f0bf506.6f0662"
            ]
        ]
    },
    {
        "id": "42bc4050.7b659",
        "type": "inject",
        "z": "dbb2de0a.9c535",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 1100,
        "wires": [
            [
                "8791c8ba.f5d388",
                "77945912.9e95a8"
            ]
        ]
    },
    {
        "id": "77945912.9e95a8",
        "type": "delay",
        "z": "dbb2de0a.9c535",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 393,
        "y": 1179.0000019073486,
        "wires": [
            [
                "a057c6d2.c75488"
            ]
        ]
    },
    {
        "id": "a057c6d2.c75488",
        "type": "change",
        "z": "dbb2de0a.9c535",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "paths[\"other_path\"]",
                "pt": "msg",
                "to": "{\"pepe\":\"true\",\"camino\":\"2\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 586,
        "y": 1243.000002861023,
        "wires": [
            [
                "3b52fab3.687a86"
            ]
        ]
    },
    {
        "id": "8791c8ba.f5d388",
        "type": "change",
        "z": "dbb2de0a.9c535",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "paths[\"path_1\"]",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590.0000305175781,
        "y": 1120.0000009536743,
        "wires": [
            [
                "3b52fab3.687a86"
            ]
        ]
    },
    {
        "id": "3b52fab3.687a86",
        "type": "wait-paths",
        "z": "dbb2de0a.9c535",
        "name": "",
        "paths": "[\"path_1\",\"other_path\"]",
        "timeout": "15000",
        "finalTimeout": "60000",
        "x": 810.1666717529297,
        "y": 1186.8888893127441,
        "wires": [
            [
                "dec836b4.5ca998"
            ]
        ]
    },
    {
        "id": "dec836b4.5ca998",
        "type": "debug",
        "z": "dbb2de0a.9c535",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 974.1000556945801,
        "y": 1236.600046157837,
        "wires": []
    },
    {
        "id": "de0c1e4b.6d383",
        "type": "template",
        "z": "3e8e163b.955132",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 370,
        "y": 760,
        "wires": [
            [
                "c272252c.000a88",
                "5b9ca5ec.a5b9a4"
            ]
        ]
    },
    {
        "id": "c272252c.000a88",
        "type": "exec",
        "z": "3e8e163b.955132",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 580,
        "y": 760,
        "wires": [
            [
                "273525ad.ea78f2",
                "374cb50d.3a911a"
            ],
            [
                "c7d6b25.71ab8d"
            ],
            []
        ]
    },
    {
        "id": "273525ad.ea78f2",
        "type": "json",
        "z": "3e8e163b.955132",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 760,
        "wires": [
            [
                "6a722b93.c687dc"
            ]
        ]
    },
    {
        "id": "caeeb2f7.e585d",
        "type": "exec",
        "z": "3e8e163b.955132",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1610,
        "y": 760,
        "wires": [
            [
                "e260cbbe.da4548",
                "3647857e.ed8662"
            ],
            [
                "7641bef4.b44fc"
            ],
            []
        ]
    },
    {
        "id": "97ca3c5.5963d4",
        "type": "template",
        "z": "3e8e163b.955132",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1140,
        "y": 760,
        "wires": [
            [
                "37f13b4d.01fdbc",
                "c9e882d3.b30e1"
            ]
        ]
    },
    {
        "id": "37f13b4d.01fdbc",
        "type": "template",
        "z": "3e8e163b.955132",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1380,
        "y": 760,
        "wires": [
            [
                "caeeb2f7.e585d",
                "26d70f02.08d398"
            ]
        ]
    },
    {
        "id": "6a722b93.c687dc",
        "type": "function",
        "z": "3e8e163b.955132",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 910,
        "y": 760,
        "wires": [
            [
                "97ca3c5.5963d4"
            ]
        ]
    },
    {
        "id": "c9e882d3.b30e1",
        "type": "template",
        "z": "3e8e163b.955132",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1380,
        "y": 800,
        "wires": [
            [
                "b84ffa8.7d4b208",
                "8efe3b80.ae0fd8"
            ]
        ]
    },
    {
        "id": "b84ffa8.7d4b208",
        "type": "exec",
        "z": "3e8e163b.955132",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1610,
        "y": 800,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "acc09c7d.bb58e8",
        "type": "link in",
        "z": "3e8e163b.955132",
        "name": "",
        "links": [
            "464ebc8f.724894"
        ],
        "x": 235,
        "y": 760,
        "wires": [
            [
                "de0c1e4b.6d383"
            ]
        ]
    },
    {
        "id": "2b44fbef.57cd14",
        "type": "comment",
        "z": "3e8e163b.955132",
        "name": "Rekognition stress test",
        "info": "",
        "x": 300,
        "y": 260,
        "wires": []
    },
    {
        "id": "a28ff7b1.feea5",
        "type": "AWS S3",
        "z": "3e8e163b.955132",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 750,
        "y": 220,
        "wires": [
            [
                "b0fcf29c.8ec578",
                "db24c160.538bf8"
            ],
            []
        ]
    },
    {
        "id": "b0fcf29c.8ec578",
        "type": "function",
        "z": "3e8e163b.955132",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 960,
        "y": 220,
        "wires": [
            [
                "1be6e5ab.29ca7a"
            ]
        ]
    },
    {
        "id": "34626dd0.8ddc32",
        "type": "template",
        "z": "3e8e163b.955132",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 680,
        "y": 420,
        "wires": [
            [
                "4c9a48dc.528e18",
                "1eb4e701.e853b1"
            ]
        ]
    },
    {
        "id": "1bf3da8c.c7a915",
        "type": "inject",
        "z": "3e8e163b.955132",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 370,
        "y": 420,
        "wires": [
            [
                "490f7aba.a09be4"
            ]
        ]
    },
    {
        "id": "1eb4e701.e853b1",
        "type": "exec",
        "z": "3e8e163b.955132",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 830,
        "y": 420,
        "wires": [
            [
                "d590c01a.f0d9d8"
            ],
            [
                "af8cb1bb.c39c3"
            ],
            []
        ]
    },
    {
        "id": "4c9a48dc.528e18",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 380,
        "wires": []
    },
    {
        "id": "af8cb1bb.c39c3",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 380,
        "wires": []
    },
    {
        "id": "55c5399.2631848",
        "type": "inject",
        "z": "3e8e163b.955132",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 560,
        "y": 220,
        "wires": [
            [
                "a28ff7b1.feea5"
            ]
        ]
    },
    {
        "id": "1be6e5ab.29ca7a",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 220,
        "wires": []
    },
    {
        "id": "db24c160.538bf8",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 180,
        "wires": []
    },
    {
        "id": "d590c01a.f0d9d8",
        "type": "json",
        "z": "3e8e163b.955132",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 970,
        "y": 420,
        "wires": [
            [
                "b33fa215.e79878",
                "5a09ac9d.ed0f24"
            ]
        ]
    },
    {
        "id": "490f7aba.a09be4",
        "type": "function",
        "z": "3e8e163b.955132",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"06\"; //start\nmsg.end = \"06\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 510,
        "y": 420,
        "wires": [
            [
                "34626dd0.8ddc32"
            ]
        ]
    },
    {
        "id": "b33fa215.e79878",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1110,
        "y": 380,
        "wires": []
    },
    {
        "id": "5a09ac9d.ed0f24",
        "type": "function",
        "z": "3e8e163b.955132",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1140,
        "y": 420,
        "wires": [
            [
                "81c877a4.3b1058"
            ]
        ]
    },
    {
        "id": "c9ee64a1.0de63",
        "type": "split",
        "z": "3e8e163b.955132",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1490,
        "y": 420,
        "wires": [
            [
                "f8b95254.a0ae7",
                "aa0b8dd6.891f5"
            ]
        ]
    },
    {
        "id": "464ebc8f.724894",
        "type": "link out",
        "z": "3e8e163b.955132",
        "name": "",
        "links": [
            "acc09c7d.bb58e8"
        ],
        "x": 2375,
        "y": 380,
        "wires": []
    },
    {
        "id": "d35413fc.64b488",
        "type": "function",
        "z": "3e8e163b.955132",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2390,
        "y": 500,
        "wires": [
            [
                "f1ad58d0.3112e8",
                "34626dd0.8ddc32",
                "8f4e212b.001138"
            ]
        ]
    },
    {
        "id": "f1ad58d0.3112e8",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2530,
        "y": 500,
        "wires": []
    },
    {
        "id": "9a3d8d20.810b",
        "type": "join",
        "z": "3e8e163b.955132",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2230,
        "y": 500,
        "wires": [
            [
                "13dfd68.a56c4aa",
                "d35413fc.64b488"
            ]
        ]
    },
    {
        "id": "13dfd68.a56c4aa",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2450,
        "y": 420,
        "wires": []
    },
    {
        "id": "f8b95254.a0ae7",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 360,
        "wires": []
    },
    {
        "id": "aa0b8dd6.891f5",
        "type": "counter",
        "z": "3e8e163b.955132",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1650,
        "y": 420,
        "wires": [
            [
                "86f94824.5093d"
            ]
        ]
    },
    {
        "id": "86f94824.5093d",
        "type": "switch",
        "z": "3e8e163b.955132",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1810,
        "y": 420,
        "wires": [
            [
                "1629d12c.9bc997"
            ]
        ]
    },
    {
        "id": "374cb50d.3a911a",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 720,
        "wires": []
    },
    {
        "id": "c7d6b25.71ab8d",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 820,
        "wires": []
    },
    {
        "id": "5b9ca5ec.a5b9a4",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 550,
        "y": 700,
        "wires": []
    },
    {
        "id": "26d70f02.08d398",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1550,
        "y": 720,
        "wires": []
    },
    {
        "id": "8efe3b80.ae0fd8",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1550,
        "y": 840,
        "wires": []
    },
    {
        "id": "e260cbbe.da4548",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1820,
        "y": 740,
        "wires": []
    },
    {
        "id": "7641bef4.b44fc",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1810,
        "y": 780,
        "wires": []
    },
    {
        "id": "63f4e707.07ff18",
        "type": "function",
        "z": "3e8e163b.955132",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2240,
        "y": 420,
        "wires": [
            [
                "464ebc8f.724894"
            ]
        ]
    },
    {
        "id": "81c877a4.3b1058",
        "type": "change",
        "z": "3e8e163b.955132",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 420,
        "wires": [
            [
                "c9ee64a1.0de63",
                "a1ea1cfd.a35ec8"
            ]
        ]
    },
    {
        "id": "a1ea1cfd.a35ec8",
        "type": "debug",
        "z": "3e8e163b.955132",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1470,
        "y": 360,
        "wires": []
    },
    {
        "id": "3647857e.ed8662",
        "type": "function",
        "z": "3e8e163b.955132",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1930,
        "y": 580,
        "wires": [
            [
                "1629d12c.9bc997"
            ]
        ]
    },
    {
        "id": "1629d12c.9bc997",
        "type": "q-gate",
        "z": "3e8e163b.955132",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 2070,
        "y": 420,
        "wires": [
            [
                "63f4e707.07ff18",
                "9a3d8d20.810b"
            ]
        ]
    },
    {
        "id": "a1a8928a.a03ab8",
        "type": "function",
        "z": "3e8e163b.955132",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1910,
        "y": 340,
        "wires": [
            [
                "1629d12c.9bc997"
            ]
        ]
    },
    {
        "id": "66b006ee.2f3b18",
        "type": "inject",
        "z": "3e8e163b.955132",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1970,
        "y": 220,
        "wires": [
            [
                "1629d12c.9bc997"
            ]
        ]
    },
    {
        "id": "8f4e212b.001138",
        "type": "delay",
        "z": "3e8e163b.955132",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2200,
        "y": 580,
        "wires": [
            [
                "3647857e.ed8662"
            ]
        ]
    },
    {
        "id": "3d57fc8d.747b14",
        "type": "template",
        "z": "70453cca.cc7de4",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 350,
        "y": 840,
        "wires": [
            [
                "ed8c0278.a12de8",
                "9d657bd7.c66f"
            ]
        ]
    },
    {
        "id": "ed8c0278.a12de8",
        "type": "exec",
        "z": "70453cca.cc7de4",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 560,
        "y": 840,
        "wires": [
            [
                "8693f5e9.4bde88",
                "1e8256bb.403d91"
            ],
            [
                "e5df0018.a05558"
            ],
            []
        ]
    },
    {
        "id": "8693f5e9.4bde88",
        "type": "json",
        "z": "70453cca.cc7de4",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 730,
        "y": 840,
        "wires": [
            [
                "a1b5ea53.487e38"
            ]
        ]
    },
    {
        "id": "54263ee5.5acb88",
        "type": "exec",
        "z": "70453cca.cc7de4",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1590,
        "y": 840,
        "wires": [
            [
                "d91c49ee.61c048",
                "560a61f.2db03a"
            ],
            [
                "5a10b4dd.5f970c"
            ],
            []
        ]
    },
    {
        "id": "efcbb561.86e67",
        "type": "template",
        "z": "70453cca.cc7de4",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1120,
        "y": 840,
        "wires": [
            [
                "2e561c25.e775f4",
                "9eba8fb1.81ed18"
            ]
        ]
    },
    {
        "id": "2e561c25.e775f4",
        "type": "template",
        "z": "70453cca.cc7de4",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1360,
        "y": 840,
        "wires": [
            [
                "54263ee5.5acb88",
                "ac607a9e.db5da8"
            ]
        ]
    },
    {
        "id": "a1b5ea53.487e38",
        "type": "function",
        "z": "70453cca.cc7de4",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 890,
        "y": 840,
        "wires": [
            [
                "efcbb561.86e67"
            ]
        ]
    },
    {
        "id": "9eba8fb1.81ed18",
        "type": "template",
        "z": "70453cca.cc7de4",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1360,
        "y": 880,
        "wires": [
            [
                "53a7dcef.5e7be4",
                "41fd8c9.1a9fdf4"
            ]
        ]
    },
    {
        "id": "53a7dcef.5e7be4",
        "type": "exec",
        "z": "70453cca.cc7de4",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1590,
        "y": 880,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "21d6c7f5.6781b8",
        "type": "link in",
        "z": "70453cca.cc7de4",
        "name": "",
        "links": [
            "7a7f2e46.d7ff38"
        ],
        "x": 215,
        "y": 840,
        "wires": [
            [
                "3d57fc8d.747b14"
            ]
        ]
    },
    {
        "id": "fe96e8d5.dbc7b8",
        "type": "comment",
        "z": "70453cca.cc7de4",
        "name": "Rekognition stress test",
        "info": "",
        "x": 280,
        "y": 340,
        "wires": []
    },
    {
        "id": "6163002e.9ade5",
        "type": "AWS S3",
        "z": "70453cca.cc7de4",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 730,
        "y": 300,
        "wires": [
            [
                "5d20cfbf.42036",
                "38cb369b.cea6e2"
            ],
            []
        ]
    },
    {
        "id": "5d20cfbf.42036",
        "type": "function",
        "z": "70453cca.cc7de4",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 940,
        "y": 300,
        "wires": [
            [
                "b064be1f.b0d1d8"
            ]
        ]
    },
    {
        "id": "4c5c359e.feac1c",
        "type": "template",
        "z": "70453cca.cc7de4",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 660,
        "y": 500,
        "wires": [
            [
                "b9038764.e23ed8",
                "df8d8546.69bd"
            ]
        ]
    },
    {
        "id": "da54be71.9fd418",
        "type": "inject",
        "z": "70453cca.cc7de4",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 350,
        "y": 500,
        "wires": [
            [
                "228e56bf.83917a"
            ]
        ]
    },
    {
        "id": "df8d8546.69bd",
        "type": "exec",
        "z": "70453cca.cc7de4",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 810,
        "y": 500,
        "wires": [
            [
                "9a04d92c.1174b8"
            ],
            [
                "5e9f850.7accefc"
            ],
            []
        ]
    },
    {
        "id": "b9038764.e23ed8",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 460,
        "wires": []
    },
    {
        "id": "5e9f850.7accefc",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 460,
        "wires": []
    },
    {
        "id": "7e4672cf.ff5954",
        "type": "inject",
        "z": "70453cca.cc7de4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 540,
        "y": 300,
        "wires": [
            [
                "6163002e.9ade5"
            ]
        ]
    },
    {
        "id": "b064be1f.b0d1d8",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1110,
        "y": 300,
        "wires": []
    },
    {
        "id": "38cb369b.cea6e2",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 260,
        "wires": []
    },
    {
        "id": "9a04d92c.1174b8",
        "type": "json",
        "z": "70453cca.cc7de4",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 950,
        "y": 500,
        "wires": [
            [
                "407f35bc.d1b94c",
                "310cb283.57a81e"
            ]
        ]
    },
    {
        "id": "228e56bf.83917a",
        "type": "function",
        "z": "70453cca.cc7de4",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"11\"; //start\nmsg.end = \"11\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 490,
        "y": 500,
        "wires": [
            [
                "4c5c359e.feac1c"
            ]
        ]
    },
    {
        "id": "407f35bc.d1b94c",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1090,
        "y": 460,
        "wires": []
    },
    {
        "id": "310cb283.57a81e",
        "type": "function",
        "z": "70453cca.cc7de4",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1120,
        "y": 500,
        "wires": [
            [
                "a001fb01.2326a"
            ]
        ]
    },
    {
        "id": "63b7f8b7.02fc7",
        "type": "split",
        "z": "70453cca.cc7de4",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1470,
        "y": 500,
        "wires": [
            [
                "31485606.24646a",
                "e3074df.f3545b"
            ]
        ]
    },
    {
        "id": "7a7f2e46.d7ff38",
        "type": "link out",
        "z": "70453cca.cc7de4",
        "name": "",
        "links": [
            "21d6c7f5.6781b8"
        ],
        "x": 2355,
        "y": 460,
        "wires": []
    },
    {
        "id": "eae8d04f.f80d88",
        "type": "function",
        "z": "70453cca.cc7de4",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2370,
        "y": 580,
        "wires": [
            [
                "2429633c.0ab92c",
                "4c5c359e.feac1c",
                "3fadbc3f.5cb9e4"
            ]
        ]
    },
    {
        "id": "2429633c.0ab92c",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2510,
        "y": 580,
        "wires": []
    },
    {
        "id": "f80c7b75.f53ee",
        "type": "join",
        "z": "70453cca.cc7de4",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2210,
        "y": 580,
        "wires": [
            [
                "6fe7876a.265cb8",
                "eae8d04f.f80d88"
            ]
        ]
    },
    {
        "id": "6fe7876a.265cb8",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2430,
        "y": 500,
        "wires": []
    },
    {
        "id": "31485606.24646a",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1630,
        "y": 440,
        "wires": []
    },
    {
        "id": "e3074df.f3545b",
        "type": "counter",
        "z": "70453cca.cc7de4",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1630,
        "y": 500,
        "wires": [
            [
                "dbd84633.dd964"
            ]
        ]
    },
    {
        "id": "dbd84633.dd964",
        "type": "switch",
        "z": "70453cca.cc7de4",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1790,
        "y": 500,
        "wires": [
            [
                "e21854cf.7f2ce"
            ]
        ]
    },
    {
        "id": "1e8256bb.403d91",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 800,
        "wires": []
    },
    {
        "id": "e5df0018.a05558",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 900,
        "wires": []
    },
    {
        "id": "9d657bd7.c66f",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 780,
        "wires": []
    },
    {
        "id": "ac607a9e.db5da8",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 800,
        "wires": []
    },
    {
        "id": "41fd8c9.1a9fdf4",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 920,
        "wires": []
    },
    {
        "id": "d91c49ee.61c048",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1800,
        "y": 820,
        "wires": []
    },
    {
        "id": "5a10b4dd.5f970c",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1790,
        "y": 860,
        "wires": []
    },
    {
        "id": "89a04ff8.96d04",
        "type": "function",
        "z": "70453cca.cc7de4",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2220,
        "y": 500,
        "wires": [
            [
                "7a7f2e46.d7ff38"
            ]
        ]
    },
    {
        "id": "a001fb01.2326a",
        "type": "change",
        "z": "70453cca.cc7de4",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1300,
        "y": 500,
        "wires": [
            [
                "63b7f8b7.02fc7",
                "f4819b67.d9f7d"
            ]
        ]
    },
    {
        "id": "f4819b67.d9f7d",
        "type": "debug",
        "z": "70453cca.cc7de4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1450,
        "y": 440,
        "wires": []
    },
    {
        "id": "560a61f.2db03a",
        "type": "function",
        "z": "70453cca.cc7de4",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1910,
        "y": 660,
        "wires": [
            [
                "e21854cf.7f2ce"
            ]
        ]
    },
    {
        "id": "e21854cf.7f2ce",
        "type": "q-gate",
        "z": "70453cca.cc7de4",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 2050,
        "y": 500,
        "wires": [
            [
                "89a04ff8.96d04",
                "f80c7b75.f53ee"
            ]
        ]
    },
    {
        "id": "677c09ec.b7f788",
        "type": "function",
        "z": "70453cca.cc7de4",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1890,
        "y": 420,
        "wires": [
            [
                "e21854cf.7f2ce"
            ]
        ]
    },
    {
        "id": "ec386593.71b9d8",
        "type": "inject",
        "z": "70453cca.cc7de4",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1930,
        "y": 360,
        "wires": [
            [
                "e21854cf.7f2ce"
            ]
        ]
    },
    {
        "id": "3fadbc3f.5cb9e4",
        "type": "delay",
        "z": "70453cca.cc7de4",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2180,
        "y": 660,
        "wires": [
            [
                "560a61f.2db03a"
            ]
        ]
    },
    {
        "id": "e0ed009e.41404",
        "type": "template",
        "z": "beb40c8e.f2d98",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 230,
        "y": 880,
        "wires": [
            [
                "3369bd02.7d6dda",
                "ff11b2e7.1972c"
            ]
        ]
    },
    {
        "id": "3369bd02.7d6dda",
        "type": "exec",
        "z": "beb40c8e.f2d98",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 440,
        "y": 880,
        "wires": [
            [
                "3fd6c7e5.2fc84",
                "f3b6e501.af0dc"
            ],
            [
                "702287bf.3f421"
            ],
            []
        ]
    },
    {
        "id": "3fd6c7e5.2fc84",
        "type": "json",
        "z": "beb40c8e.f2d98",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 610,
        "y": 880,
        "wires": [
            [
                "72aceacf.d708cc"
            ]
        ]
    },
    {
        "id": "8bdbfd92.0145a",
        "type": "exec",
        "z": "beb40c8e.f2d98",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1470,
        "y": 880,
        "wires": [
            [
                "1078423f.d829f6",
                "a7301098.bbc4b"
            ],
            [
                "8c93d4b0.069f8"
            ],
            []
        ]
    },
    {
        "id": "3d20bfc2.861468",
        "type": "template",
        "z": "beb40c8e.f2d98",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1000,
        "y": 880,
        "wires": [
            [
                "73558a80.534794",
                "dc0f4172.75344"
            ]
        ]
    },
    {
        "id": "73558a80.534794",
        "type": "template",
        "z": "beb40c8e.f2d98",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1240,
        "y": 880,
        "wires": [
            [
                "8bdbfd92.0145a",
                "17d83857.4381c"
            ]
        ]
    },
    {
        "id": "72aceacf.d708cc",
        "type": "function",
        "z": "beb40c8e.f2d98",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 880,
        "wires": [
            [
                "3d20bfc2.861468"
            ]
        ]
    },
    {
        "id": "dc0f4172.75344",
        "type": "template",
        "z": "beb40c8e.f2d98",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1240,
        "y": 920,
        "wires": [
            [
                "d134fe64.835fb8",
                "464fd01.3ca7c3"
            ]
        ]
    },
    {
        "id": "d134fe64.835fb8",
        "type": "exec",
        "z": "beb40c8e.f2d98",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1470,
        "y": 920,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "c80371d8.d31a08",
        "type": "link in",
        "z": "beb40c8e.f2d98",
        "name": "",
        "links": [
            "d61812ee.ac6fe8"
        ],
        "x": 95,
        "y": 880,
        "wires": [
            [
                "e0ed009e.41404"
            ]
        ]
    },
    {
        "id": "c9150de5.83da18",
        "type": "comment",
        "z": "beb40c8e.f2d98",
        "name": "Rekognition stress test",
        "info": "",
        "x": 160,
        "y": 380,
        "wires": []
    },
    {
        "id": "941c9230.f9c2e",
        "type": "AWS S3",
        "z": "beb40c8e.f2d98",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 610,
        "y": 340,
        "wires": [
            [
                "c7de4ea2.34b46",
                "d1ed331f.8f9f3"
            ],
            []
        ]
    },
    {
        "id": "c7de4ea2.34b46",
        "type": "function",
        "z": "beb40c8e.f2d98",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 820,
        "y": 340,
        "wires": [
            [
                "5ac1d7db.497dc8"
            ]
        ]
    },
    {
        "id": "a4205c6d.77b",
        "type": "template",
        "z": "beb40c8e.f2d98",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 540,
        "y": 540,
        "wires": [
            [
                "e2637b20.5e78c8",
                "e88ce227.374548"
            ]
        ]
    },
    {
        "id": "4b54df94.60b168",
        "type": "inject",
        "z": "beb40c8e.f2d98",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 230,
        "y": 540,
        "wires": [
            [
                "738242e1.295274"
            ]
        ]
    },
    {
        "id": "e88ce227.374548",
        "type": "exec",
        "z": "beb40c8e.f2d98",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 690,
        "y": 540,
        "wires": [
            [
                "b46593fe.6f0ce8"
            ],
            [
                "47bc416.24567c"
            ],
            []
        ]
    },
    {
        "id": "e2637b20.5e78c8",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 500,
        "wires": []
    },
    {
        "id": "47bc416.24567c",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 500,
        "wires": []
    },
    {
        "id": "b2cd87a7.dd5948",
        "type": "inject",
        "z": "beb40c8e.f2d98",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 420,
        "y": 340,
        "wires": [
            [
                "941c9230.f9c2e"
            ]
        ]
    },
    {
        "id": "5ac1d7db.497dc8",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 340,
        "wires": []
    },
    {
        "id": "d1ed331f.8f9f3",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 300,
        "wires": []
    },
    {
        "id": "b46593fe.6f0ce8",
        "type": "json",
        "z": "beb40c8e.f2d98",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 830,
        "y": 540,
        "wires": [
            [
                "bd9f1809.1e91e",
                "25e1f63e.f5617a"
            ]
        ]
    },
    {
        "id": "738242e1.295274",
        "type": "function",
        "z": "beb40c8e.f2d98",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"21\"; //start\nmsg.end = \"21\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 370,
        "y": 540,
        "wires": [
            [
                "a4205c6d.77b"
            ]
        ]
    },
    {
        "id": "bd9f1809.1e91e",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 500,
        "wires": []
    },
    {
        "id": "25e1f63e.f5617a",
        "type": "function",
        "z": "beb40c8e.f2d98",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1000,
        "y": 540,
        "wires": [
            [
                "7ba96a46.bc324c"
            ]
        ]
    },
    {
        "id": "ddf4e863.50db2",
        "type": "split",
        "z": "beb40c8e.f2d98",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1350,
        "y": 540,
        "wires": [
            [
                "99c06944.027e",
                "39b766d0.607cea"
            ]
        ]
    },
    {
        "id": "d61812ee.ac6fe8",
        "type": "link out",
        "z": "beb40c8e.f2d98",
        "name": "",
        "links": [
            "c80371d8.d31a08"
        ],
        "x": 2235,
        "y": 500,
        "wires": []
    },
    {
        "id": "1607156a.7adf73",
        "type": "function",
        "z": "beb40c8e.f2d98",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2250,
        "y": 620,
        "wires": [
            [
                "d772dede.5b8f78",
                "a4205c6d.77b",
                "5b6a3aca.567e4c"
            ]
        ]
    },
    {
        "id": "d772dede.5b8f78",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2390,
        "y": 620,
        "wires": []
    },
    {
        "id": "1a2c19e5.17b9f6",
        "type": "join",
        "z": "beb40c8e.f2d98",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2090,
        "y": 620,
        "wires": [
            [
                "a10f5a3a.7cc54",
                "1607156a.7adf73"
            ]
        ]
    },
    {
        "id": "a10f5a3a.7cc54",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2310,
        "y": 540,
        "wires": []
    },
    {
        "id": "99c06944.027e",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1510,
        "y": 480,
        "wires": []
    },
    {
        "id": "39b766d0.607cea",
        "type": "counter",
        "z": "beb40c8e.f2d98",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1510,
        "y": 540,
        "wires": [
            [
                "45a93e84.835f3"
            ]
        ]
    },
    {
        "id": "45a93e84.835f3",
        "type": "switch",
        "z": "beb40c8e.f2d98",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1670,
        "y": 540,
        "wires": [
            [
                "f0acca31.16059"
            ]
        ]
    },
    {
        "id": "f3b6e501.af0dc",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 840,
        "wires": []
    },
    {
        "id": "702287bf.3f421",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 940,
        "wires": []
    },
    {
        "id": "ff11b2e7.1972c",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 820,
        "wires": []
    },
    {
        "id": "17d83857.4381c",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 840,
        "wires": []
    },
    {
        "id": "464fd01.3ca7c3",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 960,
        "wires": []
    },
    {
        "id": "1078423f.d829f6",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1680,
        "y": 860,
        "wires": []
    },
    {
        "id": "8c93d4b0.069f8",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 900,
        "wires": []
    },
    {
        "id": "ddc1fe09.ec0b38",
        "type": "function",
        "z": "beb40c8e.f2d98",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2100,
        "y": 540,
        "wires": [
            [
                "d61812ee.ac6fe8"
            ]
        ]
    },
    {
        "id": "7ba96a46.bc324c",
        "type": "change",
        "z": "beb40c8e.f2d98",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1180,
        "y": 540,
        "wires": [
            [
                "ddf4e863.50db2",
                "337b55.d7dd04ac"
            ]
        ]
    },
    {
        "id": "337b55.d7dd04ac",
        "type": "debug",
        "z": "beb40c8e.f2d98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1330,
        "y": 480,
        "wires": []
    },
    {
        "id": "a7301098.bbc4b",
        "type": "function",
        "z": "beb40c8e.f2d98",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1790,
        "y": 700,
        "wires": [
            [
                "f0acca31.16059"
            ]
        ]
    },
    {
        "id": "f0acca31.16059",
        "type": "q-gate",
        "z": "beb40c8e.f2d98",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 1930,
        "y": 540,
        "wires": [
            [
                "ddc1fe09.ec0b38",
                "1a2c19e5.17b9f6"
            ]
        ]
    },
    {
        "id": "630e1495.bb7d94",
        "type": "function",
        "z": "beb40c8e.f2d98",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1770,
        "y": 460,
        "wires": [
            [
                "f0acca31.16059"
            ]
        ]
    },
    {
        "id": "7cc41f22.1b0f08",
        "type": "inject",
        "z": "beb40c8e.f2d98",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1790,
        "y": 340,
        "wires": [
            [
                "f0acca31.16059"
            ]
        ]
    },
    {
        "id": "5b6a3aca.567e4c",
        "type": "delay",
        "z": "beb40c8e.f2d98",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2060,
        "y": 700,
        "wires": [
            [
                "a7301098.bbc4b"
            ]
        ]
    },
    {
        "id": "667e9ad.9f436e4",
        "type": "template",
        "z": "3d146b75.03e074",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 310,
        "y": 740,
        "wires": [
            [
                "98f60a79.1f3bd8",
                "f267112c.893658"
            ]
        ]
    },
    {
        "id": "98f60a79.1f3bd8",
        "type": "exec",
        "z": "3d146b75.03e074",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 520,
        "y": 740,
        "wires": [
            [
                "6d7f137a.4df554",
                "3b187580.e0c042"
            ],
            [
                "6de733ea.6bf09c"
            ],
            []
        ]
    },
    {
        "id": "6d7f137a.4df554",
        "type": "json",
        "z": "3d146b75.03e074",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 690,
        "y": 740,
        "wires": [
            [
                "ae003d1.95a7fc"
            ]
        ]
    },
    {
        "id": "2e117d74.2e3522",
        "type": "exec",
        "z": "3d146b75.03e074",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1550,
        "y": 740,
        "wires": [
            [
                "efdf8c1.6f799f",
                "a68a00e2.245df"
            ],
            [
                "35630dad.03d2a2"
            ],
            []
        ]
    },
    {
        "id": "5703109.8f299f",
        "type": "template",
        "z": "3d146b75.03e074",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1080,
        "y": 740,
        "wires": [
            [
                "cf505320.c3eae",
                "f8f5f558.08dc1"
            ]
        ]
    },
    {
        "id": "cf505320.c3eae",
        "type": "template",
        "z": "3d146b75.03e074",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1320,
        "y": 740,
        "wires": [
            [
                "2e117d74.2e3522",
                "782d0cb4.a36d3c"
            ]
        ]
    },
    {
        "id": "ae003d1.95a7fc",
        "type": "function",
        "z": "3d146b75.03e074",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 850,
        "y": 740,
        "wires": [
            [
                "5703109.8f299f"
            ]
        ]
    },
    {
        "id": "f8f5f558.08dc1",
        "type": "template",
        "z": "3d146b75.03e074",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1320,
        "y": 780,
        "wires": [
            [
                "f69d8ba5.4b8e48",
                "2d0c9d38.be16a2"
            ]
        ]
    },
    {
        "id": "f69d8ba5.4b8e48",
        "type": "exec",
        "z": "3d146b75.03e074",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1550,
        "y": 780,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "a8ded038.a609b8",
        "type": "link in",
        "z": "3d146b75.03e074",
        "name": "",
        "links": [
            "a94556a3.de4828"
        ],
        "x": 175,
        "y": 740,
        "wires": [
            [
                "667e9ad.9f436e4"
            ]
        ]
    },
    {
        "id": "23dc020e.f28266",
        "type": "comment",
        "z": "3d146b75.03e074",
        "name": "Rekognition stress test",
        "info": "",
        "x": 240,
        "y": 240,
        "wires": []
    },
    {
        "id": "404f2674.501f7",
        "type": "AWS S3",
        "z": "3d146b75.03e074",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 690,
        "y": 200,
        "wires": [
            [
                "8867328f.b6118",
                "545300cd.c31b68"
            ],
            []
        ]
    },
    {
        "id": "8867328f.b6118",
        "type": "function",
        "z": "3d146b75.03e074",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 900,
        "y": 200,
        "wires": [
            [
                "4ee5c6ad.24ce58"
            ]
        ]
    },
    {
        "id": "691c0741.979a48",
        "type": "template",
        "z": "3d146b75.03e074",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 620,
        "y": 400,
        "wires": [
            [
                "c2a1d896.fe318",
                "b4e6765f.6eac48"
            ]
        ]
    },
    {
        "id": "98d11b88.64dc28",
        "type": "inject",
        "z": "3d146b75.03e074",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 310,
        "y": 400,
        "wires": [
            [
                "c73ebacf.87445"
            ]
        ]
    },
    {
        "id": "b4e6765f.6eac48",
        "type": "exec",
        "z": "3d146b75.03e074",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 770,
        "y": 400,
        "wires": [
            [
                "f6023c32.8a2ff8"
            ],
            [
                "c40e9fdb.07ac9"
            ],
            []
        ]
    },
    {
        "id": "c2a1d896.fe318",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 360,
        "wires": []
    },
    {
        "id": "c40e9fdb.07ac9",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 360,
        "wires": []
    },
    {
        "id": "5b43018e.7467d",
        "type": "inject",
        "z": "3d146b75.03e074",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 500,
        "y": 200,
        "wires": [
            [
                "404f2674.501f7"
            ]
        ]
    },
    {
        "id": "4ee5c6ad.24ce58",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1070,
        "y": 200,
        "wires": []
    },
    {
        "id": "545300cd.c31b68",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 160,
        "wires": []
    },
    {
        "id": "f6023c32.8a2ff8",
        "type": "json",
        "z": "3d146b75.03e074",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 910,
        "y": 400,
        "wires": [
            [
                "41560520.96b6e4",
                "b3b99ac7.835238"
            ]
        ]
    },
    {
        "id": "c73ebacf.87445",
        "type": "function",
        "z": "3d146b75.03e074",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"16\"; //start\nmsg.end = \"16\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 450,
        "y": 400,
        "wires": [
            [
                "691c0741.979a48"
            ]
        ]
    },
    {
        "id": "41560520.96b6e4",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1050,
        "y": 360,
        "wires": []
    },
    {
        "id": "b3b99ac7.835238",
        "type": "function",
        "z": "3d146b75.03e074",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1080,
        "y": 400,
        "wires": [
            [
                "4e613a90.887c64"
            ]
        ]
    },
    {
        "id": "2060aec.df3d452",
        "type": "split",
        "z": "3d146b75.03e074",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1430,
        "y": 400,
        "wires": [
            [
                "273e147f.a58834",
                "6cf48ed6.2e6e58"
            ]
        ]
    },
    {
        "id": "a94556a3.de4828",
        "type": "link out",
        "z": "3d146b75.03e074",
        "name": "",
        "links": [
            "a8ded038.a609b8"
        ],
        "x": 2315,
        "y": 360,
        "wires": []
    },
    {
        "id": "3209fffd.9ce578",
        "type": "function",
        "z": "3d146b75.03e074",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2330,
        "y": 480,
        "wires": [
            [
                "39704bd5.1bc38c",
                "691c0741.979a48",
                "c916e6ab.6373a8"
            ]
        ]
    },
    {
        "id": "39704bd5.1bc38c",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2470,
        "y": 480,
        "wires": []
    },
    {
        "id": "395b295.1a393d6",
        "type": "join",
        "z": "3d146b75.03e074",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2170,
        "y": 480,
        "wires": [
            [
                "5b61a52f.e9adbc",
                "3209fffd.9ce578"
            ]
        ]
    },
    {
        "id": "5b61a52f.e9adbc",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2390,
        "y": 400,
        "wires": []
    },
    {
        "id": "273e147f.a58834",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1590,
        "y": 340,
        "wires": []
    },
    {
        "id": "6cf48ed6.2e6e58",
        "type": "counter",
        "z": "3d146b75.03e074",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1590,
        "y": 400,
        "wires": [
            [
                "858f870b.cc4678"
            ]
        ]
    },
    {
        "id": "858f870b.cc4678",
        "type": "switch",
        "z": "3d146b75.03e074",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1750,
        "y": 400,
        "wires": [
            [
                "470a4a35.f88bbc"
            ]
        ]
    },
    {
        "id": "3b187580.e0c042",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 700,
        "wires": []
    },
    {
        "id": "6de733ea.6bf09c",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 800,
        "wires": []
    },
    {
        "id": "f267112c.893658",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 680,
        "wires": []
    },
    {
        "id": "782d0cb4.a36d3c",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1490,
        "y": 700,
        "wires": []
    },
    {
        "id": "2d0c9d38.be16a2",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1490,
        "y": 820,
        "wires": []
    },
    {
        "id": "efdf8c1.6f799f",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1760,
        "y": 720,
        "wires": []
    },
    {
        "id": "35630dad.03d2a2",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1750,
        "y": 760,
        "wires": []
    },
    {
        "id": "dd3df9bf.2d7a08",
        "type": "function",
        "z": "3d146b75.03e074",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2180,
        "y": 400,
        "wires": [
            [
                "a94556a3.de4828"
            ]
        ]
    },
    {
        "id": "4e613a90.887c64",
        "type": "change",
        "z": "3d146b75.03e074",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1260,
        "y": 400,
        "wires": [
            [
                "2060aec.df3d452",
                "f683375e.30bbc8"
            ]
        ]
    },
    {
        "id": "f683375e.30bbc8",
        "type": "debug",
        "z": "3d146b75.03e074",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 340,
        "wires": []
    },
    {
        "id": "a68a00e2.245df",
        "type": "function",
        "z": "3d146b75.03e074",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1870,
        "y": 560,
        "wires": [
            [
                "470a4a35.f88bbc"
            ]
        ]
    },
    {
        "id": "470a4a35.f88bbc",
        "type": "q-gate",
        "z": "3d146b75.03e074",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 2010,
        "y": 400,
        "wires": [
            [
                "dd3df9bf.2d7a08",
                "395b295.1a393d6"
            ]
        ]
    },
    {
        "id": "2e85d367.5c89bc",
        "type": "function",
        "z": "3d146b75.03e074",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1850,
        "y": 320,
        "wires": [
            [
                "470a4a35.f88bbc"
            ]
        ]
    },
    {
        "id": "bccce452.aed918",
        "type": "inject",
        "z": "3d146b75.03e074",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1930,
        "y": 200,
        "wires": [
            [
                "470a4a35.f88bbc"
            ]
        ]
    },
    {
        "id": "c916e6ab.6373a8",
        "type": "delay",
        "z": "3d146b75.03e074",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2140,
        "y": 560,
        "wires": [
            [
                "a68a00e2.245df"
            ]
        ]
    },
    {
        "id": "4280f4bf.f22f4c",
        "type": "template",
        "z": "bcebcde0.9d2408",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 250,
        "y": 780,
        "wires": [
            [
                "768c3d63.bafbf4",
                "817e76e0.69a46"
            ]
        ]
    },
    {
        "id": "768c3d63.bafbf4",
        "type": "exec",
        "z": "bcebcde0.9d2408",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 460,
        "y": 780,
        "wires": [
            [
                "2228aa47.6088be",
                "bda703b4.9fa7a8"
            ],
            [
                "214f2f34.68e148"
            ],
            []
        ]
    },
    {
        "id": "2228aa47.6088be",
        "type": "json",
        "z": "bcebcde0.9d2408",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 630,
        "y": 780,
        "wires": [
            [
                "2ed6778d.efeff"
            ]
        ]
    },
    {
        "id": "19669b56.64c74d",
        "type": "exec",
        "z": "bcebcde0.9d2408",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1490,
        "y": 780,
        "wires": [
            [
                "bc9b5e2.d0f32a",
                "b927a78e.ec0ef8"
            ],
            [
                "4eb6eb7b.5cfee4"
            ],
            []
        ]
    },
    {
        "id": "eaf33584.63d12",
        "type": "template",
        "z": "bcebcde0.9d2408",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1020,
        "y": 780,
        "wires": [
            [
                "28393612.0e750a",
                "3147d007.bf8dd"
            ]
        ]
    },
    {
        "id": "28393612.0e750a",
        "type": "template",
        "z": "bcebcde0.9d2408",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1260,
        "y": 780,
        "wires": [
            [
                "19669b56.64c74d",
                "60ffa9bb.7ab3b8"
            ]
        ]
    },
    {
        "id": "2ed6778d.efeff",
        "type": "function",
        "z": "bcebcde0.9d2408",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 790,
        "y": 780,
        "wires": [
            [
                "eaf33584.63d12"
            ]
        ]
    },
    {
        "id": "3147d007.bf8dd",
        "type": "template",
        "z": "bcebcde0.9d2408",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1260,
        "y": 820,
        "wires": [
            [
                "d9c80752.38275",
                "f3c80a92.78ea48"
            ]
        ]
    },
    {
        "id": "d9c80752.38275",
        "type": "exec",
        "z": "bcebcde0.9d2408",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1490,
        "y": 820,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "ad698a69.7c4908",
        "type": "link in",
        "z": "bcebcde0.9d2408",
        "name": "",
        "links": [
            "ae73f87d.958248"
        ],
        "x": 115,
        "y": 780,
        "wires": [
            [
                "4280f4bf.f22f4c"
            ]
        ]
    },
    {
        "id": "261f9ebf.c0bf2a",
        "type": "comment",
        "z": "bcebcde0.9d2408",
        "name": "Rekognition stress test",
        "info": "",
        "x": 180,
        "y": 280,
        "wires": []
    },
    {
        "id": "aebc2b62.ff7bc",
        "type": "AWS S3",
        "z": "bcebcde0.9d2408",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 630,
        "y": 240,
        "wires": [
            [
                "32a8679b.6e29a",
                "d7b8bc4e.197a18"
            ],
            []
        ]
    },
    {
        "id": "32a8679b.6e29a",
        "type": "function",
        "z": "bcebcde0.9d2408",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 240,
        "wires": [
            [
                "541083a.e0d95fc"
            ]
        ]
    },
    {
        "id": "774e5daa.691fc4",
        "type": "template",
        "z": "bcebcde0.9d2408",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 560,
        "y": 440,
        "wires": [
            [
                "91aa4a4.5cc3438",
                "1aebaed9.9f4869"
            ]
        ]
    },
    {
        "id": "78042cfd.f55a1c",
        "type": "inject",
        "z": "bcebcde0.9d2408",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 250,
        "y": 440,
        "wires": [
            [
                "fe267386.9707a"
            ]
        ]
    },
    {
        "id": "1aebaed9.9f4869",
        "type": "exec",
        "z": "bcebcde0.9d2408",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 710,
        "y": 440,
        "wires": [
            [
                "ac019495.9c4868"
            ],
            [
                "4a7bf750.b87098"
            ],
            []
        ]
    },
    {
        "id": "91aa4a4.5cc3438",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 400,
        "wires": []
    },
    {
        "id": "4a7bf750.b87098",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 400,
        "wires": []
    },
    {
        "id": "b10a1392.b1d6b",
        "type": "inject",
        "z": "bcebcde0.9d2408",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 440,
        "y": 240,
        "wires": [
            [
                "aebc2b62.ff7bc"
            ]
        ]
    },
    {
        "id": "541083a.e0d95fc",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 240,
        "wires": []
    },
    {
        "id": "d7b8bc4e.197a18",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 200,
        "wires": []
    },
    {
        "id": "ac019495.9c4868",
        "type": "json",
        "z": "bcebcde0.9d2408",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 440,
        "wires": [
            [
                "9b1d4caf.751b98",
                "e3444986.124438"
            ]
        ]
    },
    {
        "id": "fe267386.9707a",
        "type": "function",
        "z": "bcebcde0.9d2408",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"26\"; //start\nmsg.end = \"26\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 440,
        "wires": [
            [
                "774e5daa.691fc4"
            ]
        ]
    },
    {
        "id": "9b1d4caf.751b98",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 400,
        "wires": []
    },
    {
        "id": "e3444986.124438",
        "type": "function",
        "z": "bcebcde0.9d2408",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 440,
        "wires": [
            [
                "9f45afe4.cbc43"
            ]
        ]
    },
    {
        "id": "31b61297.5a6546",
        "type": "split",
        "z": "bcebcde0.9d2408",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1370,
        "y": 440,
        "wires": [
            [
                "64fbd8f2.f69c88",
                "bee94ace.6b124"
            ]
        ]
    },
    {
        "id": "ae73f87d.958248",
        "type": "link out",
        "z": "bcebcde0.9d2408",
        "name": "",
        "links": [
            "ad698a69.7c4908"
        ],
        "x": 2255,
        "y": 400,
        "wires": []
    },
    {
        "id": "32d46c76.e303a4",
        "type": "function",
        "z": "bcebcde0.9d2408",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2270,
        "y": 520,
        "wires": [
            [
                "46bea8cb.412fd8",
                "774e5daa.691fc4",
                "605202e9.6e93d4"
            ]
        ]
    },
    {
        "id": "46bea8cb.412fd8",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2410,
        "y": 520,
        "wires": []
    },
    {
        "id": "c84526a4.bcc21",
        "type": "join",
        "z": "bcebcde0.9d2408",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2110,
        "y": 520,
        "wires": [
            [
                "796ce9e5.ed3588",
                "32d46c76.e303a4"
            ]
        ]
    },
    {
        "id": "796ce9e5.ed3588",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2330,
        "y": 440,
        "wires": []
    },
    {
        "id": "64fbd8f2.f69c88",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 380,
        "wires": []
    },
    {
        "id": "bee94ace.6b124",
        "type": "counter",
        "z": "bcebcde0.9d2408",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1530,
        "y": 440,
        "wires": [
            [
                "d1731394.81077"
            ]
        ]
    },
    {
        "id": "d1731394.81077",
        "type": "switch",
        "z": "bcebcde0.9d2408",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1690,
        "y": 440,
        "wires": [
            [
                "fae3d9f2.232ce8"
            ]
        ]
    },
    {
        "id": "bda703b4.9fa7a8",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 740,
        "wires": []
    },
    {
        "id": "214f2f34.68e148",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 840,
        "wires": []
    },
    {
        "id": "817e76e0.69a46",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 430,
        "y": 720,
        "wires": []
    },
    {
        "id": "60ffa9bb.7ab3b8",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 740,
        "wires": []
    },
    {
        "id": "f3c80a92.78ea48",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 860,
        "wires": []
    },
    {
        "id": "bc9b5e2.d0f32a",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1700,
        "y": 760,
        "wires": []
    },
    {
        "id": "4eb6eb7b.5cfee4",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1690,
        "y": 800,
        "wires": []
    },
    {
        "id": "32118db0.7456f2",
        "type": "function",
        "z": "bcebcde0.9d2408",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2120,
        "y": 440,
        "wires": [
            [
                "ae73f87d.958248"
            ]
        ]
    },
    {
        "id": "9f45afe4.cbc43",
        "type": "change",
        "z": "bcebcde0.9d2408",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 440,
        "wires": [
            [
                "31b61297.5a6546",
                "502c2d1f.c8c9dc"
            ]
        ]
    },
    {
        "id": "502c2d1f.c8c9dc",
        "type": "debug",
        "z": "bcebcde0.9d2408",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 380,
        "wires": []
    },
    {
        "id": "b927a78e.ec0ef8",
        "type": "function",
        "z": "bcebcde0.9d2408",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1810,
        "y": 600,
        "wires": [
            [
                "fae3d9f2.232ce8"
            ]
        ]
    },
    {
        "id": "fae3d9f2.232ce8",
        "type": "q-gate",
        "z": "bcebcde0.9d2408",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 1950,
        "y": 440,
        "wires": [
            [
                "32118db0.7456f2",
                "c84526a4.bcc21"
            ]
        ]
    },
    {
        "id": "88d4b384.3faca8",
        "type": "function",
        "z": "bcebcde0.9d2408",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1790,
        "y": 360,
        "wires": [
            [
                "fae3d9f2.232ce8"
            ]
        ]
    },
    {
        "id": "a6c5fe47.1ff7f8",
        "type": "inject",
        "z": "bcebcde0.9d2408",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1830,
        "y": 300,
        "wires": [
            [
                "fae3d9f2.232ce8"
            ]
        ]
    },
    {
        "id": "605202e9.6e93d4",
        "type": "delay",
        "z": "bcebcde0.9d2408",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2080,
        "y": 600,
        "wires": [
            [
                "b927a78e.ec0ef8"
            ]
        ]
    },
    {
        "id": "998e36f6.7d85f",
        "type": "template",
        "z": "d6269b0e.abe448",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 250,
        "y": 740,
        "wires": [
            [
                "cfa5bda8.3e6c1",
                "d3045eb3.e7f718"
            ]
        ]
    },
    {
        "id": "cfa5bda8.3e6c1",
        "type": "exec",
        "z": "d6269b0e.abe448",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 460,
        "y": 740,
        "wires": [
            [
                "e92afc65.485b88",
                "b0289446.7ec5a8"
            ],
            [
                "5f106285.756c4c"
            ],
            []
        ]
    },
    {
        "id": "e92afc65.485b88",
        "type": "json",
        "z": "d6269b0e.abe448",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 630,
        "y": 740,
        "wires": [
            [
                "ba8db801.37b088"
            ]
        ]
    },
    {
        "id": "43be2caf.02b9ec",
        "type": "exec",
        "z": "d6269b0e.abe448",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1490,
        "y": 740,
        "wires": [
            [
                "f0124319.a9c6d",
                "4194b831.4646d"
            ],
            [
                "d443d8ec.6eb738"
            ],
            []
        ]
    },
    {
        "id": "27ba89e7.d14426",
        "type": "template",
        "z": "d6269b0e.abe448",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1020,
        "y": 740,
        "wires": [
            [
                "f59d56e0.19ad7",
                "335d1e93.ae293a"
            ]
        ]
    },
    {
        "id": "f59d56e0.19ad7",
        "type": "template",
        "z": "d6269b0e.abe448",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1260,
        "y": 740,
        "wires": [
            [
                "43be2caf.02b9ec",
                "20cc9e9a.54df9a"
            ]
        ]
    },
    {
        "id": "ba8db801.37b088",
        "type": "function",
        "z": "d6269b0e.abe448",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 790,
        "y": 740,
        "wires": [
            [
                "27ba89e7.d14426"
            ]
        ]
    },
    {
        "id": "335d1e93.ae293a",
        "type": "template",
        "z": "d6269b0e.abe448",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1260,
        "y": 780,
        "wires": [
            [
                "3a8ce9b1.d59b8e",
                "e918aba9.14254"
            ]
        ]
    },
    {
        "id": "3a8ce9b1.d59b8e",
        "type": "exec",
        "z": "d6269b0e.abe448",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1490,
        "y": 780,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "7e7d76cc.01f49",
        "type": "link in",
        "z": "d6269b0e.abe448",
        "name": "",
        "links": [
            "99cf70c0.b908f8"
        ],
        "x": 115,
        "y": 740,
        "wires": [
            [
                "998e36f6.7d85f"
            ]
        ]
    },
    {
        "id": "48b54f23.16f8e8",
        "type": "comment",
        "z": "d6269b0e.abe448",
        "name": "Rekognition stress test",
        "info": "",
        "x": 180,
        "y": 240,
        "wires": []
    },
    {
        "id": "42f0f679.d23a6",
        "type": "AWS S3",
        "z": "d6269b0e.abe448",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 630,
        "y": 200,
        "wires": [
            [
                "8c0dcd3f.bb289",
                "17eec0b7.0ac6bf"
            ],
            []
        ]
    },
    {
        "id": "8c0dcd3f.bb289",
        "type": "function",
        "z": "d6269b0e.abe448",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 200,
        "wires": [
            [
                "34473ef3.f52902"
            ]
        ]
    },
    {
        "id": "321787f2.3021a",
        "type": "template",
        "z": "d6269b0e.abe448",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 560,
        "y": 400,
        "wires": [
            [
                "93e9e23d.3fff18",
                "e8698784.75183"
            ]
        ]
    },
    {
        "id": "6238001d.976fe8",
        "type": "inject",
        "z": "d6269b0e.abe448",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 250,
        "y": 400,
        "wires": [
            [
                "e4bbfc73.f7dfd8"
            ]
        ]
    },
    {
        "id": "e8698784.75183",
        "type": "exec",
        "z": "d6269b0e.abe448",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 710,
        "y": 400,
        "wires": [
            [
                "61089b0b.6ff2fc"
            ],
            [
                "6d35707f.f37918"
            ],
            []
        ]
    },
    {
        "id": "93e9e23d.3fff18",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 360,
        "wires": []
    },
    {
        "id": "6d35707f.f37918",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 360,
        "wires": []
    },
    {
        "id": "cc43269c.da432",
        "type": "inject",
        "z": "d6269b0e.abe448",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 440,
        "y": 200,
        "wires": [
            [
                "42f0f679.d23a6"
            ]
        ]
    },
    {
        "id": "34473ef3.f52902",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 200,
        "wires": []
    },
    {
        "id": "17eec0b7.0ac6bf",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 160,
        "wires": []
    },
    {
        "id": "61089b0b.6ff2fc",
        "type": "json",
        "z": "d6269b0e.abe448",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 400,
        "wires": [
            [
                "3b2c4fe6.91f568",
                "66a760c2.7f2b2"
            ]
        ]
    },
    {
        "id": "e4bbfc73.f7dfd8",
        "type": "function",
        "z": "d6269b0e.abe448",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"31\"; //start\nmsg.end = \"31\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 400,
        "wires": [
            [
                "321787f2.3021a"
            ]
        ]
    },
    {
        "id": "3b2c4fe6.91f568",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 360,
        "wires": []
    },
    {
        "id": "66a760c2.7f2b2",
        "type": "function",
        "z": "d6269b0e.abe448",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 400,
        "wires": [
            [
                "73fddd46.e2c034"
            ]
        ]
    },
    {
        "id": "6189b83f.90ab9",
        "type": "split",
        "z": "d6269b0e.abe448",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1370,
        "y": 400,
        "wires": [
            [
                "1181c382.64d63c",
                "46b9293c.807e68"
            ]
        ]
    },
    {
        "id": "99cf70c0.b908f8",
        "type": "link out",
        "z": "d6269b0e.abe448",
        "name": "",
        "links": [
            "7e7d76cc.01f49"
        ],
        "x": 2255,
        "y": 360,
        "wires": []
    },
    {
        "id": "986d2a0c.697dd",
        "type": "function",
        "z": "d6269b0e.abe448",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2270,
        "y": 480,
        "wires": [
            [
                "c8012b74.ee4a78",
                "321787f2.3021a",
                "c18106d6.d32c8"
            ]
        ]
    },
    {
        "id": "c8012b74.ee4a78",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2410,
        "y": 480,
        "wires": []
    },
    {
        "id": "b04b52d8.8ed8d8",
        "type": "join",
        "z": "d6269b0e.abe448",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2110,
        "y": 480,
        "wires": [
            [
                "1557236b.d65dd5",
                "986d2a0c.697dd"
            ]
        ]
    },
    {
        "id": "1557236b.d65dd5",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2330,
        "y": 400,
        "wires": []
    },
    {
        "id": "1181c382.64d63c",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 340,
        "wires": []
    },
    {
        "id": "46b9293c.807e68",
        "type": "counter",
        "z": "d6269b0e.abe448",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1530,
        "y": 400,
        "wires": [
            [
                "679bda8d.7e3704"
            ]
        ]
    },
    {
        "id": "679bda8d.7e3704",
        "type": "switch",
        "z": "d6269b0e.abe448",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1690,
        "y": 400,
        "wires": [
            [
                "4a39de4c.67bb18"
            ]
        ]
    },
    {
        "id": "b0289446.7ec5a8",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 700,
        "wires": []
    },
    {
        "id": "5f106285.756c4c",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 800,
        "wires": []
    },
    {
        "id": "d3045eb3.e7f718",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 430,
        "y": 680,
        "wires": []
    },
    {
        "id": "20cc9e9a.54df9a",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 700,
        "wires": []
    },
    {
        "id": "e918aba9.14254",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 820,
        "wires": []
    },
    {
        "id": "f0124319.a9c6d",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1700,
        "y": 720,
        "wires": []
    },
    {
        "id": "d443d8ec.6eb738",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1690,
        "y": 760,
        "wires": []
    },
    {
        "id": "bee88e38.d089",
        "type": "function",
        "z": "d6269b0e.abe448",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2120,
        "y": 400,
        "wires": [
            [
                "99cf70c0.b908f8"
            ]
        ]
    },
    {
        "id": "73fddd46.e2c034",
        "type": "change",
        "z": "d6269b0e.abe448",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 400,
        "wires": [
            [
                "6189b83f.90ab9",
                "d94a5db8.f4e818"
            ]
        ]
    },
    {
        "id": "d94a5db8.f4e818",
        "type": "debug",
        "z": "d6269b0e.abe448",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 340,
        "wires": []
    },
    {
        "id": "4194b831.4646d",
        "type": "function",
        "z": "d6269b0e.abe448",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1810,
        "y": 560,
        "wires": [
            [
                "4a39de4c.67bb18"
            ]
        ]
    },
    {
        "id": "4a39de4c.67bb18",
        "type": "q-gate",
        "z": "d6269b0e.abe448",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 1950,
        "y": 400,
        "wires": [
            [
                "bee88e38.d089",
                "b04b52d8.8ed8d8"
            ]
        ]
    },
    {
        "id": "ade10474.2346e8",
        "type": "function",
        "z": "d6269b0e.abe448",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1790,
        "y": 320,
        "wires": [
            [
                "4a39de4c.67bb18"
            ]
        ]
    },
    {
        "id": "ebd2f5e1.49bcc",
        "type": "inject",
        "z": "d6269b0e.abe448",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1830,
        "y": 260,
        "wires": [
            [
                "4a39de4c.67bb18"
            ]
        ]
    },
    {
        "id": "c18106d6.d32c8",
        "type": "delay",
        "z": "d6269b0e.abe448",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2080,
        "y": 560,
        "wires": [
            [
                "4194b831.4646d"
            ]
        ]
    },
    {
        "id": "ad8cc9b6.983218",
        "type": "template",
        "z": "197773db.fd264c",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 230,
        "y": 740,
        "wires": [
            [
                "74f0c5a0.e0ce0c",
                "cb54840a.ccf51"
            ]
        ]
    },
    {
        "id": "74f0c5a0.e0ce0c",
        "type": "exec",
        "z": "197773db.fd264c",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 440,
        "y": 740,
        "wires": [
            [
                "31eb6184.c77366",
                "d7aaaf99.aaae7"
            ],
            [
                "c9eb1bef.fc676"
            ],
            []
        ]
    },
    {
        "id": "31eb6184.c77366",
        "type": "json",
        "z": "197773db.fd264c",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 610,
        "y": 740,
        "wires": [
            [
                "907de2c.b63452"
            ]
        ]
    },
    {
        "id": "39bede63.4e95f2",
        "type": "exec",
        "z": "197773db.fd264c",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1470,
        "y": 740,
        "wires": [
            [
                "bf84ebd2.de0b7",
                "742f8a47.1e5604"
            ],
            [
                "ac6a5dcd.5cef2"
            ],
            []
        ]
    },
    {
        "id": "4d296abe.3ba09c",
        "type": "template",
        "z": "197773db.fd264c",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1000,
        "y": 740,
        "wires": [
            [
                "adf9e50.3019a98",
                "911453ef.2acce"
            ]
        ]
    },
    {
        "id": "adf9e50.3019a98",
        "type": "template",
        "z": "197773db.fd264c",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1240,
        "y": 740,
        "wires": [
            [
                "39bede63.4e95f2",
                "8fbbb2c.7b4435"
            ]
        ]
    },
    {
        "id": "907de2c.b63452",
        "type": "function",
        "z": "197773db.fd264c",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 740,
        "wires": [
            [
                "4d296abe.3ba09c"
            ]
        ]
    },
    {
        "id": "911453ef.2acce",
        "type": "template",
        "z": "197773db.fd264c",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1240,
        "y": 780,
        "wires": [
            [
                "9c1e3244.dabda8",
                "9e7832e7.d83118"
            ]
        ]
    },
    {
        "id": "9c1e3244.dabda8",
        "type": "exec",
        "z": "197773db.fd264c",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1470,
        "y": 780,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "3d777c94.5a5424",
        "type": "link in",
        "z": "197773db.fd264c",
        "name": "",
        "links": [
            "4e09795.786fa88"
        ],
        "x": 95,
        "y": 740,
        "wires": [
            [
                "ad8cc9b6.983218"
            ]
        ]
    },
    {
        "id": "fcf48695.9bf4b",
        "type": "comment",
        "z": "197773db.fd264c",
        "name": "Rekognition stress test",
        "info": "",
        "x": 160,
        "y": 240,
        "wires": []
    },
    {
        "id": "f9ecee67.0ccab8",
        "type": "AWS S3",
        "z": "197773db.fd264c",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 610,
        "y": 200,
        "wires": [
            [
                "82a1caa7.7989c8",
                "76ecaeba.fdf8e"
            ],
            []
        ]
    },
    {
        "id": "82a1caa7.7989c8",
        "type": "function",
        "z": "197773db.fd264c",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 820,
        "y": 200,
        "wires": [
            [
                "7613e137.1d1bc8"
            ]
        ]
    },
    {
        "id": "5b261978.39bee8",
        "type": "template",
        "z": "197773db.fd264c",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 540,
        "y": 400,
        "wires": [
            [
                "abee4149.a4f5b",
                "866758f0.743d5"
            ]
        ]
    },
    {
        "id": "1cafe267.4f05e6",
        "type": "inject",
        "z": "197773db.fd264c",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 230,
        "y": 400,
        "wires": [
            [
                "c153692c.5cb7c8"
            ]
        ]
    },
    {
        "id": "866758f0.743d5",
        "type": "exec",
        "z": "197773db.fd264c",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 690,
        "y": 400,
        "wires": [
            [
                "5c0654d5.2f83ac"
            ],
            [
                "7dea6278.410134"
            ],
            []
        ]
    },
    {
        "id": "abee4149.a4f5b",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 360,
        "wires": []
    },
    {
        "id": "7dea6278.410134",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 360,
        "wires": []
    },
    {
        "id": "a7b76cad.c6545",
        "type": "inject",
        "z": "197773db.fd264c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 420,
        "y": 200,
        "wires": [
            [
                "f9ecee67.0ccab8"
            ]
        ]
    },
    {
        "id": "7613e137.1d1bc8",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 200,
        "wires": []
    },
    {
        "id": "76ecaeba.fdf8e",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 160,
        "wires": []
    },
    {
        "id": "5c0654d5.2f83ac",
        "type": "json",
        "z": "197773db.fd264c",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 830,
        "y": 400,
        "wires": [
            [
                "f82eb603.6d7bd8",
                "e24779be.9c36a"
            ]
        ]
    },
    {
        "id": "c153692c.5cb7c8",
        "type": "function",
        "z": "197773db.fd264c",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"36\"; //start\nmsg.end = \"36\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 370,
        "y": 400,
        "wires": [
            [
                "5b261978.39bee8"
            ]
        ]
    },
    {
        "id": "f82eb603.6d7bd8",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 360,
        "wires": []
    },
    {
        "id": "e24779be.9c36a",
        "type": "function",
        "z": "197773db.fd264c",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1000,
        "y": 400,
        "wires": [
            [
                "aa9b171d.543878"
            ]
        ]
    },
    {
        "id": "898cefa.0d8321",
        "type": "split",
        "z": "197773db.fd264c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1350,
        "y": 400,
        "wires": [
            [
                "ce7ec47a.8791b",
                "275f42e8.0bae8e"
            ]
        ]
    },
    {
        "id": "4e09795.786fa88",
        "type": "link out",
        "z": "197773db.fd264c",
        "name": "",
        "links": [
            "3d777c94.5a5424"
        ],
        "x": 2235,
        "y": 360,
        "wires": []
    },
    {
        "id": "9aa32d98.2fd998",
        "type": "function",
        "z": "197773db.fd264c",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2250,
        "y": 480,
        "wires": [
            [
                "60c7a3b7.6de52c",
                "5b261978.39bee8",
                "dc9b76ed.04c6d"
            ]
        ]
    },
    {
        "id": "60c7a3b7.6de52c",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2390,
        "y": 480,
        "wires": []
    },
    {
        "id": "fad8a615.5bb0b8",
        "type": "join",
        "z": "197773db.fd264c",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2090,
        "y": 480,
        "wires": [
            [
                "be80ae91.3ef568",
                "9aa32d98.2fd998"
            ]
        ]
    },
    {
        "id": "be80ae91.3ef568",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2310,
        "y": 400,
        "wires": []
    },
    {
        "id": "ce7ec47a.8791b",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1510,
        "y": 340,
        "wires": []
    },
    {
        "id": "275f42e8.0bae8e",
        "type": "counter",
        "z": "197773db.fd264c",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1510,
        "y": 400,
        "wires": [
            [
                "341bffcc.e151c8"
            ]
        ]
    },
    {
        "id": "341bffcc.e151c8",
        "type": "switch",
        "z": "197773db.fd264c",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1670,
        "y": 400,
        "wires": [
            [
                "9646e5a2.331c08"
            ]
        ]
    },
    {
        "id": "d7aaaf99.aaae7",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 700,
        "wires": []
    },
    {
        "id": "c9eb1bef.fc676",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 800,
        "wires": []
    },
    {
        "id": "cb54840a.ccf51",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 680,
        "wires": []
    },
    {
        "id": "8fbbb2c.7b4435",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 700,
        "wires": []
    },
    {
        "id": "9e7832e7.d83118",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 820,
        "wires": []
    },
    {
        "id": "bf84ebd2.de0b7",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1680,
        "y": 720,
        "wires": []
    },
    {
        "id": "ac6a5dcd.5cef2",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 760,
        "wires": []
    },
    {
        "id": "b52ceddb.7293e8",
        "type": "function",
        "z": "197773db.fd264c",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2100,
        "y": 400,
        "wires": [
            [
                "4e09795.786fa88"
            ]
        ]
    },
    {
        "id": "aa9b171d.543878",
        "type": "change",
        "z": "197773db.fd264c",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1180,
        "y": 400,
        "wires": [
            [
                "898cefa.0d8321",
                "a4a22589.43a4e8"
            ]
        ]
    },
    {
        "id": "a4a22589.43a4e8",
        "type": "debug",
        "z": "197773db.fd264c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1330,
        "y": 340,
        "wires": []
    },
    {
        "id": "742f8a47.1e5604",
        "type": "function",
        "z": "197773db.fd264c",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1790,
        "y": 560,
        "wires": [
            [
                "9646e5a2.331c08"
            ]
        ]
    },
    {
        "id": "9646e5a2.331c08",
        "type": "q-gate",
        "z": "197773db.fd264c",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 1930,
        "y": 400,
        "wires": [
            [
                "b52ceddb.7293e8",
                "fad8a615.5bb0b8"
            ]
        ]
    },
    {
        "id": "7c0af505.e4ad6c",
        "type": "function",
        "z": "197773db.fd264c",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1770,
        "y": 320,
        "wires": [
            [
                "9646e5a2.331c08"
            ]
        ]
    },
    {
        "id": "13605a5d.1205d6",
        "type": "inject",
        "z": "197773db.fd264c",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1810,
        "y": 260,
        "wires": [
            [
                "9646e5a2.331c08"
            ]
        ]
    },
    {
        "id": "dc9b76ed.04c6d",
        "type": "delay",
        "z": "197773db.fd264c",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2060,
        "y": 560,
        "wires": [
            [
                "742f8a47.1e5604"
            ]
        ]
    },
    {
        "id": "7a7af270.53a544",
        "type": "template",
        "z": "6c0c4da1.437604",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 250,
        "y": 760,
        "wires": [
            [
                "ef9f9d9e.f300a8",
                "60cb3c42.128e1c"
            ]
        ]
    },
    {
        "id": "ef9f9d9e.f300a8",
        "type": "exec",
        "z": "6c0c4da1.437604",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 460,
        "y": 760,
        "wires": [
            [
                "3d96601c.c0e8d8",
                "d6e7be82.c6a4c8"
            ],
            [
                "f9d61c92.c23c3"
            ],
            []
        ]
    },
    {
        "id": "3d96601c.c0e8d8",
        "type": "json",
        "z": "6c0c4da1.437604",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 630,
        "y": 760,
        "wires": [
            [
                "fac3ce97.125298"
            ]
        ]
    },
    {
        "id": "f5af76f1.a50318",
        "type": "exec",
        "z": "6c0c4da1.437604",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1490,
        "y": 760,
        "wires": [
            [
                "c5e9667f.263df",
                "872c14c9.79aad"
            ],
            [
                "60ce7a9e.367c4c"
            ],
            []
        ]
    },
    {
        "id": "aeb2e3bf.d14e4",
        "type": "template",
        "z": "6c0c4da1.437604",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1020,
        "y": 760,
        "wires": [
            [
                "13353fb0.1cc6c8",
                "7622132c.d6b8ac"
            ]
        ]
    },
    {
        "id": "13353fb0.1cc6c8",
        "type": "template",
        "z": "6c0c4da1.437604",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1260,
        "y": 760,
        "wires": [
            [
                "f5af76f1.a50318",
                "ad72a802.46f7c"
            ]
        ]
    },
    {
        "id": "fac3ce97.125298",
        "type": "function",
        "z": "6c0c4da1.437604",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 790,
        "y": 760,
        "wires": [
            [
                "aeb2e3bf.d14e4"
            ]
        ]
    },
    {
        "id": "7622132c.d6b8ac",
        "type": "template",
        "z": "6c0c4da1.437604",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1260,
        "y": 800,
        "wires": [
            [
                "70823f9f.f70d7",
                "67c9ea1b.c3aa9c"
            ]
        ]
    },
    {
        "id": "70823f9f.f70d7",
        "type": "exec",
        "z": "6c0c4da1.437604",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1490,
        "y": 800,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "b7526066.c4cc68",
        "type": "link in",
        "z": "6c0c4da1.437604",
        "name": "",
        "links": [
            "cfb0880b.e5d52"
        ],
        "x": 115,
        "y": 760,
        "wires": [
            [
                "7a7af270.53a544"
            ]
        ]
    },
    {
        "id": "4d6d257c.a5476c",
        "type": "comment",
        "z": "6c0c4da1.437604",
        "name": "Rekognition stress test",
        "info": "",
        "x": 180,
        "y": 260,
        "wires": []
    },
    {
        "id": "f2a5f827.754498",
        "type": "AWS S3",
        "z": "6c0c4da1.437604",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 630,
        "y": 220,
        "wires": [
            [
                "cb6a39d2.929b98",
                "d87d252b.636f5"
            ],
            []
        ]
    },
    {
        "id": "cb6a39d2.929b98",
        "type": "function",
        "z": "6c0c4da1.437604",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 220,
        "wires": [
            [
                "ea009a57.9411c"
            ]
        ]
    },
    {
        "id": "2346de25.7edbfa",
        "type": "template",
        "z": "6c0c4da1.437604",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 560,
        "y": 420,
        "wires": [
            [
                "9c4c05af.d8f938",
                "b056bbd2.8e3d4"
            ]
        ]
    },
    {
        "id": "40a7bd55.d5da54",
        "type": "inject",
        "z": "6c0c4da1.437604",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 250,
        "y": 420,
        "wires": [
            [
                "11693601.49224a"
            ]
        ]
    },
    {
        "id": "b056bbd2.8e3d4",
        "type": "exec",
        "z": "6c0c4da1.437604",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 710,
        "y": 420,
        "wires": [
            [
                "8044f426.6f106"
            ],
            [
                "fed8897d.9bba38"
            ],
            []
        ]
    },
    {
        "id": "9c4c05af.d8f938",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 380,
        "wires": []
    },
    {
        "id": "fed8897d.9bba38",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 380,
        "wires": []
    },
    {
        "id": "a8a286a6.332a98",
        "type": "inject",
        "z": "6c0c4da1.437604",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 440,
        "y": 220,
        "wires": [
            [
                "f2a5f827.754498"
            ]
        ]
    },
    {
        "id": "ea009a57.9411c",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 220,
        "wires": []
    },
    {
        "id": "d87d252b.636f5",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 180,
        "wires": []
    },
    {
        "id": "8044f426.6f106",
        "type": "json",
        "z": "6c0c4da1.437604",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 420,
        "wires": [
            [
                "f32076c.781a108",
                "fd08ccd6.5f02c8"
            ]
        ]
    },
    {
        "id": "11693601.49224a",
        "type": "function",
        "z": "6c0c4da1.437604",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"41\"; //start\nmsg.end = \"41\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 420,
        "wires": [
            [
                "2346de25.7edbfa"
            ]
        ]
    },
    {
        "id": "f32076c.781a108",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 380,
        "wires": []
    },
    {
        "id": "fd08ccd6.5f02c8",
        "type": "function",
        "z": "6c0c4da1.437604",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 420,
        "wires": [
            [
                "89156331.cf7488"
            ]
        ]
    },
    {
        "id": "a6870529.01b778",
        "type": "split",
        "z": "6c0c4da1.437604",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1370,
        "y": 420,
        "wires": [
            [
                "29d0b4dd.0ee5ec",
                "132b7f6e.c61089"
            ]
        ]
    },
    {
        "id": "cfb0880b.e5d52",
        "type": "link out",
        "z": "6c0c4da1.437604",
        "name": "",
        "links": [
            "b7526066.c4cc68"
        ],
        "x": 2255,
        "y": 380,
        "wires": []
    },
    {
        "id": "b41210e3.000078",
        "type": "function",
        "z": "6c0c4da1.437604",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2270,
        "y": 500,
        "wires": [
            [
                "f08cd923.03d678",
                "2346de25.7edbfa",
                "ef4588a6.55451"
            ]
        ]
    },
    {
        "id": "f08cd923.03d678",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2410,
        "y": 500,
        "wires": []
    },
    {
        "id": "8483db1a.f2854",
        "type": "join",
        "z": "6c0c4da1.437604",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2110,
        "y": 500,
        "wires": [
            [
                "a571449.4385f38",
                "b41210e3.000078"
            ]
        ]
    },
    {
        "id": "a571449.4385f38",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2330,
        "y": 420,
        "wires": []
    },
    {
        "id": "29d0b4dd.0ee5ec",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 360,
        "wires": []
    },
    {
        "id": "132b7f6e.c61089",
        "type": "counter",
        "z": "6c0c4da1.437604",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1530,
        "y": 420,
        "wires": [
            [
                "b2af2dc6.da395"
            ]
        ]
    },
    {
        "id": "b2af2dc6.da395",
        "type": "switch",
        "z": "6c0c4da1.437604",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1690,
        "y": 420,
        "wires": [
            [
                "912ae7f.7120518"
            ]
        ]
    },
    {
        "id": "d6e7be82.c6a4c8",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 720,
        "wires": []
    },
    {
        "id": "f9d61c92.c23c3",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 820,
        "wires": []
    },
    {
        "id": "60cb3c42.128e1c",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 430,
        "y": 700,
        "wires": []
    },
    {
        "id": "ad72a802.46f7c",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 720,
        "wires": []
    },
    {
        "id": "67c9ea1b.c3aa9c",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 840,
        "wires": []
    },
    {
        "id": "c5e9667f.263df",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1700,
        "y": 740,
        "wires": []
    },
    {
        "id": "60ce7a9e.367c4c",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1690,
        "y": 780,
        "wires": []
    },
    {
        "id": "d9b3c2aa.e66e3",
        "type": "function",
        "z": "6c0c4da1.437604",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2120,
        "y": 420,
        "wires": [
            [
                "cfb0880b.e5d52"
            ]
        ]
    },
    {
        "id": "89156331.cf7488",
        "type": "change",
        "z": "6c0c4da1.437604",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 420,
        "wires": [
            [
                "a6870529.01b778",
                "b8aae44f.4029"
            ]
        ]
    },
    {
        "id": "b8aae44f.4029",
        "type": "debug",
        "z": "6c0c4da1.437604",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 360,
        "wires": []
    },
    {
        "id": "872c14c9.79aad",
        "type": "function",
        "z": "6c0c4da1.437604",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1810,
        "y": 580,
        "wires": [
            [
                "912ae7f.7120518"
            ]
        ]
    },
    {
        "id": "912ae7f.7120518",
        "type": "q-gate",
        "z": "6c0c4da1.437604",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 1950,
        "y": 420,
        "wires": [
            [
                "d9b3c2aa.e66e3",
                "8483db1a.f2854"
            ]
        ]
    },
    {
        "id": "7a24d86d.e9e9a",
        "type": "function",
        "z": "6c0c4da1.437604",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1790,
        "y": 340,
        "wires": [
            [
                "912ae7f.7120518"
            ]
        ]
    },
    {
        "id": "322444ff.6eff0c",
        "type": "inject",
        "z": "6c0c4da1.437604",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1830,
        "y": 280,
        "wires": [
            [
                "912ae7f.7120518"
            ]
        ]
    },
    {
        "id": "ef4588a6.55451",
        "type": "delay",
        "z": "6c0c4da1.437604",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2080,
        "y": 580,
        "wires": [
            [
                "872c14c9.79aad"
            ]
        ]
    },
    {
        "id": "80043e22.5b4d38",
        "type": "template",
        "z": "cffa44d4.98d378",
        "name": "make index-faces",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws rekognition index-faces --image '{\"S3Object\":{\"Bucket\":\"{{bucket}}\",\"Name\":\"{{{Key}}}\"}}' --collection-id \"{{collectionID}}\" --max-faces 1 --quality-filter \"AUTO\" --detection-attributes \"ALL\" \n\n",
        "output": "str",
        "x": 270,
        "y": 760,
        "wires": [
            [
                "6f9d462d.9aa408",
                "40a9a067.0c7c48"
            ]
        ]
    },
    {
        "id": "6f9d462d.9aa408",
        "type": "exec",
        "z": "cffa44d4.98d378",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI index-faces",
        "x": 480,
        "y": 760,
        "wires": [
            [
                "f6da89f0.459558",
                "9aa41aa4.edfd08"
            ],
            [
                "7d673c9b.b77f9c"
            ],
            []
        ]
    },
    {
        "id": "f6da89f0.459558",
        "type": "json",
        "z": "cffa44d4.98d378",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 650,
        "y": 760,
        "wires": [
            [
                "89a7676b.ca147"
            ]
        ]
    },
    {
        "id": "6f785dde.5c6924",
        "type": "exec",
        "z": "cffa44d4.98d378",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1510,
        "y": 760,
        "wires": [
            [
                "6e933964.4d5a18",
                "c84bb501.577f28"
            ],
            [
                "e4a5de6c.d5ba8"
            ],
            []
        ]
    },
    {
        "id": "9256fa0c.021e3",
        "type": "template",
        "z": "cffa44d4.98d378",
        "name": "create masterlist items JSON",
        "field": "jsonNewID",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"FaceID\":{\"S\":\"{{{FaceID}}}\"},\n    \"KeyID\":{\"S\":\"{{{FaceID}}}\"},\n    \"FileName\":{\"S\":\"{{{Key}}}\"}\n}",
        "output": "str",
        "x": 1040,
        "y": 760,
        "wires": [
            [
                "32129586.cfd1e2",
                "1ba83193.ffacc6"
            ]
        ]
    },
    {
        "id": "32129586.cfd1e2",
        "type": "template",
        "z": "cffa44d4.98d378",
        "name": "make new K:F",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_k_f}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1280,
        "y": 760,
        "wires": [
            [
                "6f785dde.5c6924",
                "957181f1.336ff8"
            ]
        ]
    },
    {
        "id": "89a7676b.ca147",
        "type": "function",
        "z": "cffa44d4.98d378",
        "name": "get FaceID",
        "func": "msg.FaceID = msg.payload.FaceRecords[0].Face.FaceId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 810,
        "y": 760,
        "wires": [
            [
                "9256fa0c.021e3"
            ]
        ]
    },
    {
        "id": "1ba83193.ffacc6",
        "type": "template",
        "z": "cffa44d4.98d378",
        "name": "make new F:K",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws dynamodb put-item --table-name {{master_f_k}} --item '{{{jsonNewID}}}'\n",
        "output": "str",
        "x": 1280,
        "y": 800,
        "wires": [
            [
                "220122.6a2c4ede",
                "9f979618.98f3f8"
            ]
        ]
    },
    {
        "id": "220122.6a2c4ede",
        "type": "exec",
        "z": "cffa44d4.98d378",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "CLI update DB/ masterlist",
        "x": 1510,
        "y": 800,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "ab3ea0c4.eac338",
        "type": "link in",
        "z": "cffa44d4.98d378",
        "name": "",
        "links": [
            "5040598c.8c748"
        ],
        "x": 135,
        "y": 760,
        "wires": [
            [
                "80043e22.5b4d38"
            ]
        ]
    },
    {
        "id": "1ac07dfc.6e61aa",
        "type": "comment",
        "z": "cffa44d4.98d378",
        "name": "Rekognition stress test",
        "info": "",
        "x": 200,
        "y": 260,
        "wires": []
    },
    {
        "id": "84509a88.d4f3e",
        "type": "AWS S3",
        "z": "cffa44d4.98d378",
        "aws": "b3a5bf25.3cb76",
        "operation": "ListObjectsV2",
        "Bucket": "1m-faces",
        "Key": "",
        "UploadId": "",
        "CopySource": "",
        "Id": "",
        "Delete": "",
        "AccelerateConfiguration": "",
        "AnalyticsConfiguration": "",
        "CORSConfiguration": "",
        "ServerSideEncryptionConfiguration": "",
        "InventoryConfiguration": "",
        "BucketLoggingStatus": "",
        "MetricsConfiguration": "",
        "NotificationConfiguration": "",
        "Policy": "",
        "ReplicationConfiguration": "",
        "RequestPaymentConfiguration": "",
        "Tagging": "",
        "VersioningConfiguration": "",
        "WebsiteConfiguration": "",
        "Expression": "",
        "ExpressionType": "",
        "InputSerialization": "",
        "OutputSerialization": "",
        "PartNumber": "",
        "name": "",
        "x": 650,
        "y": 220,
        "wires": [
            [
                "101f6a5c.cc664e",
                "2917079.c2265f8"
            ],
            []
        ]
    },
    {
        "id": "101f6a5c.cc664e",
        "type": "function",
        "z": "cffa44d4.98d378",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\n\nfor (var i = 0; i < fakeimages.length; i++){\n    if (fakeimages[i].substring(0,3).parseInt() < 10){\n        list.push(fakeimages[i]);\n    }\n}\nmsg.payload = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 860,
        "y": 220,
        "wires": [
            [
                "56160125.5eb1e8"
            ]
        ]
    },
    {
        "id": "dd4a8d89.9421a8",
        "type": "template",
        "z": "cffa44d4.98d378",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "aws s3api list-objects-v2 --bucket {{bucket}} --prefix {{_prefix}}",
        "output": "str",
        "x": 580,
        "y": 420,
        "wires": [
            [
                "c4e8c90a.2d09f",
                "5818670b.9008f8"
            ]
        ]
    },
    {
        "id": "7299ca43.696c9c",
        "type": "inject",
        "z": "cffa44d4.98d378",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 270,
        "y": 420,
        "wires": [
            [
                "c2dbfc6a.bebc3"
            ]
        ]
    },
    {
        "id": "5818670b.9008f8",
        "type": "exec",
        "z": "cffa44d4.98d378",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 730,
        "y": 420,
        "wires": [
            [
                "37b4febf.eb685a"
            ],
            [
                "8776ceb.884c33"
            ],
            []
        ]
    },
    {
        "id": "c4e8c90a.2d09f",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 380,
        "wires": []
    },
    {
        "id": "8776ceb.884c33",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 380,
        "wires": []
    },
    {
        "id": "d9ca5505.df45b8",
        "type": "inject",
        "z": "cffa44d4.98d378",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 460,
        "y": 220,
        "wires": [
            [
                "84509a88.d4f3e"
            ]
        ]
    },
    {
        "id": "56160125.5eb1e8",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 220,
        "wires": []
    },
    {
        "id": "2917079.c2265f8",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 180,
        "wires": []
    },
    {
        "id": "37b4febf.eb685a",
        "type": "json",
        "z": "cffa44d4.98d378",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 870,
        "y": 420,
        "wires": [
            [
                "da242bb9.cfc3b",
                "c2be0396.46bea"
            ]
        ]
    },
    {
        "id": "c2dbfc6a.bebc3",
        "type": "function",
        "z": "cffa44d4.98d378",
        "name": "config",
        "func": "\n\nmsg.bucket = \"1m-faces\";\nmsg.collectionID = \"stress500k\";\nmsg.master_k_f = \"stress_kf_500k\";\nmsg.master_f_k = \"stress_fk_500k\";\nmsg._prefix = \"46\"; //start\nmsg.end = \"46\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 420,
        "wires": [
            [
                "dd4a8d89.9421a8"
            ]
        ]
    },
    {
        "id": "da242bb9.cfc3b",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 380,
        "wires": []
    },
    {
        "id": "c2be0396.46bea",
        "type": "function",
        "z": "cffa44d4.98d378",
        "name": "get fakeimages",
        "func": "//payload.Contents[0].Key\n//payload.Contents[0].Key\n\nvar fakeimages = msg.payload.Contents;\nvar list = [];\nvar _key = \"\";\n\nfor (var i = 0; i < fakeimages.length; i++){\n    _key = fakeimages[i].Key;\n    list.push(_key);\n}\nmsg.list = list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 420,
        "wires": [
            [
                "b0c1064b.3c9d9"
            ]
        ]
    },
    {
        "id": "67b737cb.ecbff",
        "type": "split",
        "z": "cffa44d4.98d378",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1390,
        "y": 420,
        "wires": [
            [
                "6ef1a62.53e25d8",
                "5066dddc.59dac4"
            ]
        ]
    },
    {
        "id": "5040598c.8c748",
        "type": "link out",
        "z": "cffa44d4.98d378",
        "name": "",
        "links": [
            "ab3ea0c4.eac338"
        ],
        "x": 2275,
        "y": 380,
        "wires": []
    },
    {
        "id": "cc346e89.760588",
        "type": "function",
        "z": "cffa44d4.98d378",
        "name": "loop",
        "func": "\n_pre = msg._prefix;\n_prefix = parseInt(_pre);\n_end = parseInt(msg.end);\n\n\nif (_prefix < _end){\n    _prefix++;\n    if (_prefix < 10){\n        _prefix = \"0\" + _prefix;\n        //flow.set(\"_prefix\", _prefix);\n    } else {\n        _prefix.toString();\n        //flow.set(\"_prefix\", _prefix);\n    }\n    msg._prefix = _prefix;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2290,
        "y": 500,
        "wires": [
            [
                "7073b1ef.dce43",
                "dd4a8d89.9421a8",
                "1b5346c7.e7e891"
            ]
        ]
    },
    {
        "id": "7073b1ef.dce43",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2430,
        "y": 500,
        "wires": []
    },
    {
        "id": "5cee7960.36d878",
        "type": "join",
        "z": "cffa44d4.98d378",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 2130,
        "y": 500,
        "wires": [
            [
                "55830a1.6fc8af4",
                "cc346e89.760588"
            ]
        ]
    },
    {
        "id": "55830a1.6fc8af4",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2350,
        "y": 420,
        "wires": []
    },
    {
        "id": "6ef1a62.53e25d8",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1550,
        "y": 360,
        "wires": []
    },
    {
        "id": "5066dddc.59dac4",
        "type": "counter",
        "z": "cffa44d4.98d378",
        "name": "count",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 1550,
        "y": 420,
        "wires": [
            [
                "f81c726c.403cf"
            ]
        ]
    },
    {
        "id": "f81c726c.403cf",
        "type": "switch",
        "z": "cffa44d4.98d378",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "100000",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1710,
        "y": 420,
        "wires": [
            [
                "38e7f420.f03654"
            ]
        ]
    },
    {
        "id": "9aa41aa4.edfd08",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 720,
        "wires": []
    },
    {
        "id": "7d673c9b.b77f9c",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 820,
        "wires": []
    },
    {
        "id": "40a9a067.0c7c48",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 450,
        "y": 700,
        "wires": []
    },
    {
        "id": "957181f1.336ff8",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1450,
        "y": 720,
        "wires": []
    },
    {
        "id": "9f979618.98f3f8",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1450,
        "y": 840,
        "wires": []
    },
    {
        "id": "6e933964.4d5a18",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "nextOne",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1720,
        "y": 740,
        "wires": []
    },
    {
        "id": "e4a5de6c.d5ba8",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1710,
        "y": 780,
        "wires": []
    },
    {
        "id": "43340943.3a627",
        "type": "function",
        "z": "cffa44d4.98d378",
        "name": "make Key",
        "func": "msg.Key = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2140,
        "y": 420,
        "wires": [
            [
                "5040598c.8c748"
            ]
        ]
    },
    {
        "id": "b0c1064b.3c9d9",
        "type": "change",
        "z": "cffa44d4.98d378",
        "name": "drop msg",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "list",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 420,
        "wires": [
            [
                "67b737cb.ecbff",
                "28dbb5bf.072d0a"
            ]
        ]
    },
    {
        "id": "28dbb5bf.072d0a",
        "type": "debug",
        "z": "cffa44d4.98d378",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1370,
        "y": 360,
        "wires": []
    },
    {
        "id": "c84bb501.577f28",
        "type": "function",
        "z": "cffa44d4.98d378",
        "name": "go",
        "func": "msg.payload = \"trigger\";\nmsg.topic = \"control\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1830,
        "y": 580,
        "wires": [
            [
                "38e7f420.f03654"
            ]
        ]
    },
    {
        "id": "38e7f420.f03654",
        "type": "q-gate",
        "z": "cffa44d4.98d378",
        "name": "q-gate",
        "controlTopic": "control",
        "defaultState": "queueing",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "queueCmd": "queue",
        "defaultCmd": "default",
        "triggerCmd": "trigger",
        "flushCmd": "flush",
        "resetCmd": "reset",
        "peekCmd": "",
        "dropCmd": "",
        "statusCmd": "",
        "maxQueueLength": "0",
        "keepNewest": false,
        "qToggle": false,
        "persist": false,
        "x": 1970,
        "y": 420,
        "wires": [
            [
                "43340943.3a627",
                "5cee7960.36d878"
            ]
        ]
    },
    {
        "id": "888f63a.c0e1ba",
        "type": "function",
        "z": "cffa44d4.98d378",
        "name": "queue",
        "func": "if (msg.count == 0){\n    msg.payload = \"open\";\n    msg.topic = \"control\";\n} else {\n    msg.payload = \"queue\";\n    msg.topic = \"control\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1810,
        "y": 340,
        "wires": [
            [
                "38e7f420.f03654"
            ]
        ]
    },
    {
        "id": "bf6660ca.0cce38",
        "type": "inject",
        "z": "cffa44d4.98d378",
        "name": "trigger",
        "props": [
            {
                "p": "payload",
                "v": "trigger",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "control",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "control",
        "payload": "trigger",
        "payloadType": "str",
        "x": 1850,
        "y": 280,
        "wires": [
            [
                "38e7f420.f03654"
            ]
        ]
    },
    {
        "id": "1b5346c7.e7e891",
        "type": "delay",
        "z": "cffa44d4.98d378",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2100,
        "y": 580,
        "wires": [
            [
                "c84bb501.577f28"
            ]
        ]
    },
    {
        "id": "b0711832.a74458",
        "type": "file",
        "z": "b5012ecb.7edad",
        "name": "",
        "filename": "/Users/angus/Documents/Stress test/500k_1",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 2250,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "50e2478d.93421",
        "type": "AWS DynamoDB",
        "z": "97b4d820.582a98",
        "aws": "74759f92.b837e8",
        "operation": "Scan",
        "RequestItems": "",
        "TableName": "stress_feedback",
        "BackupName": "",
        "GlobalTableName": "",
        "ReplicationGroup": "",
        "AttributeDefinitions": "",
        "KeySchema": "",
        "ProvisionedThroughput": "",
        "BackupArn": "",
        "Key": "",
        "ResourceArn": "",
        "Item": "",
        "TargetTableName": "",
        "SourceTableName": "",
        "Tags": "",
        "TagKeys": "",
        "PointInTimeRecoverySpecification": "",
        "ReplicaUpdates": "",
        "TimeToLiveSpecification": "",
        "name": "",
        "x": 660,
        "y": 1340,
        "wires": [
            [
                "a6f3e63f.f2ff"
            ],
            []
        ]
    },
    {
        "id": "d447b2fc.e0837",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "_prefix",
                "v": "00",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 450,
        "y": 1340,
        "wires": [
            [
                "50e2478d.93421"
            ]
        ]
    },
    {
        "id": "e186b3f7.9e9168",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1250,
        "y": 1300,
        "wires": []
    },
    {
        "id": "a6f3e63f.f2ff",
        "type": "json-2-csv",
        "z": "97b4d820.582a98",
        "name": "",
        "x": 970,
        "y": 1340,
        "wires": [
            [
                "e186b3f7.9e9168",
                "94ebbd76.015178"
            ]
        ]
    },
    {
        "id": "94ebbd76.015178",
        "type": "file",
        "z": "97b4d820.582a98",
        "name": "",
        "filename": "stress_test2.csv",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1380,
        "y": 1360,
        "wires": [
            [
                "db016936.02aaa"
            ]
        ]
    },
    {
        "id": "db016936.02aaa",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1550,
        "y": 1360,
        "wires": []
    },
    {
        "id": "c2227cbf.4a7ec",
        "type": "AWS Rekognition",
        "z": "97b4d820.582a98",
        "aws": "74759f92.b837e8",
        "operation": "IndexFaces",
        "SourceImage": "",
        "TargetImage": "",
        "CollectionId": "user_verification",
        "Input": "",
        "Output": "",
        "Name": "",
        "Settings": "",
        "RoleArn": "",
        "FaceIds": "",
        "Image": "",
        "Id": "",
        "JobId": "",
        "FaceId": "",
        "Video": "",
        "name": "index",
        "x": 790,
        "y": 1580,
        "wires": [
            [
                "d42c5b61.16828"
            ],
            []
        ]
    },
    {
        "id": "333c0bfa.eff504",
        "type": "jimp-image",
        "z": "97b4d820.582a98",
        "name": "",
        "data": "/Users/angus/Desktop/Unknown.jpg",
        "dataType": "str",
        "ret": "b64",
        "parameter1": "",
        "parameter1Type": "msg",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "sendPropertyType": "msg",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 470,
        "y": 1580,
        "wires": [
            [
                "65dfd796.1cf03",
                "d8a4cf9c.a82ad",
                "dc8ab0ee.e6ed58"
            ]
        ]
    },
    {
        "id": "b8e4bbc2.0c3df8",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 320,
        "y": 1580,
        "wires": [
            [
                "333c0bfa.eff504"
            ]
        ]
    },
    {
        "id": "d42c5b61.16828",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 1580,
        "wires": []
    },
    {
        "id": "65dfd796.1cf03",
        "type": "image viewer",
        "z": "97b4d820.582a98",
        "name": "",
        "width": 160,
        "data": "payload",
        "dataType": "msg",
        "x": 630,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "d8a4cf9c.a82ad",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 1540,
        "wires": []
    },
    {
        "id": "dc8ab0ee.e6ed58",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "restructure",
        "func": "var im = msg.payload.replace(\"data:image/jpeg;base64,\", \"\");\nim = new Buffer.from(im, 'base64');\n\nmsg.Image = {\n    \"Bytes\": im\n};\n\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 650,
        "y": 1580,
        "wires": [
            [
                "c2227cbf.4a7ec",
                "45899d48.76481c"
            ]
        ]
    },
    {
        "id": "45899d48.76481c",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 1620,
        "wires": []
    },
    {
        "id": "b801abb8.87d2",
        "type": "jimp-image",
        "z": "97b4d820.582a98",
        "name": "",
        "data": "payload",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "",
        "parameter1Type": "msg",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "sendPropertyType": "msg",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {},
        "x": 450,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "d014e3aa.461fa8",
        "type": "file in",
        "z": "97b4d820.582a98",
        "name": "",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 300,
        "y": 120,
        "wires": [
            [
                "b801abb8.87d2"
            ]
        ]
    },
    {
        "id": "f4dcbeae.1da998",
        "type": "inject",
        "z": "a1b2b31b.65fe7",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 100,
        "y": 380,
        "wires": [
            [
                "bfffdbf.33a8ba8"
            ]
        ]
    },
    {
        "id": "bfffdbf.33a8ba8",
        "type": "file in",
        "z": "a1b2b31b.65fe7",
        "name": "",
        "filename": "/Users/angus/Downloads/Leroy_Bay.jpg",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 360,
        "y": 380,
        "wires": [
            [
                "a9171b41.4c7bd",
                "81c7e9c8.a34e9",
                "ccc8d7ac.858b7"
            ]
        ]
    },
    {
        "id": "fbc3d89e.af2fb",
        "type": "debug",
        "z": "a1b2b31b.65fe7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 440,
        "wires": []
    },
    {
        "id": "ccc8d7ac.858b7",
        "type": "pythonshell in",
        "z": "a1b2b31b.65fe7",
        "name": "mark",
        "pyfile": "/Users/angus/Documents/mark.py",
        "virtualenv": "/Users/angus/opt/anaconda3/envs/nn",
        "continuous": false,
        "stdInData": false,
        "x": 650,
        "y": 380,
        "wires": [
            [
                "fbc3d89e.af2fb",
                "eaa28a82.365e78"
            ]
        ]
    },
    {
        "id": "81c7e9c8.a34e9",
        "type": "image viewer",
        "z": "a1b2b31b.65fe7",
        "name": "",
        "width": 160,
        "data": "payload",
        "dataType": "msg",
        "x": 410,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "a9171b41.4c7bd",
        "type": "debug",
        "z": "a1b2b31b.65fe7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 460,
        "wires": []
    },
    {
        "id": "eaa28a82.365e78",
        "type": "json",
        "z": "a1b2b31b.65fe7",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 830,
        "y": 380,
        "wires": [
            [
                "bd26a1ab.43dc78"
            ]
        ]
    },
    {
        "id": "bd26a1ab.43dc78",
        "type": "debug",
        "z": "a1b2b31b.65fe7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 440,
        "wires": []
    },
    {
        "id": "b834bb6b.27bfe",
        "type": "exec",
        "z": "a1b2b31b.65fe7",
        "command": "/Users/angus/opt/anaconda3/envs/nn/bin/python3 /Users/angus/Documents/mark.py",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 920,
        "y": 280,
        "wires": [
            [
                "6d0b758.7cad38c"
            ],
            [
                "7fd7db8e.4046a4"
            ],
            []
        ]
    },
    {
        "id": "6d0b758.7cad38c",
        "type": "debug",
        "z": "a1b2b31b.65fe7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 260,
        "wires": []
    },
    {
        "id": "7fd7db8e.4046a4",
        "type": "debug",
        "z": "a1b2b31b.65fe7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1330,
        "y": 300,
        "wires": []
    },
    {
        "id": "8d4189ad.80d4e",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "",
        "func": "msg.payload={\"storeStatus2\":[{\"mStore\":\"SW8700615\",\"db\":\"Hong Kong\",\"unmatched\":71,\"sMax\":\"2021-05-26 15:58:09.714568\"},{\"mStore\":\"SW8700201\",\"db\":\"Hong Kong\",\"unmatched\":50,\"sMax\":\"2021-05-26 10:04:25.497874\"},{\"mStore\":\"SW8700868\",\"db\":\"Hong Kong\",\"unmatched\":46,\"sMax\":\"2021-05-26 15:56:40.738322\"},{\"mStore\":\"SW8700400\",\"db\":\"Hong Kong\",\"unmatched\":39,\"sMax\":\"2021-05-26 15:37:41.964075\"},{\"mStore\":\"SW8700218\",\"db\":\"Hong Kong\",\"unmatched\":35,\"sMax\":\"2021-06-15 14:31:40.283404\"}],\"s3Dynamo\":[{\"sStore\":\"112233\",\"negative\":1,\"positive\":0,\"all_\":1,\"rate\":0,\"lower\":0},{\"sStore\":\"WA0014\",\"negative\":17,\"positive\":0,\"all_\":17,\"rate\":0,\"lower\":0},{\"sStore\":\"VMID426\",\"negative\":89,\"positive\":0,\"all_\":89,\"rate\":0,\"lower\":0},{\"sStore\":\"VMID381\",\"negative\":14,\"positive\":0,\"all_\":14,\"rate\":0,\"lower\":0},{\"sStore\":\"VMID380\",\"negative\":63,\"positive\":0,\"all_\":63,\"rate\":0,\"lower\":0}],\"mongoS3\":[{\"mStore\":\"SW8700098\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":0,\"negative\":3,\"rate\":0,\"lower\":0},{\"mStore\":\"SW8700591\",\"db\":\"Hong Kong\",\"all_\":11,\"positive\":0,\"negative\":11,\"rate\":0,\"lower\":0},{\"mStore\":\"SW8700872\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":0,\"negative\":3,\"rate\":0,\"lower\":0},{\"mStore\":\"SW8700007\",\"db\":\"Hong Kong\",\"all_\":11,\"positive\":0,\"negative\":11,\"rate\":0,\"lower\":0},{\"mStore\":\"SW8700035\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":0,\"negative\":3,\"rate\":0,\"lower\":0}]};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 460,
        "y": 1780,
        "wires": [
            [
                "7a71134e.4081c4",
                "107c6188.679246"
            ]
        ]
    },
    {
        "id": "c60929f2.616f28",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 310,
        "y": 1780,
        "wires": [
            [
                "8d4189ad.80d4e"
            ]
        ]
    },
    {
        "id": "7a71134e.4081c4",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 1680,
        "wires": []
    },
    {
        "id": "107c6188.679246",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "",
        "func": "var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\n\nmsg1.payload = msg.payload.storeStatus2;\nmsg2.payload = msg.payload.s3Dynamo;\nmsg3.payload = msg.payload.mongoS3;\n\nreturn [msg1, msg2, msg3];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 640,
        "y": 1780,
        "wires": [
            [
                "4d84933b.e913fc",
                "681142c8.517d7c"
            ],
            [
                "3ba70f5e.fb9a8",
                "53be2dbc.60a7f4"
            ],
            [
                "845e9953.fed728",
                "f1bd6922.de2e7"
            ]
        ]
    },
    {
        "id": "4d84933b.e913fc",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 1700,
        "wires": []
    },
    {
        "id": "3ba70f5e.fb9a8",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 1780,
        "wires": []
    },
    {
        "id": "845e9953.fed728",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 1860,
        "wires": []
    },
    {
        "id": "588e975f.2bf15",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 500,
        "y": 2160,
        "wires": [
            [
                "541beb20.ef86e4"
            ]
        ]
    },
    {
        "id": "541beb20.ef86e4",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "",
        "func": "a =2\np = parseInt(msg.payload);\nnode.warn(\"message payload is \" + msg.payload);\n\nout = []\n\nfor(x=0;x<4;x++){\n\t\n\tif(x==a){\n\t\tout.push({payload:p,output:x})\n\t}\n\telse{\n\t\tout.push({payload:null,output:x})\n\n\t}\n}\n\nreturn out",
        "outputs": 4,
        "noerr": 0,
        "x": 650,
        "y": 2160,
        "wires": [
            [
                "f7603811.8dce98"
            ],
            [
                "87bd304.4a77fd"
            ],
            [
                "1a51dec4.023271"
            ],
            [
                "6ce0f346.c1b394"
            ]
        ]
    },
    {
        "id": "f7603811.8dce98",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 825,
        "y": 2085,
        "wires": []
    },
    {
        "id": "87bd304.4a77fd",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 825,
        "y": 2135,
        "wires": []
    },
    {
        "id": "1a51dec4.023271",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 825,
        "y": 2185,
        "wires": []
    },
    {
        "id": "6ce0f346.c1b394",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 825,
        "y": 2235,
        "wires": []
    },
    {
        "id": "681142c8.517d7c",
        "type": "split",
        "z": "97b4d820.582a98",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 790,
        "y": 1740,
        "wires": [
            [
                "81ead75e.506658"
            ]
        ]
    },
    {
        "id": "81ead75e.506658",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 1720,
        "wires": []
    },
    {
        "id": "53be2dbc.60a7f4",
        "type": "split",
        "z": "97b4d820.582a98",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 790,
        "y": 1820,
        "wires": [
            [
                "87d43b33.073da"
            ]
        ]
    },
    {
        "id": "87d43b33.073da",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 1800,
        "wires": []
    },
    {
        "id": "f1bd6922.de2e7",
        "type": "split",
        "z": "97b4d820.582a98",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 790,
        "y": 1900,
        "wires": [
            [
                "c6d7ca62.8ef7e8"
            ]
        ]
    },
    {
        "id": "c6d7ca62.8ef7e8",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 1920,
        "wires": []
    },
    {
        "id": "5463e0aa.28bf4",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "",
        "func": "msg={\"_msgid\":\"49f62165.85054\",\"payload\":{\"storeStatus2\":[{\"mStore\":\"HA0573\",\"db\":\"Hong Kong\",\"unmatched\":224,\"dMax\":\"2021-06-17 18:09:24.403327\"},{\"mStore\":\"WA0099\",\"db\":\"Hong Kong\",\"unmatched\":49,\"dMax\":\"2021-06-25 10:12:12.457571\"},{\"mStore\":\"HA0551\",\"db\":\"Hong Kong\",\"unmatched\":37,\"dMax\":\"2021-07-04 12:14:55.643503\"},{\"mStore\":\"HA0057\",\"db\":\"Hong Kong\",\"unmatched\":20,\"dMax\":\"2021-06-18 11:10:23.374466\"},{\"mStore\":\"VMID423\",\"db\":\"Singapore\",\"unmatched\":19,\"dMax\":\"2021-06-23 10:56:54.305066\"},{\"mStore\":\"HA0392\",\"db\":\"Hong Kong\",\"unmatched\":19,\"dMax\":\"2021-05-11 14:19:34.211067\"},{\"mStore\":\"VMID319\",\"db\":\"Singapore\",\"unmatched\":16,\"dMax\":\"2021-06-29 09:15:09.104997\"},{\"mStore\":\"HA0299\",\"db\":\"Hong Kong\",\"unmatched\":10,\"dMax\":\"2021-06-25 17:46:40.835382\"},{\"mStore\":\"WA0007\",\"db\":\"Hong Kong\",\"unmatched\":7,\"dMax\":\"2021-06-07 18:08:51.886438\"},{\"mStore\":\"RW0133\",\"db\":\"Hong Kong\",\"unmatched\":6,\"dMax\":\"2021-07-03 17:18:34.247531\"},{\"mStore\":\"SW87375\",\"db\":\"Hong Kong\",\"unmatched\":5,\"dMax\":\"2021-07-03 02:16:07.574079\"},{\"mStore\":\"SW8700205\",\"db\":\"Hong Kong\",\"unmatched\":5,\"dMax\":\"2021-04-06 00:20:39.866703\"},{\"mStore\":\"WA0038\",\"db\":\"Hong Kong\",\"unmatched\":4,\"dMax\":\"2021-07-05 08:48:36.012991\"},{\"mStore\":\"SW8700916\",\"db\":\"Hong Kong\",\"unmatched\":4,\"dMax\":\"2021-07-02 13:45:24.063100\"},{\"mStore\":\"HA0472\",\"db\":\"Hong Kong\",\"unmatched\":3,\"dMax\":\"2021-07-05 11:58:16.312483\"},{\"mStore\":\"WA0008\",\"db\":\"Hong Kong\",\"unmatched\":3,\"dMax\":\"2021-07-05 10:24:08.440894\"},{\"mStore\":\"MYID028\",\"db\":\"Malaysia\",\"unmatched\":3,\"dMax\":\"2021-07-05 08:01:53.855052\"},{\"mStore\":\"SW8700914\",\"db\":\"Hong Kong\",\"unmatched\":3,\"dMax\":\"2021-07-03 18:18:52.781060\"},{\"mStore\":\"WA0039\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 11:49:10.992981\"},{\"mStore\":\"SW8700615\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 11:45:47.048117\"},{\"mStore\":\"SW8700591\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 11:34:43.964900\"},{\"mStore\":\"SW8703012\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 11:12:34.974533\"},{\"mStore\":\"HA0303\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 11:04:31.713718\"},{\"mStore\":\"SW8700921\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 10:31:46.927007\"},{\"mStore\":\"HA0200\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 10:05:34.324420\"},{\"mStore\":\"SW8700143\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 04:58:16.579947\"},{\"mStore\":\"HA0589\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 03:25:13.668141\"},{\"mStore\":\"SW8700080\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-05 01:51:02.635386\"},{\"mStore\":\"HA0591\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-04 19:13:22.204116\"},{\"mStore\":\"HA0136\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-04 18:53:41.629091\"},{\"mStore\":\"HA0412\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-04 16:45:05.483458\"},{\"mStore\":\"SW8700110\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-04 12:25:57.659708\"},{\"mStore\":\"SW8700913\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2021-07-03 07:54:55.014312\"},{\"mStore\":\"SW87509\",\"db\":\"Hong Kong\",\"unmatched\":22,\"dMax\":\"2020-12-08 11:46:04.240341\"},{\"mStore\":\"SW8700872\",\"db\":\"Hong Kong\",\"unmatched\":18,\"dMax\":\"2021-05-21 11:57:20.511746\"},{\"mStore\":\"SW87601\",\"db\":\"Hong Kong\",\"unmatched\":13,\"dMax\":\"2020-12-07 13:53:10.596548\"},{\"mStore\":\"SW8700150\",\"db\":\"Hong Kong\",\"unmatched\":12,\"dMax\":\"2020-12-16 09:31:34.237700\"},{\"mStore\":\"SW8700363\",\"db\":\"Hong Kong\",\"unmatched\":11,\"dMax\":\"2020-10-24 13:58:30.260801\"},{\"mStore\":\"SW8700054\",\"db\":\"Hong Kong\",\"unmatched\":8,\"dMax\":\"2021-04-08 10:18:42.829908\"},{\"mStore\":\"SW87935\",\"db\":\"Hong Kong\",\"unmatched\":7,\"dMax\":\"2020-12-08 11:41:40.237024\"},{\"mStore\":\"SW87908\",\"db\":\"Hong Kong\",\"unmatched\":2,\"dMax\":\"2020-11-28 14:15:01.677583\"},{\"mStore\":\"HA0370\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:59:30.813348\"},{\"mStore\":\"HA0348\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:59:19.955896\"},{\"mStore\":\"HA0518\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:58:32.173435\"},{\"mStore\":\"HA0167\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:58:14.523059\"},{\"mStore\":\"SW8700414\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:56:53.382878\"},{\"mStore\":\"SW8700797\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:56:21.126630\"},{\"mStore\":\"SW87937\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:55:57.368169\"},{\"mStore\":\"HA0578\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:55:39.148044\"},{\"mStore\":\"HA0606\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:52:19.981968\"},{\"mStore\":\"HA0222\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:51:55.585349\"},{\"mStore\":\"HA0319\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:51:40.652960\"},{\"mStore\":\"HA0365\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:50:43.317391\"},{\"mStore\":\"HA0273\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:49:37.293141\"},{\"mStore\":\"SW87450\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:48:41.209184\"},{\"mStore\":\"HA0318\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:46:35.778523\"},{\"mStore\":\"WA0095\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:45:23.011875\"},{\"mStore\":\"HA0577\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:42:36.778538\"},{\"mStore\":\"HA0326\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:41:06.680311\"},{\"mStore\":\"SW87914\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:41:05.783663\"},{\"mStore\":\"SW8700684\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:41:04.925247\"},{\"mStore\":\"HA0542\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:39:41.298549\"},{\"mStore\":\"HA0490\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:39:08.568870\"},{\"mStore\":\"HA0242\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:35:44.142524\"},{\"mStore\":\"WA0040\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:35:03.830169\"},{\"mStore\":\"SW87559\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:33:03.099157\"},{\"mStore\":\"WA0078\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:32:41.624506\"},{\"mStore\":\"HA0309\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:31:34.499493\"},{\"mStore\":\"SW8700892\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:31:31.957083\"},{\"mStore\":\"HA0516\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:30:09.325519\"},{\"mStore\":\"HA0063\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:29:28.676428\"},{\"mStore\":\"SW87542\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:26:40.538797\"},{\"mStore\":\"HA0569\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:25:55.877637\"},{\"mStore\":\"VMID398\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:24:11.818930\"},{\"mStore\":\"HA0590\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:20:34.923537\"},{\"mStore\":\"VMID145\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:20:08.664156\"},{\"mStore\":\"SW8700868\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:18:03.352136\"},{\"mStore\":\"HA0317\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:07:58.945867\"},{\"mStore\":\"SW8700185\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:06:07.787246\"},{\"mStore\":\"SW87621\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 11:01:14.810188\"},{\"mStore\":\"HA0614\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 10:55:28.398289\"},{\"mStore\":\"HA0510\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 10:51:12.440469\"},{\"mStore\":\"HA0218\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 10:50:44.724993\"},{\"mStore\":\"HA0495\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 10:50:18.411218\"},{\"mStore\":\"VMID401\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-05 10:27:23.852223\"},{\"mStore\":\"HA0154\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 10:16:18.119238\"},{\"mStore\":\"SW8700550\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 10:14:37.509627\"},{\"mStore\":\"HA0155\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 10:07:58.430134\"},{\"mStore\":\"SW87897\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 10:04:18.104409\"},{\"mStore\":\"HA0456\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 09:57:55.422142\"},{\"mStore\":\"HA0465\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 09:57:06.089041\"},{\"mStore\":\"HA0393\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 09:51:12.262904\"},{\"mStore\":\"HA0564\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 09:49:29.773026\"},{\"mStore\":\"VMID429\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-05 09:19:47.389116\"},{\"mStore\":\"SW8700201\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 09:17:50.261666\"},{\"mStore\":\"VMID433\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-05 09:10:44.933049\"},{\"mStore\":\"SW87600\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 09:10:27.343691\"},{\"mStore\":\"SW8700218\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 09:04:58.264079\"},{\"mStore\":\"HA0489\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:56:30.124137\"},{\"mStore\":\"SW8700007\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:53:16.707738\"},{\"mStore\":\"HA0268\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:39:36.177078\"},{\"mStore\":\"VMID400\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:37:29.366117\"},{\"mStore\":\"SW8700671\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:35:21.273738\"},{\"mStore\":\"SW8700489\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:32:16.230868\"},{\"mStore\":\"VMID397\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:30:07.758998\"},{\"mStore\":\"SW87852\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:26:13.554971\"},{\"mStore\":\"SW87694\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:19:58.834428\"},{\"mStore\":\"SW8700802\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 08:07:48.864371\"},{\"mStore\":\"VMID426\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-05 07:58:14.964218\"},{\"mStore\":\"SW8702573\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 07:58:07.275141\"},{\"mStore\":\"VMID399\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-05 07:40:57.644622\"},{\"mStore\":\"HA0588\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 04:54:54.555606\"},{\"mStore\":\"HA0566\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 02:23:19.044767\"},{\"mStore\":\"HA0565\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 02:22:55.207022\"},{\"mStore\":\"SW8700126\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 02:07:25.857022\"},{\"mStore\":\"SW8700581\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 00:10:34.860328\"},{\"mStore\":\"SW8700686\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-05 00:00:58.348738\"},{\"mStore\":\"SW87730\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 23:27:12.729734\"},{\"mStore\":\"HA0521\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 22:07:59.410645\"},{\"mStore\":\"HA0118\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 20:09:30.317177\"},{\"mStore\":\"SW8700625\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 19:17:16.132420\"},{\"mStore\":\"SW8700235\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 19:13:26.552733\"},{\"mStore\":\"SW8700240\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 18:15:02.024187\"},{\"mStore\":\"SW8700891\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 17:50:54.089981\"},{\"mStore\":\"SW8700813\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 17:19:53.505564\"},{\"mStore\":\"SW8700190\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 15:39:45.943683\"},{\"mStore\":\"SW87487\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-04 14:46:23.778842\"},{\"mStore\":\"VMID317\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-03 17:31:34.539635\"},{\"mStore\":\"VMID332\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-03 12:38:20.278285\"},{\"mStore\":\"WA0074\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-02 19:44:09.560271\"},{\"mStore\":\"SW8700727\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-02 19:39:55.541022\"},{\"mStore\":\"VMID428\",\"db\":\"Singapore\",\"unmatched\":1,\"dMax\":\"2021-07-02 16:25:48.974681\"},{\"mStore\":\"SW8700216\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-02 15:59:39.853456\"},{\"mStore\":\"SW8700425\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-07-01 18:46:11.558334\"},{\"mStore\":\"SW8700108\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-06-30 20:57:44.164723\"},{\"mStore\":\"SW8700728\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-06-30 19:53:04.646236\"},{\"mStore\":\"SW8700890\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2021-06-29 18:07:13.011571\"},{\"mStore\":\"SW8700431\",\"db\":\"Hong Kong\",\"unmatched\":1,\"dMax\":\"2020-10-27 14:41:38.428038\"},{\"mStore\":\"SW8700811\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:54:51.245289\"},{\"mStore\":\"RW0134\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:54:28.176889\"},{\"mStore\":\"HA0467\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:49:04.341452\"},{\"mStore\":\"WA0122\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:47:15.237128\"},{\"mStore\":\"HA0525\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:40:02.469453\"},{\"mStore\":\"RW0115\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:37:23.284396\"},{\"mStore\":\"SW8700207\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:35:53.763964\"},{\"mStore\":\"HA0188\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:28:46.486824\"},{\"mStore\":\"HA0231\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:22:25.084794\"},{\"mStore\":\"SW8700199\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:19:09.321268\"},{\"mStore\":\"RW0132\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:13:35.642810\"},{\"mStore\":\"HA0219\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 11:10:28.929017\"},{\"mStore\":\"HA0572\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 10:35:42.490135\"},{\"mStore\":\"HA0545\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 10:11:06.094467\"},{\"mStore\":\"HA0557\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 10:07:08.102680\"},{\"mStore\":\"HA0070\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 10:06:43.385325\"},{\"mStore\":\"RW0109\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 09:51:12.449904\"},{\"mStore\":\"SW8700475\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 09:44:50.877914\"},{\"mStore\":\"VMID281\",\"db\":\"Singapore\",\"unmatched\":0,\"dMax\":\"2021-07-05 08:56:56.179810\"},{\"mStore\":\"RW0114\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 08:52:09.393346\"},{\"mStore\":\"RW0054\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 08:35:00.145555\"},{\"mStore\":\"SW8700225\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 07:43:13.612950\"},{\"mStore\":\"HA0455\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 07:12:10.813295\"},{\"mStore\":\"HA0187\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 06:35:23.973717\"},{\"mStore\":\"SW87092\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 04:24:52.165221\"},{\"mStore\":\"RW0106\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-05 00:25:16.305928\"},{\"mStore\":\"SW87677\",\"db\":\"Hong Kong\",\"unmatched\":0,\"dMax\":\"2021-07-04 23:57:48.098746\"},{\"mStore\":\"VMID427\",\"db\":\"Singapore\",\"unmatched\":0,\"dMax\":\"2021-07-04 19:54:21.446045\"}],\"s3Dynamo\":[{\"sStore\":\"EDDY-TEST\",\"negative\":36,\"positive\":0,\"all_\":36,\"rate\":0,\"lower\":0},{\"sStore\":\"HA0999\",\"negative\":9,\"positive\":0,\"all_\":9,\"rate\":0,\"lower\":0},{\"sStore\":\"HAJIMMY001\",\"negative\":80,\"positive\":0,\"all_\":80,\"rate\":0,\"lower\":0},{\"sStore\":\"LEO-TES\",\"negative\":9,\"positive\":0,\"all_\":9,\"rate\":0,\"lower\":0},{\"sStore\":\"NV0888\",\"negative\":21,\"positive\":0,\"all_\":21,\"rate\":0,\"lower\":0},{\"sStore\":\"HA0499\",\"negative\":8,\"positive\":0,\"all_\":8,\"rate\":0,\"lower\":0},{\"sStore\":\"NV0999\",\"negative\":14,\"positive\":0,\"all_\":14,\"rate\":0,\"lower\":0},{\"sStore\":\"HA0392\",\"negative\":25058,\"positive\":0,\"all_\":25058,\"rate\":0,\"lower\":0},{\"sStore\":\"VMID377\",\"negative\":9,\"positive\":0,\"all_\":9,\"rate\":0,\"lower\":0},{\"sStore\":\"HA0299\",\"negative\":31,\"positive\":0,\"all_\":31,\"rate\":0,\"lower\":0},{\"sStore\":\"VMID380\",\"negative\":13,\"positive\":0,\"all_\":13,\"rate\":0,\"lower\":0},{\"sStore\":\"VMID381\",\"negative\":7,\"positive\":0,\"all_\":7,\"rate\":0,\"lower\":0},{\"sStore\":\"HA0573\",\"negative\":575,\"positive\":0,\"all_\":575,\"rate\":0,\"lower\":0},{\"sStore\":\"HA0145\",\"negative\":21,\"positive\":0,\"all_\":21,\"rate\":0,\"lower\":0},{\"sStore\":\"HA0149\",\"negative\":1,\"positive\":0,\"all_\":1,\"rate\":0,\"lower\":0},{\"sStore\":\"WA0014\",\"negative\":12,\"positive\":0,\"all_\":12,\"rate\":0,\"lower\":0},{\"sStore\":\"VMID428\",\"negative\":8,\"positive\":0,\"all_\":8,\"rate\":0,\"lower\":0},{\"sStore\":\"WA0074\",\"negative\":7,\"positive\":0,\"all_\":7,\"rate\":0,\"lower\":0},{\"sStore\":\"RW0133\",\"negative\":325,\"positive\":5,\"all_\":330,\"rate\":0.015,\"lower\":0.006},{\"sStore\":\"VMID379\",\"negative\":16,\"positive\":1,\"all_\":17,\"rate\":0.059,\"lower\":0.01},{\"sStore\":\"HA0551\",\"negative\":5280,\"positive\":99,\"all_\":5379,\"rate\":0.018,\"lower\":0.015},{\"sStore\":\"HA0489\",\"negative\":27,\"positive\":2,\"all_\":29,\"rate\":0.069,\"lower\":0.019},{\"sStore\":\"RW0132\",\"negative\":513,\"positive\":22,\"all_\":535,\"rate\":0.041,\"lower\":0.027},{\"sStore\":\"VMID426\",\"negative\":176,\"positive\":12,\"all_\":188,\"rate\":0.064,\"lower\":0.037},{\"sStore\":\"WA0095\",\"negative\":66,\"positive\":8,\"all_\":74,\"rate\":0.108,\"lower\":0.056},{\"sStore\":\"VMID427\",\"negative\":84,\"positive\":10,\"all_\":94,\"rate\":0.106,\"lower\":0.059},{\"sStore\":\"VMID332\",\"negative\":2,\"positive\":1,\"all_\":3,\"rate\":0.333,\"lower\":0.061},{\"sStore\":\"RW0115\",\"negative\":233,\"positive\":24,\"all_\":257,\"rate\":0.093,\"lower\":0.064},{\"sStore\":\"HA0564\",\"negative\":20,\"positive\":4,\"all_\":24,\"rate\":0.167,\"lower\":0.067},{\"sStore\":\"WA0040\",\"negative\":6,\"positive\":2,\"all_\":8,\"rate\":0.25,\"lower\":0.071},{\"sStore\":\"VMID378\",\"negative\":6,\"positive\":2,\"all_\":8,\"rate\":0.25,\"lower\":0.071},{\"sStore\":\"HA0200\",\"negative\":151,\"positive\":20,\"all_\":171,\"rate\":0.117,\"lower\":0.077},{\"sStore\":\"RW0134\",\"negative\":85,\"positive\":13,\"all_\":98,\"rate\":0.133,\"lower\":0.079},{\"sStore\":\"RW0110\",\"negative\":282,\"positive\":35,\"all_\":317,\"rate\":0.11,\"lower\":0.08},{\"sStore\":\"HA0309\",\"negative\":119,\"positive\":20,\"all_\":139,\"rate\":0.144,\"lower\":0.095},{\"sStore\":\"HA0510\",\"negative\":146,\"positive\":25,\"all_\":171,\"rate\":0.146,\"lower\":0.101},{\"sStore\":\"HA0525\",\"negative\":33,\"positive\":8,\"all_\":41,\"rate\":0.195,\"lower\":0.102},{\"sStore\":\"HA0365\",\"negative\":27,\"positive\":7,\"all_\":34,\"rate\":0.206,\"lower\":0.103},{\"sStore\":\"HA0268\",\"negative\":497,\"positive\":84,\"all_\":581,\"rate\":0.145,\"lower\":0.118},{\"sStore\":\"RW0114\",\"negative\":6,\"positive\":3,\"all_\":9,\"rate\":0.333,\"lower\":0.121},{\"sStore\":\"HA0557\",\"negative\":100,\"positive\":22,\"all_\":122,\"rate\":0.18,\"lower\":0.122},{\"sStore\":\"WA0038\",\"negative\":16,\"positive\":6,\"all_\":22,\"rate\":0.273,\"lower\":0.132},{\"sStore\":\"HA0490\",\"negative\":12,\"positive\":5,\"all_\":17,\"rate\":0.294,\"lower\":0.133},{\"sStore\":\"HA0231\",\"negative\":626,\"positive\":117,\"all_\":743,\"rate\":0.157,\"lower\":0.133},{\"sStore\":\"HA0614\",\"negative\":37,\"positive\":11,\"all_\":48,\"rate\":0.229,\"lower\":0.133},{\"sStore\":\"VMID397\",\"negative\":95,\"positive\":23,\"all_\":118,\"rate\":0.195,\"lower\":0.134},{\"sStore\":\"HA0348\",\"negative\":119,\"positive\":28,\"all_\":147,\"rate\":0.19,\"lower\":0.135},{\"sStore\":\"HA0136\",\"negative\":124,\"positive\":30,\"all_\":154,\"rate\":0.195,\"lower\":0.14},{\"sStore\":\"HA0063\",\"negative\":18,\"positive\":7,\"all_\":25,\"rate\":0.28,\"lower\":0.143},{\"sStore\":\"VMID429\",\"negative\":2,\"positive\":2,\"all_\":4,\"rate\":0.5,\"lower\":0.15},{\"sStore\":\"HA0393\",\"negative\":10,\"positive\":5,\"all_\":15,\"rate\":0.333,\"lower\":0.152},{\"sStore\":\"HA0545\",\"negative\":7,\"positive\":4,\"all_\":11,\"rate\":0.364,\"lower\":0.152},{\"sStore\":\"HA0273\",\"negative\":73,\"positive\":22,\"all_\":95,\"rate\":0.232,\"lower\":0.158},{\"sStore\":\"RW0054\",\"negative\":149,\"positive\":40,\"all_\":189,\"rate\":0.212,\"lower\":0.159},{\"sStore\":\"HA0465\",\"negative\":48,\"positive\":16,\"all_\":64,\"rate\":0.25,\"lower\":0.16},{\"sStore\":\"VMID317\",\"negative\":10,\"positive\":6,\"all_\":16,\"rate\":0.375,\"lower\":0.185},{\"sStore\":\"HA0569\",\"negative\":3,\"positive\":3,\"all_\":6,\"rate\":0.5,\"lower\":0.188},{\"sStore\":\"HA0317\",\"negative\":61,\"positive\":23,\"all_\":84,\"rate\":0.274,\"lower\":0.19},{\"sStore\":\"HA0242\",\"negative\":525,\"positive\":149,\"all_\":674,\"rate\":0.221,\"lower\":0.191},{\"sStore\":\"HA0303\",\"negative\":234,\"positive\":72,\"all_\":306,\"rate\":0.235,\"lower\":0.191},{\"sStore\":\"HA0467\",\"negative\":26,\"positive\":12,\"all_\":38,\"rate\":0.316,\"lower\":0.191},{\"sStore\":\"WA0039\",\"negative\":26,\"positive\":12,\"all_\":38,\"rate\":0.316,\"lower\":0.191},{\"sStore\":\"RW0109\",\"negative\":86,\"positive\":31,\"all_\":117,\"rate\":0.265,\"lower\":0.193},{\"sStore\":\"HA0155\",\"negative\":7,\"positive\":5,\"all_\":12,\"rate\":0.417,\"lower\":0.193},{\"sStore\":\"HA0516\",\"negative\":36,\"positive\":16,\"all_\":52,\"rate\":0.308,\"lower\":0.199},{\"sStore\":\"MYID028\",\"negative\":11,\"positive\":7,\"all_\":18,\"rate\":0.389,\"lower\":0.203},{\"sStore\":\"VMID401\",\"negative\":26,\"positive\":13,\"all_\":39,\"rate\":0.333,\"lower\":0.206},{\"sStore\":\"HA0188\",\"negative\":43,\"positive\":19,\"all_\":62,\"rate\":0.306,\"lower\":0.206},{\"sStore\":\"HA0222\",\"negative\":447,\"positive\":145,\"all_\":592,\"rate\":0.245,\"lower\":0.212},{\"sStore\":\"RW0108\",\"negative\":30,\"positive\":15,\"all_\":45,\"rate\":0.333,\"lower\":0.214},{\"sStore\":\"HA0318\",\"negative\":22,\"positive\":12,\"all_\":34,\"rate\":0.353,\"lower\":0.215},{\"sStore\":\"HA0577\",\"negative\":25,\"positive\":14,\"all_\":39,\"rate\":0.359,\"lower\":0.227},{\"sStore\":\"RW0107\",\"negative\":50,\"positive\":24,\"all_\":74,\"rate\":0.324,\"lower\":0.229},{\"sStore\":\"HA0589\",\"negative\":46,\"positive\":23,\"all_\":69,\"rate\":0.333,\"lower\":0.234},{\"sStore\":\"HA0326\",\"negative\":66,\"positive\":31,\"all_\":97,\"rate\":0.32,\"lower\":0.235},{\"sStore\":\"HA0370\",\"negative\":43,\"positive\":23,\"all_\":66,\"rate\":0.348,\"lower\":0.245},{\"sStore\":\"WA0008\",\"negative\":18,\"positive\":12,\"all_\":30,\"rate\":0.4,\"lower\":0.246},{\"sStore\":\"VMID433\",\"negative\":11,\"positive\":9,\"all_\":20,\"rate\":0.45,\"lower\":0.258},{\"sStore\":\"VMID145\",\"negative\":7,\"positive\":7,\"all_\":14,\"rate\":0.5,\"lower\":0.268},{\"sStore\":\"HA0070\",\"negative\":72,\"positive\":40,\"all_\":112,\"rate\":0.357,\"lower\":0.274},{\"sStore\":\"HA0572\",\"negative\":538,\"positive\":238,\"all_\":776,\"rate\":0.307,\"lower\":0.275},{\"sStore\":\"HA0518\",\"negative\":67,\"positive\":42,\"all_\":109,\"rate\":0.385,\"lower\":0.299},{\"sStore\":\"HA0271\",\"negative\":2,\"positive\":4,\"all_\":6,\"rate\":0.667,\"lower\":0.3},{\"sStore\":\"HA0167\",\"negative\":128,\"positive\":74,\"all_\":202,\"rate\":0.366,\"lower\":0.303},{\"sStore\":\"HA0187\",\"negative\":77,\"positive\":50,\"all_\":127,\"rate\":0.394,\"lower\":0.313},{\"sStore\":\"HA0565\",\"negative\":17,\"positive\":16,\"all_\":33,\"rate\":0.485,\"lower\":0.325},{\"sStore\":\"WA0097\",\"negative\":153,\"positive\":99,\"all_\":252,\"rate\":0.393,\"lower\":0.335},{\"sStore\":\"HA0154\",\"negative\":0,\"positive\":2,\"all_\":2,\"rate\":1,\"lower\":0.342},{\"sStore\":\"HA0588\",\"negative\":90,\"positive\":66,\"all_\":156,\"rate\":0.423,\"lower\":0.348},{\"sStore\":\"VMID399\",\"negative\":30,\"positive\":27,\"all_\":57,\"rate\":0.474,\"lower\":0.35},{\"sStore\":\"HA0578\",\"negative\":35,\"positive\":34,\"all_\":69,\"rate\":0.493,\"lower\":0.378},{\"sStore\":\"WA0078\",\"negative\":123,\"positive\":98,\"all_\":221,\"rate\":0.443,\"lower\":0.379},{\"sStore\":\"HA0606\",\"negative\":16,\"positive\":19,\"all_\":35,\"rate\":0.543,\"lower\":0.382},{\"sStore\":\"HA0319\",\"negative\":19,\"positive\":22,\"all_\":41,\"rate\":0.537,\"lower\":0.387},{\"sStore\":\"HA0186\",\"negative\":157,\"positive\":126,\"all_\":283,\"rate\":0.445,\"lower\":0.388},{\"sStore\":\"VMID400\",\"negative\":22,\"positive\":25,\"all_\":47,\"rate\":0.532,\"lower\":0.392},{\"sStore\":\"HA0590\",\"negative\":356,\"positive\":284,\"all_\":640,\"rate\":0.444,\"lower\":0.406},{\"sStore\":\"HA0219\",\"negative\":95,\"positive\":92,\"all_\":187,\"rate\":0.492,\"lower\":0.421},{\"sStore\":\"HA0472\",\"negative\":60,\"positive\":62,\"all_\":122,\"rate\":0.508,\"lower\":0.421},{\"sStore\":\"HA0412\",\"negative\":10,\"positive\":16,\"all_\":26,\"rate\":0.615,\"lower\":0.425},{\"sStore\":\"HA0566\",\"negative\":17,\"positive\":24,\"all_\":41,\"rate\":0.585,\"lower\":0.434},{\"sStore\":\"HA0570\",\"negative\":1,\"positive\":5,\"all_\":6,\"rate\":0.833,\"lower\":0.436},{\"sStore\":\"HA0521\",\"negative\":48,\"positive\":57,\"all_\":105,\"rate\":0.543,\"lower\":0.448},{\"sStore\":\"HA0542\",\"negative\":6,\"positive\":13,\"all_\":19,\"rate\":0.684,\"lower\":0.46},{\"sStore\":\"VMID281\",\"negative\":31,\"positive\":45,\"all_\":76,\"rate\":0.592,\"lower\":0.48},{\"sStore\":\"HA0591\",\"negative\":217,\"positive\":248,\"all_\":465,\"rate\":0.533,\"lower\":0.488},{\"sStore\":\"HA0455\",\"negative\":19,\"positive\":36,\"all_\":55,\"rate\":0.655,\"lower\":0.523},{\"sStore\":\"HA0118\",\"negative\":3,\"positive\":12,\"all_\":15,\"rate\":0.8,\"lower\":0.548},{\"sStore\":\"HA0218\",\"negative\":3,\"positive\":12,\"all_\":15,\"rate\":0.8,\"lower\":0.548},{\"sStore\":\"VMID398\",\"negative\":20,\"positive\":42,\"all_\":62,\"rate\":0.677,\"lower\":0.554},{\"sStore\":\"WA0122\",\"negative\":31,\"positive\":64,\"all_\":95,\"rate\":0.674,\"lower\":0.574},{\"sStore\":\"RW0106\",\"negative\":35,\"positive\":90,\"all_\":125,\"rate\":0.72,\"lower\":0.636},{\"sStore\":\"HA0456\",\"negative\":33,\"positive\":93,\"all_\":126,\"rate\":0.738,\"lower\":0.655},{\"sStore\":\"HA0495\",\"negative\":20,\"positive\":67,\"all_\":87,\"rate\":0.77,\"lower\":0.671}],\"mongoS3\":[{\"mStore\":\"SW8700363\",\"db\":\"Hong Kong\",\"all_\":11,\"positive\":0,\"negative\":11,\"rate\":0,\"lower\":0},{\"mStore\":\"WA0099\",\"db\":\"Hong Kong\",\"all_\":49,\"positive\":0,\"negative\":49,\"rate\":0,\"lower\":0},{\"mStore\":\"SW8700150\",\"db\":\"Hong Kong\",\"all_\":12,\"positive\":0,\"negative\":12,\"rate\":0,\"lower\":0},{\"mStore\":\"SW87601\",\"db\":\"Hong Kong\",\"all_\":13,\"positive\":0,\"negative\":13,\"rate\":0,\"lower\":0},{\"mStore\":\"SW87509\",\"db\":\"Hong Kong\",\"all_\":22,\"positive\":0,\"negative\":22,\"rate\":0,\"lower\":0},{\"mStore\":\"HA0573\",\"db\":\"Hong Kong\",\"all_\":224,\"positive\":0,\"negative\":224,\"rate\":0,\"lower\":1.7054745868129647e-18},{\"mStore\":\"VMID319\",\"db\":\"Singapore\",\"all_\":16,\"positive\":0,\"negative\":16,\"rate\":0,\"lower\":1.1190861872280023e-17},{\"mStore\":\"SW8700872\",\"db\":\"Hong Kong\",\"all_\":18,\"positive\":0,\"negative\":18,\"rate\":0,\"lower\":1.143689933615945e-17},{\"mStore\":\"VMID423\",\"db\":\"Singapore\",\"all_\":19,\"positive\":0,\"negative\":19,\"rate\":0,\"lower\":1.1543760872639163e-17},{\"mStore\":\"HA0392\",\"db\":\"Hong Kong\",\"all_\":19,\"positive\":0,\"negative\":19,\"rate\":0,\"lower\":1.1543760872639163e-17},{\"mStore\":\"HA0057\",\"db\":\"Hong Kong\",\"all_\":20,\"positive\":0,\"negative\":20,\"rate\":0,\"lower\":1.1641658116749259e-17},{\"mStore\":\"SW8700054\",\"db\":\"Hong Kong\",\"all_\":8,\"positive\":0,\"negative\":8,\"rate\":0,\"lower\":1.875123335740367e-17},{\"mStore\":\"HA0299\",\"db\":\"Hong Kong\",\"all_\":10,\"positive\":0,\"negative\":10,\"rate\":0,\"lower\":2.0052288475052677e-17},{\"mStore\":\"SW8700916\",\"db\":\"Hong Kong\",\"all_\":4,\"positive\":0,\"negative\":4,\"rate\":0,\"lower\":2.8316237110415135e-17},{\"mStore\":\"VMID317\",\"db\":\"Singapore\",\"all_\":5,\"positive\":0,\"negative\":5,\"rate\":0,\"lower\":3.1392028157379784e-17},{\"mStore\":\"SW8700205\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":0,\"negative\":5,\"rate\":0,\"lower\":3.1392028157379784e-17},{\"mStore\":\"SW87375\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":0,\"negative\":5,\"rate\":0,\"lower\":3.1392028157379784e-17},{\"mStore\":\"SW87935\",\"db\":\"Hong Kong\",\"all_\":7,\"positive\":0,\"negative\":7,\"rate\":0,\"lower\":3.5841394131752215e-17},{\"mStore\":\"WA0007\",\"db\":\"Hong Kong\",\"all_\":7,\"positive\":0,\"negative\":7,\"rate\":0,\"lower\":3.5841394131752215e-17},{\"mStore\":\"SW87908\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":0,\"negative\":2,\"rate\":0,\"lower\":3.8010922508393475e-17},{\"mStore\":\"HA0489\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":0,\"negative\":2,\"rate\":0,\"lower\":3.8010922508393475e-17},{\"mStore\":\"SW8700913\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":0,\"negative\":2,\"rate\":0,\"lower\":3.8010922508393475e-17},{\"mStore\":\"VMID429\",\"db\":\"Singapore\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"SW8700108\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"SW8700216\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"SW8700425\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"WA0074\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"SW8700890\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"SW8700431\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"SW8700811\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"VMID428\",\"db\":\"Singapore\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"SW8700475\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"SW8700728\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"SW8700727\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":0,\"negative\":1,\"rate\":0,\"lower\":4.5861823555236146e-17},{\"mStore\":\"RW0114\",\"db\":\"Hong Kong\",\"all_\":22,\"positive\":1,\"negative\":21,\"rate\":0.045454545454545456,\"lower\":0.008069219301147847},{\"mStore\":\"SW8700868\",\"db\":\"Hong Kong\",\"all_\":4,\"positive\":1,\"negative\":3,\"rate\":0.25,\"lower\":0.045586062644636216},{\"mStore\":\"WA0040\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":1,\"negative\":2,\"rate\":0.3333333333333333,\"lower\":0.061490315276160466},{\"mStore\":\"SW87487\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":1,\"negative\":1,\"rate\":0.5,\"lower\":0.09452865480086611},{\"mStore\":\"SW8700207\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":1,\"negative\":1,\"rate\":0.5,\"lower\":0.09452865480086611},{\"mStore\":\"HA0569\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":1,\"negative\":1,\"rate\":0.5,\"lower\":0.09452865480086611},{\"mStore\":\"SW8700190\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":1,\"negative\":1,\"rate\":0.5,\"lower\":0.09452865480086611},{\"mStore\":\"RW0133\",\"db\":\"Hong Kong\",\"all_\":10,\"positive\":3,\"negative\":7,\"rate\":0.3,\"lower\":0.10778928748621178},{\"mStore\":\"SW87600\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":2,\"negative\":3,\"rate\":0.4,\"lower\":0.11761823115925324},{\"mStore\":\"WA0038\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":2,\"negative\":3,\"rate\":0.4,\"lower\":0.11761823115925324},{\"mStore\":\"HA0309\",\"db\":\"Hong Kong\",\"all_\":13,\"positive\":4,\"negative\":9,\"rate\":0.3076923076923077,\"lower\":0.12680497161618093},{\"mStore\":\"HA0542\",\"db\":\"Hong Kong\",\"all_\":8,\"positive\":3,\"negative\":5,\"rate\":0.375,\"lower\":0.13684175946152105},{\"mStore\":\"MYID028\",\"db\":\"Malaysia\",\"all_\":12,\"positive\":4,\"negative\":8,\"rate\":0.3333333333333333,\"lower\":0.13811783989736134},{\"mStore\":\"SW8700143\",\"db\":\"Hong Kong\",\"all_\":4,\"positive\":2,\"negative\":2,\"rate\":0.5,\"lower\":0.15003570882017145},{\"mStore\":\"HA0614\",\"db\":\"Hong Kong\",\"all_\":14,\"positive\":5,\"negative\":9,\"rate\":0.35714285714285715,\"lower\":0.16344490737202735},{\"mStore\":\"HA0467\",\"db\":\"Hong Kong\",\"all_\":13,\"positive\":5,\"negative\":8,\"rate\":0.38461538461538464,\"lower\":0.1770944658123681},{\"mStore\":\"HA0525\",\"db\":\"Hong Kong\",\"all_\":6,\"positive\":3,\"negative\":3,\"rate\":0.5,\"lower\":0.18761280689940865},{\"mStore\":\"VMID401\",\"db\":\"Singapore\",\"all_\":6,\"positive\":3,\"negative\":3,\"rate\":0.5,\"lower\":0.18761280689940865},{\"mStore\":\"HA0118\",\"db\":\"Hong Kong\",\"all_\":6,\"positive\":3,\"negative\":3,\"rate\":0.5,\"lower\":0.18761280689940865},{\"mStore\":\"SW8700080\",\"db\":\"Hong Kong\",\"all_\":9,\"positive\":4,\"negative\":5,\"rate\":0.4444444444444444,\"lower\":0.18877542947191403},{\"mStore\":\"SW8700550\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":1,\"negative\":0,\"rate\":1,\"lower\":0.20654329147389294},{\"mStore\":\"VMID427\",\"db\":\"Singapore\",\"all_\":1,\"positive\":1,\"negative\":0,\"rate\":1,\"lower\":0.20654329147389294},{\"mStore\":\"VMID332\",\"db\":\"Singapore\",\"all_\":1,\"positive\":1,\"negative\":0,\"rate\":1,\"lower\":0.20654329147389294},{\"mStore\":\"SW87694\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":1,\"negative\":0,\"rate\":1,\"lower\":0.20654329147389294},{\"mStore\":\"SW8700671\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":1,\"negative\":0,\"rate\":1,\"lower\":0.20654329147389294},{\"mStore\":\"SW8700802\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":1,\"negative\":0,\"rate\":1,\"lower\":0.20654329147389294},{\"mStore\":\"SW87897\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":1,\"negative\":0,\"rate\":1,\"lower\":0.20654329147389294},{\"mStore\":\"HA0393\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":1,\"negative\":0,\"rate\":1,\"lower\":0.20654329147389294},{\"mStore\":\"HA0154\",\"db\":\"Hong Kong\",\"all_\":1,\"positive\":1,\"negative\":0,\"rate\":1,\"lower\":0.20654329147389294},{\"mStore\":\"HA0465\",\"db\":\"Hong Kong\",\"all_\":28,\"positive\":10,\"negative\":18,\"rate\":0.35714285714285715,\"lower\":0.20705611972458873},{\"mStore\":\"SW8700414\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":2,\"negative\":1,\"rate\":0.6666666666666666,\"lower\":0.20765495512648788},{\"mStore\":\"RW0106\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":2,\"negative\":1,\"rate\":0.6666666666666666,\"lower\":0.20765495512648788},{\"mStore\":\"SW87730\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":2,\"negative\":1,\"rate\":0.6666666666666666,\"lower\":0.20765495512648788},{\"mStore\":\"SW8700591\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":2,\"negative\":1,\"rate\":0.6666666666666666,\"lower\":0.20765495512648788},{\"mStore\":\"SW8700914\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":3,\"negative\":2,\"rate\":0.6,\"lower\":0.230719932208837},{\"mStore\":\"SW8700892\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":3,\"negative\":2,\"rate\":0.6,\"lower\":0.230719932208837},{\"mStore\":\"VMID433\",\"db\":\"Singapore\",\"all_\":5,\"positive\":3,\"negative\":2,\"rate\":0.6,\"lower\":0.230719932208837},{\"mStore\":\"WA0095\",\"db\":\"Hong Kong\",\"all_\":10,\"positive\":5,\"negative\":5,\"rate\":0.5,\"lower\":0.2365895936154873},{\"mStore\":\"SW8700225\",\"db\":\"Hong Kong\",\"all_\":7,\"positive\":4,\"negative\":3,\"rate\":0.5714285714285714,\"lower\":0.25045423040902576},{\"mStore\":\"SW87559\",\"db\":\"Hong Kong\",\"all_\":28,\"positive\":12,\"negative\":16,\"rate\":0.42857142857142855,\"lower\":0.2650829618073123},{\"mStore\":\"SW8700235\",\"db\":\"Hong Kong\",\"all_\":9,\"positive\":5,\"negative\":4,\"rate\":0.5555555555555556,\"lower\":0.2666473457440297},{\"mStore\":\"VMID400\",\"db\":\"Singapore\",\"all_\":14,\"positive\":7,\"negative\":7,\"rate\":0.5,\"lower\":0.2679886791947528},{\"mStore\":\"HA0510\",\"db\":\"Hong Kong\",\"all_\":27,\"positive\":12,\"negative\":15,\"rate\":0.4444444444444444,\"lower\":0.27585597670072826},{\"mStore\":\"RW0115\",\"db\":\"Hong Kong\",\"all_\":6,\"positive\":4,\"negative\":2,\"rate\":0.6666666666666666,\"lower\":0.2999883213415287},{\"mStore\":\"SW8700489\",\"db\":\"Hong Kong\",\"all_\":4,\"positive\":3,\"negative\":1,\"rate\":0.75,\"lower\":0.30063605244263664},{\"mStore\":\"SW8700007\",\"db\":\"Hong Kong\",\"all_\":4,\"positive\":3,\"negative\":1,\"rate\":0.75,\"lower\":0.30063605244263664},{\"mStore\":\"VMID281\",\"db\":\"Singapore\",\"all_\":4,\"positive\":3,\"negative\":1,\"rate\":0.75,\"lower\":0.30063605244263664},{\"mStore\":\"HA0565\",\"db\":\"Hong Kong\",\"all_\":8,\"positive\":5,\"negative\":3,\"rate\":0.625,\"lower\":0.3057378545838018},{\"mStore\":\"HA0200\",\"db\":\"Hong Kong\",\"all_\":8,\"positive\":5,\"negative\":3,\"rate\":0.625,\"lower\":0.3057378545838018},{\"mStore\":\"HA0136\",\"db\":\"Hong Kong\",\"all_\":22,\"positive\":11,\"negative\":11,\"rate\":0.5,\"lower\":0.3072180469247956},{\"mStore\":\"WA0008\",\"db\":\"Hong Kong\",\"all_\":10,\"positive\":6,\"negative\":4,\"rate\":0.6,\"lower\":0.3126695474501864},{\"mStore\":\"SW87677\",\"db\":\"Hong Kong\",\"all_\":10,\"positive\":6,\"negative\":4,\"rate\":0.6,\"lower\":0.3126695474501864},{\"mStore\":\"HA0589\",\"db\":\"Hong Kong\",\"all_\":31,\"positive\":15,\"negative\":16,\"rate\":0.4838709677419355,\"lower\":0.3196998603127882},{\"mStore\":\"HA0551\",\"db\":\"Hong Kong\",\"all_\":116,\"positive\":47,\"negative\":69,\"rate\":0.4051724137931034,\"lower\":0.3202639001453139},{\"mStore\":\"SW87542\",\"db\":\"Hong Kong\",\"all_\":18,\"positive\":10,\"negative\":8,\"rate\":0.5555555555555556,\"lower\":0.33716069428251627},{\"mStore\":\"HA0063\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":2,\"negative\":0,\"rate\":1,\"lower\":0.3423719528896193},{\"mStore\":\"HA0564\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":2,\"negative\":0,\"rate\":1,\"lower\":0.3423719528896193},{\"mStore\":\"HA0545\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":2,\"negative\":0,\"rate\":1,\"lower\":0.3423719528896193},{\"mStore\":\"HA0155\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":2,\"negative\":0,\"rate\":1,\"lower\":0.3423719528896193},{\"mStore\":\"RW0109\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":2,\"negative\":0,\"rate\":1,\"lower\":0.3423719528896193},{\"mStore\":\"SW8700686\",\"db\":\"Hong Kong\",\"all_\":2,\"positive\":2,\"negative\":0,\"rate\":1,\"lower\":0.3423719528896193},{\"mStore\":\"HA0326\",\"db\":\"Hong Kong\",\"all_\":11,\"positive\":7,\"negative\":4,\"rate\":0.6363636363636364,\"lower\":0.35379677689163724},{\"mStore\":\"WA0039\",\"db\":\"Hong Kong\",\"all_\":7,\"positive\":5,\"negative\":2,\"rate\":0.7142857142857143,\"lower\":0.35892909014821267},{\"mStore\":\"SW8703012\",\"db\":\"Hong Kong\",\"all_\":7,\"positive\":5,\"negative\":2,\"rate\":0.7142857142857143,\"lower\":0.35892909014821267},{\"mStore\":\"SW8700110\",\"db\":\"Hong Kong\",\"all_\":7,\"positive\":5,\"negative\":2,\"rate\":0.7142857142857143,\"lower\":0.35892909014821267},{\"mStore\":\"HA0273\",\"db\":\"Hong Kong\",\"all_\":17,\"positive\":10,\"negative\":7,\"rate\":0.5882352941176471,\"lower\":0.3600507438551554},{\"mStore\":\"HA0318\",\"db\":\"Hong Kong\",\"all_\":17,\"positive\":10,\"negative\":7,\"rate\":0.5882352941176471,\"lower\":0.3600507438551554},{\"mStore\":\"HA0348\",\"db\":\"Hong Kong\",\"all_\":19,\"positive\":11,\"negative\":8,\"rate\":0.5789473684210527,\"lower\":0.36275551465160116},{\"mStore\":\"SW8700891\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":4,\"negative\":1,\"rate\":0.8,\"lower\":0.37552826411853873},{\"mStore\":\"VMID145\",\"db\":\"Singapore\",\"all_\":5,\"positive\":4,\"negative\":1,\"rate\":0.8,\"lower\":0.37552826411853873},{\"mStore\":\"SW87621\",\"db\":\"Hong Kong\",\"all_\":16,\"positive\":10,\"negative\":6,\"rate\":0.625,\"lower\":0.38640647097934805},{\"mStore\":\"HA0370\",\"db\":\"Hong Kong\",\"all_\":14,\"positive\":9,\"negative\":5,\"rate\":0.6428571428571429,\"lower\":0.3876400468214041},{\"mStore\":\"SW87852\",\"db\":\"Hong Kong\",\"all_\":10,\"positive\":7,\"negative\":3,\"rate\":0.7,\"lower\":0.3967732199795651},{\"mStore\":\"SW87092\",\"db\":\"Hong Kong\",\"all_\":8,\"positive\":6,\"negative\":2,\"rate\":0.75,\"lower\":0.40926987910258916},{\"mStore\":\"WA0078\",\"db\":\"Hong Kong\",\"all_\":40,\"positive\":23,\"negative\":17,\"rate\":0.575,\"lower\":0.4219480043605999},{\"mStore\":\"SW8700199\",\"db\":\"Hong Kong\",\"all_\":13,\"positive\":9,\"negative\":4,\"rate\":0.6923076923076923,\"lower\":0.42368887813337647},{\"mStore\":\"HA0218\",\"db\":\"Hong Kong\",\"all_\":6,\"positive\":5,\"negative\":1,\"rate\":0.8333333333333334,\"lower\":0.4364905634363538},{\"mStore\":\"SW87450\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":3,\"negative\":0,\"rate\":1,\"lower\":0.43849391955098216},{\"mStore\":\"SW8700625\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":3,\"negative\":0,\"rate\":1,\"lower\":0.43849391955098216},{\"mStore\":\"HA0490\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":3,\"negative\":0,\"rate\":1,\"lower\":0.43849391955098216},{\"mStore\":\"RW0132\",\"db\":\"Hong Kong\",\"all_\":3,\"positive\":3,\"negative\":0,\"rate\":1,\"lower\":0.43849391955098216},{\"mStore\":\"SW8700126\",\"db\":\"Hong Kong\",\"all_\":14,\"positive\":10,\"negative\":4,\"rate\":0.7142857142857143,\"lower\":0.4535045882751561},{\"mStore\":\"VMID398\",\"db\":\"Singapore\",\"all_\":26,\"positive\":17,\"negative\":9,\"rate\":0.6538461538461539,\"lower\":0.46220229009632996},{\"mStore\":\"HA0412\",\"db\":\"Hong Kong\",\"all_\":12,\"positive\":9,\"negative\":3,\"rate\":0.75,\"lower\":0.4676896608793401},{\"mStore\":\"VMID397\",\"db\":\"Singapore\",\"all_\":15,\"positive\":11,\"negative\":4,\"rate\":0.7333333333333333,\"lower\":0.48049110342313256},{\"mStore\":\"HA0606\",\"db\":\"Hong Kong\",\"all_\":7,\"positive\":6,\"negative\":1,\"rate\":0.8571428571428571,\"lower\":0.4868654966809702},{\"mStore\":\"SW8700185\",\"db\":\"Hong Kong\",\"all_\":10,\"positive\":8,\"negative\":2,\"rate\":0.8,\"lower\":0.4901568467207233},{\"mStore\":\"SW8700797\",\"db\":\"Hong Kong\",\"all_\":18,\"positive\":13,\"negative\":5,\"rate\":0.7222222222222222,\"lower\":0.49126922453805477},{\"mStore\":\"SW8700921\",\"db\":\"Hong Kong\",\"all_\":13,\"positive\":10,\"negative\":3,\"rate\":0.7692307692307693,\"lower\":0.49743126004873084},{\"mStore\":\"HA0566\",\"db\":\"Hong Kong\",\"all_\":16,\"positive\":12,\"negative\":4,\"rate\":0.75,\"lower\":0.5050123107060135},{\"mStore\":\"SW8702573\",\"db\":\"Hong Kong\",\"all_\":4,\"positive\":4,\"negative\":0,\"rate\":1,\"lower\":0.5100999795960008},{\"mStore\":\"HA0365\",\"db\":\"Hong Kong\",\"all_\":4,\"positive\":4,\"negative\":0,\"rate\":1,\"lower\":0.5100999795960008},{\"mStore\":\"HA0516\",\"db\":\"Hong Kong\",\"all_\":11,\"positive\":9,\"negative\":2,\"rate\":0.8181818181818182,\"lower\":0.5230138624217553},{\"mStore\":\"SW8700581\",\"db\":\"Hong Kong\",\"all_\":11,\"positive\":9,\"negative\":2,\"rate\":0.8181818181818182,\"lower\":0.5230138624217553},{\"mStore\":\"HA0303\",\"db\":\"Hong Kong\",\"all_\":28,\"positive\":20,\"negative\":8,\"rate\":0.7142857142857143,\"lower\":0.529403642629825},{\"mStore\":\"SW87914\",\"db\":\"Hong Kong\",\"all_\":18,\"positive\":14,\"negative\":4,\"rate\":0.7777777777777778,\"lower\":0.547849735476945},{\"mStore\":\"HA0188\",\"db\":\"Hong Kong\",\"all_\":12,\"positive\":10,\"negative\":2,\"rate\":0.8333333333333334,\"lower\":0.5519636426153272},{\"mStore\":\"HA0577\",\"db\":\"Hong Kong\",\"all_\":9,\"positive\":8,\"negative\":1,\"rate\":0.8888888888888888,\"lower\":0.5649937852319398},{\"mStore\":\"SW8700813\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":5,\"negative\":0,\"rate\":1,\"lower\":0.5655085052479188},{\"mStore\":\"SW8700684\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":5,\"negative\":0,\"rate\":1,\"lower\":0.5655085052479188},{\"mStore\":\"SW87937\",\"db\":\"Hong Kong\",\"all_\":5,\"positive\":5,\"negative\":0,\"rate\":1,\"lower\":0.5655085052479188},{\"mStore\":\"VMID426\",\"db\":\"Singapore\",\"all_\":5,\"positive\":5,\"negative\":0,\"rate\":1,\"lower\":0.5655085052479188},{\"mStore\":\"HA0455\",\"db\":\"Hong Kong\",\"all_\":22,\"positive\":17,\"negative\":5,\"rate\":0.7727272727272727,\"lower\":0.5655964393704065},{\"mStore\":\"HA0219\",\"db\":\"Hong Kong\",\"all_\":34,\"positive\":25,\"negative\":9,\"rate\":0.7352941176470589,\"lower\":0.5688253783710155},{\"mStore\":\"HA0167\",\"db\":\"Hong Kong\",\"all_\":41,\"positive\":31,\"negative\":10,\"rate\":0.7560975609756098,\"lower\":0.6065636934554182},{\"mStore\":\"RW0134\",\"db\":\"Hong Kong\",\"all_\":6,\"positive\":6,\"negative\":0,\"rate\":1,\"lower\":0.6096569663469354},{\"mStore\":\"SW8700218\",\"db\":\"Hong Kong\",\"all_\":42,\"positive\":32,\"negative\":10,\"rate\":0.7619047619047619,\"lower\":0.6147216491768114},{\"mStore\":\"SW8700615\",\"db\":\"Hong Kong\",\"all_\":86,\"positive\":62,\"negative\":24,\"rate\":0.7209302325581395,\"lower\":0.6182520968201863},{\"mStore\":\"VMID399\",\"db\":\"Singapore\",\"all_\":15,\"positive\":13,\"negative\":2,\"rate\":0.8666666666666667,\"lower\":0.6211750079348375},{\"mStore\":\"HA0319\",\"db\":\"Hong Kong\",\"all_\":11,\"positive\":10,\"negative\":1,\"rate\":0.9090909090909091,\"lower\":0.6226353745137962},{\"mStore\":\"HA0557\",\"db\":\"Hong Kong\",\"all_\":11,\"positive\":10,\"negative\":1,\"rate\":0.9090909090909091,\"lower\":0.6226353745137962},{\"mStore\":\"HA0578\",\"db\":\"Hong Kong\",\"all_\":19,\"positive\":16,\"negative\":3,\"rate\":0.8421052631578947,\"lower\":0.6243407235682331},{\"mStore\":\"HA0070\",\"db\":\"Hong Kong\",\"all_\":16,\"positive\":14,\"negative\":2,\"rate\":0.875,\"lower\":0.6397666856325172},{\"mStore\":\"HA0521\",\"db\":\"Hong Kong\",\"all_\":28,\"positive\":23,\"negative\":5,\"rate\":0.8214285714285714,\"lower\":0.644082084514089},{\"mStore\":\"SW8700201\",\"db\":\"Hong Kong\",\"all_\":21,\"positive\":18,\"negative\":3,\"rate\":0.8571428571428571,\"lower\":0.6536350585077049},{\"mStore\":\"HA0268\",\"db\":\"Hong Kong\",\"all_\":41,\"positive\":33,\"negative\":8,\"rate\":0.8048780487804879,\"lower\":0.6598611764744329},{\"mStore\":\"HA0572\",\"db\":\"Hong Kong\",\"all_\":152,\"positive\":112,\"negative\":40,\"rate\":0.7368421052631579,\"lower\":0.6616208335298267},{\"mStore\":\"HA0187\",\"db\":\"Hong Kong\",\"all_\":32,\"positive\":27,\"negative\":5,\"rate\":0.84375,\"lower\":0.6824550744643347},{\"mStore\":\"HA0588\",\"db\":\"Hong Kong\",\"all_\":36,\"positive\":31,\"negative\":5,\"rate\":0.8611111111111112,\"lower\":0.713401487196068},{\"mStore\":\"HA0242\",\"db\":\"Hong Kong\",\"all_\":63,\"positive\":52,\"negative\":11,\"rate\":0.8253968253968254,\"lower\":0.7137834026557441},{\"mStore\":\"HA0518\",\"db\":\"Hong Kong\",\"all_\":16,\"positive\":15,\"negative\":1,\"rate\":0.9375,\"lower\":0.7167073163197013},{\"mStore\":\"HA0495\",\"db\":\"Hong Kong\",\"all_\":27,\"positive\":24,\"negative\":3,\"rate\":0.8888888888888888,\"lower\":0.7194181745602706},{\"mStore\":\"RW0054\",\"db\":\"Hong Kong\",\"all_\":10,\"positive\":10,\"negative\":0,\"rate\":1,\"lower\":0.7224598312333834},{\"mStore\":\"HA0456\",\"db\":\"Hong Kong\",\"all_\":48,\"positive\":41,\"negative\":7,\"rate\":0.8541666666666666,\"lower\":0.7283255295714138},{\"mStore\":\"SW8700240\",\"db\":\"Hong Kong\",\"all_\":17,\"positive\":16,\"negative\":1,\"rate\":0.9411764705882353,\"lower\":0.730174547964372},{\"mStore\":\"HA0222\",\"db\":\"Hong Kong\",\"all_\":64,\"positive\":54,\"negative\":10,\"rate\":0.84375,\"lower\":0.7357170979769467},{\"mStore\":\"HA0317\",\"db\":\"Hong Kong\",\"all_\":11,\"positive\":11,\"negative\":0,\"rate\":1,\"lower\":0.7411599827511859},{\"mStore\":\"HA0472\",\"db\":\"Hong Kong\",\"all_\":42,\"positive\":37,\"negative\":5,\"rate\":0.8809523809523809,\"lower\":0.7499931819289247},{\"mStore\":\"HA0591\",\"db\":\"Hong Kong\",\"all_\":130,\"positive\":111,\"negative\":19,\"rate\":0.8538461538461538,\"lower\":0.7829854119638304},{\"mStore\":\"HA0231\",\"db\":\"Hong Kong\",\"all_\":46,\"positive\":42,\"negative\":4,\"rate\":0.9130434782608695,\"lower\":0.7967506436477582},{\"mStore\":\"HA0590\",\"db\":\"Hong Kong\",\"all_\":121,\"positive\":107,\"negative\":14,\"rate\":0.8842975206611571,\"lower\":0.81512854078081},{\"mStore\":\"WA0122\",\"db\":\"Hong Kong\",\"all_\":33,\"positive\":33,\"negative\":0,\"rate\":1,\"lower\":0.8957265699643882}]},\"req\":{\"_readableState\":{\"objectMode\":false,\"highWaterMark\":16384,\"buffer\":{\"head\":null,\"tail\":null,\"length\":0},\"length\":0,\"pipes\":null,\"pipesCount\":0,\"flowing\":true,\"ended\":true,\"endEmitted\":true,\"reading\":false,\"sync\":false,\"needReadable\":false,\"emittedReadable\":false,\"readableListening\":false,\"resumeScheduled\":false,\"destroyed\":false,\"defaultEncoding\":\"utf8\",\"awaitDrain\":0,\"readingMore\":false,\"decoder\":null,\"encoding\":null},\"readable\":false,\"domain\":null,\"_events\":{},\"_eventsCount\":1,\"socket\":\"[internal]\",\"connection\":\"[internal]\",\"httpVersionMajor\":1,\"httpVersionMinor\":1,\"httpVersion\":\"1.1\",\"complete\":true,\"headers\":{\"host\":\"lambda.sr-api.com\",\"x-forwarded-scheme\":\"http\",\"x-forwarded-proto\":\"http\",\"x-forwarded-for\":\"52.221.80.32\",\"x-real-ip\":\"52.221.80.32\",\"connection\":\"close\",\"content-length\":\"50355\",\"user-agent\":\"python-requests/2.24.0\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\"},\"rawHeaders\":[\"Host\",\"lambda.sr-api.com\",\"X-Forwarded-Scheme\",\"http\",\"X-Forwarded-Proto\",\"http\",\"X-Forwarded-For\",\"52.221.80.32\",\"X-Real-IP\",\"52.221.80.32\",\"Connection\",\"close\",\"Content-Length\",\"50355\",\"User-Agent\",\"python-requests/2.24.0\",\"Accept-Encoding\",\"gzip, deflate\",\"Accept\",\"*/*\"],\"trailers\":{},\"rawTrailers\":[],\"aborted\":false,\"upgrade\":false,\"url\":\"/order_since_last_image\",\"method\":\"POST\",\"statusCode\":null,\"statusMessage\":null,\"client\":\"[internal]\",\"_consuming\":true,\"_dumped\":false,\"baseUrl\":\"\",\"originalUrl\":\"/order_since_last_image\",\"_parsedUrl\":{\"protocol\":null,\"slashes\":null,\"auth\":null,\"host\":null,\"port\":null,\"hostname\":null,\"hash\":null,\"search\":null,\"query\":null,\"pathname\":\"/order_since_last_image\",\"path\":\"/order_since_last_image\",\"href\":\"/order_since_last_image\",\"_raw\":\"/order_since_last_image\"},\"params\":{},\"query\":{},\"res\":\"[internal]\",\"body\":\"{\\\"storeStatus2\\\": [{\\\"mStore\\\": \\\"HA0573\\\", \\\"db\\\": \\\"Hong Kong\\\", \\\"unmatched\\\": 224, \\\"dMax\\\": \\\"2021-06-17 18:09:24.403327\\\"}, {\\\"mStore\\\": \\\"WA0099\\\", \\\"db\\\": \\\"Hong Kong\\\", \\\"unmatched\\\": 49, \\\"dMax\\\": \\\"2021-06-25 10:12:12.457571\\\"}, {\\\"mStore\\\": \\\"HA0551\\\", \\\"db\\\": \\\"Hong Kong\\\", \\\"unmatched\\\": 37, \\\"dMax\\\": \\\"2021-07-04 12:14:55.643503\\\"}, {\\\"mStore\\\": \\\"HA0057\\\", \\\"db\\\": \\\"Hong Kong\\\", \\\"unmatched\\\": 20, \\\"dMax\\\": \\\"2021-06-18 11:10:23.374466\\\"}, {\\\"mStore\\\": \\\"VMID423\\\", \\\"db\\\": \\\"Singapore\\\", \\\"unmatched\\\": 19, \\\"dMax\\\": \\\"2021-06-23 10:56:54.305066\\\"}, {\\\"mStore\\\": \\\"HA0392\\\", \\\"db\\\": \\\"Hong Kong\\\", \\\"unmatched\\\": 19, \\\"dMax\\\": \\\"2021-05-11 14:19:34.211067\\\"}, {\\\"mStore\\\": \\\"VMID319\\\", \\\"db\\\": \\\"Singapore\\\", \\\"unmatched\\\": 16, \\\"dMax\\\": \\\"2021-06-29 09:15:09.104997\\\"}, {\\\"mStore\\\": \\\"HA0299\\\", \\\"db\\\": \\\"Hong Kong\\\", \\\"unmatched\\\": 10, \\\"dMax\\\": \\\"2021-06-25 17:46:40.835382\\\"}, {\\\"mStore\\\": \\\"WA0007\\\", \\\"db\\\": \\\"Hong Kong\\\", \\\"unmatched\\\": 7, \\\"dMax\\\": \\\"2021-06-07 18:08:51.886438\\\"}, {\\\"mStore\\\": \\\"RW0133\\\", \\\"db\\\": \\\"Hong Kong\\\", \\\"unmatched\\\": 6, \\\"dMax\\\": \\\"2021-07-03 17:18:34.247531\\\"}, {\\\"mStore\\\": \\\"SW87375\\\",...\",\"route\":{\"path\":\"/order_since_last_image\",\"stack\":[{\"name\":\"cookieParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"httpMiddleware\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"corsHandler\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"metricsHandler\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"jsonParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"urlencodedParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"multipartParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"rawBodyParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"<anonymous>\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"<anonymous>\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"}],\"methods\":{\"post\":true}},\"cookies\":{},\"signedCookies\":{},\"_body\":true},\"res\":{}};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 420,
        "y": 2420,
        "wires": [
            [
                "61db908e.572ad"
            ]
        ]
    },
    {
        "id": "20793012.8e8a28",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 2420,
        "wires": [
            [
                "5463e0aa.28bf4"
            ]
        ]
    },
    {
        "id": "3cdef5ac.458152",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1230,
        "y": 2420,
        "wires": []
    },
    {
        "id": "61db908e.572ad",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "",
        "func": "var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\n\nmsg1.payload = msg.payload.storeStatus2;\nmsg2.payload = msg.payload.s3Dynamo;\nmsg3.payload = msg.payload.mongoS3;\n\nreturn [msg1, msg2, msg3];\n",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 590,
        "y": 2420,
        "wires": [
            [],
            [],
            [
                "76131e19.b85138"
            ]
        ]
    },
    {
        "id": "531477df.ebd7f8",
        "type": "ui_text",
        "z": "97b4d820.582a98",
        "group": "37e6d80b.323c2",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Detection rate",
        "format": "{{msg.detection}}",
        "layout": "row-spread",
        "x": 1100,
        "y": 2520,
        "wires": []
    },
    {
        "id": "66b2adb2.0d55dc",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "",
        "func": "\n\nvar detection = Math.round(msg.payload.lower * 1000)/10;\nmsg.detection = detection + '%';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 900,
        "y": 2520,
        "wires": [
            [
                "531477df.ebd7f8"
            ]
        ]
    },
    {
        "id": "76131e19.b85138",
        "type": "split",
        "z": "97b4d820.582a98",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 750,
        "y": 2420,
        "wires": [
            [
                "3a89c7d7.76875",
                "4e2f70ae.1dfb68"
            ]
        ]
    },
    {
        "id": "3a89c7d7.76875",
        "type": "switch",
        "z": "97b4d820.582a98",
        "name": "",
        "property": "payload.mStore",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "HA0456",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 740,
        "y": 2520,
        "wires": [
            [
                "66b2adb2.0d55dc",
                "9099f0d5.c0a5f8"
            ]
        ]
    },
    {
        "id": "9099f0d5.c0a5f8",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 890,
        "y": 2560,
        "wires": []
    },
    {
        "id": "4e2f70ae.1dfb68",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 910,
        "y": 2400,
        "wires": []
    },
    {
        "id": "bc67a7c0.9753e",
        "type": "function",
        "z": "97b4d820.582a98",
        "name": "",
        "func": "msg={\"_msgid\":\"8b03f7ec.b13dd8\",\"payload\":[255,216,255,224,0,16,74,70,73,70,0,1,1,0,0,1,0,1,0,0,255,219,0,67,0,2,1,1,1,1,1,2,1,1,1,2,2,2,2,2,4,3,2,2,2,2,5,4,4,3,4,6,5,6,6,6,5,6,6,6,7,9,8,6,7,9,7,6,6,8,11,8,9,10,10,10,10,10,6,8,11,12,11,10,12,9,10,10,10,255,219,0,67,1,2,2,2,2,2,2,5,3,3,5,10,7,6,7,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,255,192,0,17,8,1,224,2,128,3,1,34,0,2,17,1,3,17,1,255,196,0,31,0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,255,196,0,181,16,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125,1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250,255,196,0,31,1,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,255,196,0,181,17,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119,0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250,255,218,0,12,3,1,0,2,17,3,17,0,63,0,252,37,131,78,183,159,125,161,93,187,198,119,117,228,96,255,0,74,209,177,137,34,129,165,89,67,7,39,104,30,199,4,81,111,108,140,228,33,63,42,252,172,123,154,185,111,19,199,98,177,164,72,210,249,129,144,51,237,3,230,27,137,24,57,200,226,178,105,243,189,88,61,199,89,89,25,101,243,129,44,121,56,21,211,120,55,67,55,97,159,99,109,200,218,71,94,79,235,84,116,141,41,239,38,196,40,48,231,134,3,129,94,161,240,251,194,6,39,140,65,30,238,115,180,143,94,181,19,173,40,195,153,9,187,35,163,248,127,224,155,171,216,21,81,190,234,115,189,122,156,253,107,215,252,31,224,8,244,155,112,204,164,51,16,80,110,206,71,175,6,169,252,63,208,237,214,21,101,136,101,71,80,6,51,94,149,161,232,215,15,22,88,228,6,200,45,199,21,228,212,169,207,59,173,91,232,204,167,81,236,209,115,194,190,27,242,74,132,56,81,211,30,130,187,157,27,71,103,133,34,98,114,51,249,26,205,208,172,5,188,97,144,15,152,117,174,171,73,119,181,152,74,23,114,168,231,61,234,167,136,168,215,44,159,228,115,202,175,51,176,248,180,52,183,98,196,182,72,201,192,207,245,168,159,79,12,172,202,153,78,185,174,183,74,251,14,191,23,153,15,200,219,126,101,61,122,210,106,26,2,219,18,198,62,59,12,103,53,116,26,90,54,103,40,242,89,167,115,55,194,222,48,177,211,60,189,35,86,96,150,238,73,89,177,247,79,190,79,74,233,252,67,225,180,48,187,195,50,73,28,145,252,141,27,134,12,15,66,8,56,35,222,188,215,197,246,77],\"Bucket\":\"srlocalaws\",\"StoreCode\":\"HA0591\",\"OrderID\":\"\",\"SessionID\":\"7132f8f0-df91-11eb-89bd-47adc5fc3f3c\",\"Triggeraction\":\"select\",\"UserID\":\"10387\",\"h\":10,\"Time\":\"2021-07-08_10:08:52.739918\",\"Key\":\"EYESHA05912021-07-08_10:08:52.739918.JPEG\",\"Body\":[255,216,255,224,0,16,74,70,73,70,0,1,1,0,0,1,0,1,0,0,255,219,0,67,0,2,1,1,1,1,1,2,1,1,1,2,2,2,2,2,4,3,2,2,2,2,5,4,4,3,4,6,5,6,6,6,5,6,6,6,7,9,8,6,7,9,7,6,6,8,11,8,9,10,10,10,10,10,6,8,11,12,11,10,12,9,10,10,10,255,219,0,67,1,2,2,2,2,2,2,5,3,3,5,10,7,6,7,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,255,192,0,17,8,1,224,2,128,3,1,34,0,2,17,1,3,17,1,255,196,0,31,0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,255,196,0,181,16,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125,1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250,255,196,0,31,1,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,255,196,0,181,17,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119,0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250,255,218,0,12,3,1,0,2,17,3,17,0,63,0,252,37,131,78,183,159,125,161,93,187,198,119,117,228,96,255,0,74,209,177,137,34,129,165,89,67,7,39,104,30,199,4,81,111,108,140,228,33,63,42,252,172,123,154,185,111,19,199,98,177,164,72,210,249,129,144,51,237,3,230,27,137,24,57,200,226,178,105,243,189,88,61,199,89,89,25,101,243,129,44,121,56,21,211,120,55,67,55,97,159,99,109,200,218,71,94,79,235,84,116,141,41,239,38,196,40,48,231,134,3,129,94,161,240,251,194,6,39,140,65,30,238,115,180,143,94,181,19,173,40,195,153,9,187,35,163,248,127,224,155,171,216,21,81,190,234,115,189,122,156,253,107,215,252,31,224,8,244,155,112,204,164,51,16,80,110,206,71,175,6,169,252,63,208,237,214,21,101,136,101,71,80,6,51,94,149,161,232,215,15,22,88,228,6,200,45,199,21,228,212,169,207,59,173,91,232,204,167,81,236,209,115,194,190,27,242,74,132,56,81,211,30,130,187,157,27,71,103,133,34,98,114,51,249,26,205,208,172,5,188,97,144,15,152,117,174,171,73,119,181,152,74,23,114,168,231,61,234,167,136,168,215,44,159,228,115,202,175,51,176,248,180,52,183,98,196,182,72,201,192,207,245,168,159,79,12,172,202,153,78,185,174,183,74,251,14,191,23,153,15,200,219,126,101,61,122,210,106,26,2,219,18,198,62,59,12,103,53,116,26,90,54,103,40,242,89,167,115,55,194,222,48,177,211,60,189,35,86,96,150,238,73,89,177,247,79,190,79,74,233,252,67,225,180,48,187,195,50,73,28,145,252,141,27,134,12,15,66,8,56,35,222,188,215,197,246,77],\"req\":{\"_readableState\":{\"objectMode\":false,\"highWaterMark\":16384,\"buffer\":{\"head\":null,\"tail\":null,\"length\":0},\"length\":0,\"pipes\":null,\"pipesCount\":0,\"flowing\":false,\"ended\":true,\"endEmitted\":true,\"reading\":false,\"sync\":false,\"needReadable\":false,\"emittedReadable\":false,\"readableListening\":true,\"resumeScheduled\":false,\"destroyed\":false,\"defaultEncoding\":\"utf8\",\"awaitDrain\":0,\"readingMore\":false,\"decoder\":null,\"encoding\":null},\"readable\":false,\"domain\":null,\"_events\":{},\"_eventsCount\":2,\"socket\":\"[internal]\",\"connection\":\"[internal]\",\"httpVersionMajor\":1,\"httpVersionMinor\":0,\"httpVersion\":\"1.0\",\"complete\":true,\"headers\":{\"host\":\"hk.go.smartretail.co\",\"x-real-ip\":\"203.145.95.67\",\"connection\":\"close\",\"content-length\":\"130461\",\"user-agent\":\"python-requests/2.24.0\",\"accept-encoding\":\"gzip, deflate\",\"accept\":\"*/*\",\"content-type\":\"multipart/form-data; boundary=3b4e1cae943bc993f2f27e6b4a76ed93\"},\"rawHeaders\":[\"Host\",\"hk.go.smartretail.co\",\"X-Real-IP\",\"203.145.95.67\",\"Connection\",\"close\",\"Content-Length\",\"130461\",\"User-Agent\",\"python-requests/2.24.0\",\"Accept-Encoding\",\"gzip, deflate\",\"Accept\",\"*/*\",\"Content-Type\",\"multipart/form-data; boundary=3b4e1cae943bc993f2f27e6b4a76ed93\"],\"trailers\":{},\"rawTrailers\":[],\"aborted\":false,\"upgrade\":false,\"url\":\"/EYES\",\"method\":\"POST\",\"statusCode\":null,\"statusMessage\":null,\"client\":\"[internal]\",\"_consuming\":true,\"_dumped\":false,\"baseUrl\":\"\",\"originalUrl\":\"/EYES\",\"_parsedUrl\":{\"protocol\":null,\"slashes\":null,\"auth\":null,\"host\":null,\"port\":null,\"hostname\":null,\"hash\":null,\"search\":null,\"query\":null,\"pathname\":\"/EYES\",\"path\":\"/EYES\",\"href\":\"/EYES\",\"_raw\":\"/EYES\"},\"params\":{},\"query\":{},\"res\":\"[internal]\",\"body\":{\"userid\":\"10387\",\"StoreCode\":\"HA0591\",\"time\":\"2021-07-08 10:08:52.739918\",\"TriggerAction\":\"select\",\"SessionID\":\"7132f8f0-df91-11eb-89bd-47adc5fc3f3c\",\"OrderID\":\"\",\"Region\":\"hk\"},\"route\":{\"path\":\"/EYES\",\"stack\":[{\"name\":\"cookieParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"httpMiddleware\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"corsHandler\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"metricsHandler\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"jsonParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"urlencodedParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"multipartParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"rawBodyParser\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"<anonymous>\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"},{\"name\":\"<anonymous>\",\"keys\":[],\"regexp\":{\"fast_star\":false,\"fast_slash\":false},\"method\":\"post\"}],\"methods\":{\"post\":true}},\"cookies\":{},\"signedCookies\":{},\"files\":[{\"fieldname\":\"image\",\"originalname\":\"image\",\"encoding\":\"7bit\",\"mimetype\":\"text/plain\",\"buffer\":[255,216,255,224,0,16,74,70,73,70,0,1,1,0,0,1,0,1,0,0,255,219,0,67,0,2,1,1,1,1,1,2,1,1,1,2,2,2,2,2,4,3,2,2,2,2,5,4,4,3,4,6,5,6,6,6,5,6,6,6,7,9,8,6,7,9,7,6,6,8,11,8,9,10,10,10,10,10,6,8,11,12,11,10,12,9,10,10,10,255,219,0,67,1,2,2,2,2,2,2,5,3,3,5,10,7,6,7,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,255,192,0,17,8,1,224,2,128,3,1,34,0,2,17,1,3,17,1,255,196,0,31,0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,255,196,0,181,16,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125,1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250,255,196,0,31,1,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,255,196,0,181,17,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119,0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250,255,218,0,12,3,1,0,2,17,3,17,0,63,0,252,37,131,78,183,159,125,161,93,187,198,119,117,228,96,255,0,74,209,177,137,34,129,165,89,67,7,39,104,30,199,4,81,111,108,140,228,33,63,42,252,172,123,154,185,111,19,199,98,177,164,72,210,249,129,144,51,237,3,230,27,137,24,57,200,226,178,105,243,189,88,61,199,89,89,25,101,243,129,44,121,56,21,211,120,55,67,55,97,159,99,109,200,218,71,94,79,235,84,116,141,41,239,38,196,40,48,231,134,3,129,94,161,240,251,194,6,39,140,65,30,238,115,180,143,94,181,19,173,40,195,153,9,187,35,163,248,127,224,155,171,216,21,81,190,234,115,189,122,156,253,107,215,252,31,224,8,244,155,112,204,164,51,16,80,110,206,71,175,6,169,252,63,208,237,214,21,101,136,101,71,80,6,51,94,149,161,232,215,15,22,88,228,6,200,45,199,21,228,212,169,207,59,173,91,232,204,167,81,236,209,115,194,190,27,242,74,132,56,81,211,30,130,187,157,27,71,103,133,34,98,114,51,249,26,205,208,172,5,188,97,144,15,152,117,174,171,73,119,181,152,74,23,114,168,231,61,234,167,136,168,215,44,159,228,115,202,175,51,176,248,180,52,183,98,196,182,72,201,192,207,245,168,159,79,12,172,202,153,78,185,174,183,74,251,14,191,23,153,15,200,219,126,101,61,122,210,106,26,2,219,18,198,62,59,12,103,53,116,26,90,54,103,40,242,89,167,115,55,194,222,48,177,211,60,189,35,86,96,150,238,73,89,177,247,79,190,79,74,233,252,67,225,180,48,187,195,50,73,28,145,252,141,27,134,12,15,66,8,56,35,222,188,215,197,246,77],\"size\":129617}],\"__onFinished\":null,\"_body\":true},\"res\":{}};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 510,
        "y": 2760,
        "wires": [
            [
                "60a017df.6ebd4",
                "2558ab47.3a58a4"
            ]
        ]
    },
    {
        "id": "be8978cd.85e81",
        "type": "inject",
        "z": "97b4d820.582a98",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 340,
        "y": 2760,
        "wires": [
            [
                "bc67a7c0.9753e",
                "772e6f4c.8b6c7"
            ]
        ]
    },
    {
        "id": "60a017df.6ebd4",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 670,
        "y": 2760,
        "wires": []
    },
    {
        "id": "2558ab47.3a58a4",
        "type": "flogger",
        "z": "97b4d820.582a98",
        "name": "",
        "logfile": "log",
        "inputchoice": "fullmsg",
        "inputobject": "payload",
        "inputobjectType": "msg",
        "inputmoustache": "Recieved payload {{payload}} and topic {{topic}}",
        "loglevel": "DEBUG",
        "logconfig": "c3f64ee.ef4ab3",
        "sendpane": "",
        "x": 680,
        "y": 2800,
        "wires": [
            []
        ]
    },
    {
        "id": "772e6f4c.8b6c7",
        "type": "http request",
        "z": "97b4d820.582a98",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://smartfridge.sr-api.com/genPurchase",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 540,
        "y": 2880,
        "wires": [
            [
                "7329475.e1d5c38"
            ]
        ]
    },
    {
        "id": "7329475.e1d5c38",
        "type": "debug",
        "z": "97b4d820.582a98",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 710,
        "y": 2880,
        "wires": []
    },
    {
        "id": "657d785c.a755d8",
        "type": "http in",
        "z": "74e7ce82.3e484",
        "name": "",
        "url": "/cinelist",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 350,
        "y": 400,
        "wires": [
            [
                "683f655.3cdba9c"
            ]
        ]
    },
    {
        "id": "c8db0462.894fd8",
        "type": "http response",
        "z": "74e7ce82.3e484",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1030,
        "y": 320,
        "wires": []
    },
    {
        "id": "66fc158.8d674ec",
        "type": "template",
        "z": "74e7ce82.3e484",
        "name": "HTML / CSS",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\">\n\t<title>CineList</title>\n\t<link rel=\"shortcut icon\" href=\"https://cinelist-public-dev.herokuapp.com/favicon.png\">\n\t<style>\n\n        @charset \"UTF-8\";\n        /* CSS Document */\n\n        *{\n            -webkit-tap-highlight-color: rgba(0,0,0,0);\n            box-sizing: border-box;\n        }\n\n        .inactive, [data-is-loading=false], [data-visible=false]{\n            display: none !important;\n        }\n\n        .working{\n            position: fixed;\n            top: 0;\n            left: 0;\n            display: -webkit-flex;\n            display: flex;\n            -webkit-align-items: center;\n            align-items: center;\n            -webkit-justify-content: center;\n            justify-content: center;\n            width: 100%;\n            -webkit-flex-direction: column;\n            flex-direction: column;\n            text-align: center;\n            height: 100%;\n            z-index: 999;\n            background: rgba(255,255,255,.9);\n        }\n\n        .working img{\n            width: 50px;\n            height: 50px;\n        }\n\n        .working .status{\n            margin-top: 1em;\n            font-weight: 600;\n        }\n\n        h1,h2,h3,h4,h5,h6{\n            font-family: \"proxima-nova\", 'Proxima Nova', sans-serif;\n            margin: 0;\n            padding: 0;\n            line-height: 1.5em;\n        }\n\n        html{\n            height:100%;\n            width:100%;\n            background-color:white;\n            background-position:center 0px;\n            background-size:100%;\n            font-size: 14px;\n        }\n\n        body{\n            font-family: \"proxima-nova\", 'Proxima Nova', Arial, Helvetica, sans-serif;\n            /*font-family: sans-serif;*/\n            font-size: 15px;\n            margin:0px;\n            background-attachment: scroll;\n            background-repeat: repeat-y;\n            width:100%;\n            height:100%;\n            box-sizing:border-box;\n        }\n\n        #home{\n            width: 100%;\n            height: 100%;\n        }\n\n        #home #container{\n            position: fixed;\n            top: 15vh;\n            padding: 1em;\n            width: 100%;\n            text-align: center;\n        }\n\n        #home #container img{\n            width: 130px;\n            margin-bottom: 0.5em;\n        }\n\n        #home #container h1{\n            font-weight: 400;\n            font-size: 15px;\n            padding-left: 4px;\n        }\n\n        #search{\n            display: -webkit-flex;\n            display: flex;\n            -webkit-align-items: center;\n            align-items: center;\n            -webkit-justify-content: space-between;\n            justify-content: space-between;\n            width: 100%;\n            position: fixed;\n            top: 0;\n            transform: translateY(0);\n            z-index: 1000;\n            background: white;\n            border-bottom: 1px solid white;\n            transition: transform 0.2s ease-in;\n            background: black;\n        }\n\n        #search[data-firstload=\"true\"]{\n            transform: translateY(45vh);\n        }\n\n        form{\n            padding: 1em;\n        }\n\n        form#search input[type=\"text\"]{\n            font-weight: 400;\n            font-size: 1em;\n            padding: 0.5em 0.3em;\n            border: 2px solid black;\n            border-width: 0 0 1px 0;\n            outline: none;\n            width: 100%;\n            background: black;\n            color: white;\n        }\n\n        form#search input[type=\"text\"]:focus{\n            background-image: url('https://cinelist-public-dev.herokuapp.com/assets/images/search.png');\n            background-size: auto 20px;\n            background-position: 100% 50%;\n            background-repeat: no-repeat;\n        }\n\n        form#search input[type=\"submit\"]{\n            position: absolute;\n            right: 0;\n            background: transparent;\n            border: 0px solid transparent;\n            width: 60px;\n            height: 100%;\n            outline: none;\n            font-size: 0px;\n            color: transparent;\n        }\n\n        #geolocation{\n            color: #0279cd;\n            font-weight: 600;\n            text-decoration: none;\n            margin-top: 0.5em;\n            display: block;\n            cursor: pointer;\n            font-size: 10px;\n            text-align: center;\n            margin-right: 1em;\n        }\n\n        #geolocation img{\n            height: 20px;\n        }\n\n        #timesContainer{\n            padding-top: 65px;\n            padding-bottom: 30%;\n        }\n\n        #timesContainer h2{\n            font-size: 18px;\n            display: -webkit-flex;\n            display: flex;\n            -webkit-align-items: center;\n            align-items: center;\n            padding: 0.5em;\n            background: black;\n            color: white;\n            margin-bottom: 1em;\n        }\n\n        #timesContainer h2 span{\n            font-size: 10px;\n            margin-left: 1em;\n            line-height: 1em;\n        }\n\n        #timesContainer .listing{\n            padding: 0 1em;\n        }\n\n        #timesContainer .listing ol{\n            padding: 0;\n            margin: 0;\n            display: -webkit-flex;\n            display: flex;\n            list-style-type: none;\n            flex-wrap: wrap;\n            -webkit-flex-wrap: wrap;\n            padding-top: 0.8em;\n            padding-bottom: 1em;\n        }\n\n        #timesContainer .listing ol li{\n            display: block;\n            width: 55px;\n            margin-bottom: 0.5em;\n            padding: 0.5em;\n            text-align: center;\n        }\n\n        #timesContainer .listing ol li.missed{\n            text-decoration: line-through;\n            opacity: 0.5;\n        }\n\n        #timesContainer .listing ol li.nextTime{\n            color: #0279cd;\n            border-radius: 3px;\n            font-weight: 600;\n            border: 1px solid #0279cd;\n            border-width: 1px 0;\n        }\n\n        .dayoffset{\n            position: fixed;\n            bottom: 0;\n            left: 0;\n            display: -webkit-flex;\n            display: flex;\n            width: 100%;\n            overflow-x: scroll;\n            padding: 0.8em;\n            border-top: 1px solid black;\n            -webkit-align-items: center;\n            align-items: center;\n            background: white;\n            z-index: 1000;\n            transition: transform 0.2s ease-out;\n            -webkit-overflow-scrolling: touch;\n        }\n\n        .dayoffset a{\n            display: block;\n            color: #3a3a3a;\n            margin-right: 1em;\n            text-decoration: none;\n            font-weight: 200;\n            padding: 0.4em 0.7em;\n            min-width: 100px;\n            text-align: center;\n        }\n\n        .dayoffset a.activeDay{\n            background: black;\n            color: white;\n            border-radius: 3px;\n            font-weight: 600;\n        }\n\n        .dayoffset[data-active=\"false\"]{\n            -webkit-transform: translateY(60px);\n            transform: translateY(100%);\n        }\n\n        .spin{\n            animation: spinAnimation 1.25s infinite;\n            -moz-animation: spinAnimation 1.25s infinite;\n            -webkit-animation: spinAnimation 1.25s infinite;\n            -o-animation: spinAnimation 1.25s infinite;\n        }\n\n        @keyframes spinAnimation{\n            0% {transform: rotateZ(0deg);}\n            100% {transform: rotateZ(360deg);}\n        }\n\n        @-moz-keyframes spinAnimation{\n            0% {-moz-transform: rotateZ(0deg);}\n            100% {-moz-transform: rotateZ(360deg);}\n        }\n            \n        @-webkit-keyframes spinAnimation{\n            0% {-webkit-transform: rotateZ(0deg);}\n            100% {-webkit-transform: rotateZ(360deg);}\n        }\n            \n        @-o-keyframes spinAnimation{\n            0% {-o-transform: rotateZ(0deg);}\n            100% {-o-transform: rotateZ(360deg);}\n        }\n\n        @media all and (min-width: 768px){\n            \n            #timesContainer .cinema{\n                display: -webkit-flex;\n                display: flex;\n                -webkit-flex-wrap: wrap;\n                flex-wrap: wrap;\n            }\n\n            #timesContainer h2 {\n                width: 100%;\n            }\n\n            #timesContainer .listing{\n                width: 300px;\n            }\n\n        }\n    </style>\n\n\t<script src=\"https://cdn.polyfill.io/v2/polyfill.min.js?features=default,fetch\"></script>\n\t<meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no\" />\n\t<meta name=\"description\" content=\"Cinema websites are rubbish. CineList makes it easy to get local cinema showtimes across the UK.\">\n\n\t<meta property=\"og:title\" content=\"CineList\" />\n\t<meta property=\"og:description\" content=\"Cinema websites are rubbish. CineList makes it easy to get local cinema showtimes across the UK.\" />\n\t<meta property=\"og:url\" content=\"http://cinelist.co.uk/\" />\n\t<meta property=\"og:image\" content=\"http://cinelist.co.uk/icon/fb.png\" />\n\n\t<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n\t<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n\t<link rel=\"apple-touch-icon-precomposed\" href=\"https://cinelist-public-dev.herokuapp.com/icon/default.png\" />\n\t<link rel=\"apple-touch-icon-precomposed\" sizes=\"72x72\" href=\"https://cinelist-public-dev.herokuapp.com/icon/72.png\" />\n\t<link rel=\"apple-touch-icon-precomposed\" sizes=\"114x114\" href=\"https://cinelist-public-dev.herokuapp.com/icon/114.png\" />\n\t<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"https://cinelist-public-dev.herokuapp.com/icon/144.png\" />\n\n\t<link rel=\"manifest\" href=\"/cinelist/manifest.json\">\n\t<meta name=\"theme-color\" content=\"#000000\" />\n\t<script>window.__cinelist = {};</script>\n</head>\n\t<body>\n\n\t\t<div id=\"home\">\n\t\t\t<div id=\"container\">\n\t\t\t\t<img src=\"https://cinelist-public-dev.herokuapp.com/assets/images/logo_small.png\" alt=\"The CineList logo\" />\n\t\t\t\t<h1>The fastest way to get UK cinema times<br/> on the web (probably)</h1>\n\t\t\t</div>\n\t\t\n\t\t</div>\n\n\t\t<form id=\"search\" data-firstload=\"true\">\n\t\t\t<a href=\"#\" id=\"geolocation\">\n\t\t\t\t<img src=\"https://cinelist-public-dev.herokuapp.com/assets/images/geo.png\" alt=\"Use Geolocation\"/>\n\t\t\t</a>\n\t\t\t<input type=\"text\" placeholder=\"Search by place name\" title=\"Enter location to search\"/>\n\t\t\t<input type=\"submit\" value=\"Submit\" />\n\t\t</form>\n\n\t\t<div id=\"timesContainer\"></div>\n\n\t\t<div class=\"dayoffset\" data-active=\"false\">\n\t\t\t<a href=\"#\" class=\"activeDay\" data-offset='0'>Today</a>\n\t\t\t<a href=\"#\" data-offset='1'>Tomorrow</a>\n\t\t\t<a href=\"#\" data-offset='2'>&plus;2</a>\n\t\t\t<a href=\"#\" data-offset='3'>&plus;3</a>\n\t\t\t<a href=\"#\" data-offset='4'>&plus;4</a>\n\t\t\t<a href=\"#\" data-offset='5'>&plus;5</a>\n\t\t\t<a href=\"#\" data-offset='6'>&plus;6</a>\n\t\t</div>\n\n\t\t<div class=\"working\" data-visible=\"false\">\n\t\t\t<img src=\"https://cinelist-public-dev.herokuapp.com/assets/images/error.png\" id=\"error\" data-visible=\"false\" alt=\"Cross\"/>\n\t\t\t<img src=\"https://cinelist-public-dev.herokuapp.com/assets/images/loading.png\" id=\"loading\" data-visible=\"true\" class=\"spin\" alt=\"loading spinner\"/>\n\t\t\t<div class=\"status\">Well, hello there...</div>\n\n\t\t\t<script>\n\t\t\t\twindow.__cinelist.working = (function(){\n\t\t\t\t\t\n\t\t\t\t\tvar workingOverlay = document.querySelector('.working');\n\t\t\t\t\tvar spinnerImage = workingOverlay.querySelector('#loading');\n\t\t\t\t\tvar errorImage = workingOverlay.querySelector('#error');\t\t\t\t\t\n\t\t\t\t\tvar statusMessage = workingOverlay.querySelector('.status');\n\n\t\t\t\t\tfunction selectIcon(icon){\n\t\t\t\t\t\tif(icon === 'error'){\n\t\t\t\t\t\t\tspinnerImage.dataset.visible = \"false\";\n\t\t\t\t\t\t\terrorImage.dataset.visible = \"true\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(icon === 'working'){\n\t\t\t\t\t\t\tspinnerImage.dataset.visible = \"true\";\n\t\t\t\t\t\t\terrorImage.dataset.visible = \"false\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tfunction showSpinner(){\n\t\t\t\t\t\tworkingOverlay.dataset.visible = \"true\";\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction hideSpinner(){\n\t\t\t\t\t\tworkingOverlay.dataset.visible = \"false\";\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction updateSpinnerMessage(message){\n\t\t\t\t\t\tstatusMessage.textContent = message;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ticon : selectIcon,\n\t\t\t\t\t\tshow : showSpinner,\n\t\t\t\t\t\thide : hideSpinner,\n\t\t\t\t\t\tupdate : updateSpinnerMessage,\n\t\t\t\t\t};\n\t\t\t\t}());\n\t\t\t</script>\n\t\t</div>\n\n\t\t<script>\n\t\t    \n\t\t    {{{payload.core}}}\n\t\t    \n\t\t</script>\n\n\t\t<script>\n\t\t\tif(navigator.serviceWorker !== undefined) {\n\t\t\t\tnavigator.serviceWorker\n\t\t\t\t\t.register('/cinelist/service-worker.js')\n\t\t\t\t\t.then(function() { console.log(\"Service Worker Registered\"); })\n\t\t\t\t\t.catch(function(err){\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t}\n\t\t</script>\n\n\t\t<script>\n\t\t\t(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n\t\t\t(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\t\t\tm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t\t\t})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\n\t\t\tga('create', 'UA-61305342-1', 'auto');\n\t\t\tga('send', 'pageview');\n\n\t\t</script>\n\n\t\t<script src=\"https://use.typekit.net/imt5yec.js\"></script>\n\t\t<script>try{Typekit.load();}catch(e){}</script>\n\n\t</body>\n</html>\n",
        "output": "str",
        "x": 740,
        "y": 400,
        "wires": [
            [
                "c8db0462.894fd8"
            ]
        ]
    },
    {
        "id": "733ffcc6.3b6a84",
        "type": "http in",
        "z": "74e7ce82.3e484",
        "name": "",
        "url": "/cinelist/service-worker.js",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 305,
        "y": 280,
        "wires": [
            [
                "a8e958c4.ee99b8"
            ]
        ]
    },
    {
        "id": "a8e958c4.ee99b8",
        "type": "template",
        "z": "74e7ce82.3e484",
        "name": "Service Worker",
        "field": "payload",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "var CacheName = 'CineList';\n\nself.addEventListener('install', function(e) {\n    console.log('Installed')\n});\n\nself.addEventListener('fetch', function(event) {\n  event.respondWith(\n\tcaches.open(CacheName).then(function(cache) {\n\t  return cache.match(event.request).then(function(cachedResponse) {\n\t\tvar fetchPromise = fetch(event.request).then(function(networkResponse) {\n\t\t  cache.put(event.request, networkResponse.clone());\n\t\t  return networkResponse;\n\t\t});\n\t\t\n\t\tconsole.log(cachedResponse);\n\t\t// If it's a request to the API\n\t\t// try to get it from the network\n\t\t// if that fails, send the cached version\n\t\t// if there is one. \t\n\t\tif(event.request.url.indexOf('api.cinelist.co.uk') > -1){\n\n\t\t\treturn fetchPromise\n\t\t\t\t.catch(function(err){\n\t\t\t\t\tif(cachedResponse !== undefined){\n\t\t\t\t\t\treturn cachedResponse;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\n\t\treturn cachedResponse || fetchPromise;\n\n\t  })\n\t})\n  );\n});",
        "output": "str",
        "x": 555,
        "y": 280,
        "wires": [
            [
                "31b5f63.1faec0a",
                "70a720e7.ee4e"
            ]
        ]
    },
    {
        "id": "683f655.3cdba9c",
        "type": "template",
        "z": "74e7ce82.3e484",
        "name": "Core JS",
        "field": "payload.core",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "(function(){\n\n\t'use strict';\n\n\tvar APIRoot = \"https://api.cinelist.co.uk\";\n\n\tvar prevent = function(e){e.preventDefault();e.stopImmediatePropagation()};\n\n\tvar home = document.querySelector('#home');\n\tvar searchForm = document.querySelector('#search');\n\tvar geoTrigger = searchForm.querySelector('#geolocation');\n\tvar dayoffsetContainer = document.querySelector('.dayoffset');\n\tvar dayOffsetButtons = Array.from( dayoffsetContainer.querySelectorAll('*[data-offset]') );\n\tvar timesContainer = document.querySelector('#timesContainer');\n\n\tvar currentLocation = '';\n\tvar currentLocationIsPostcode = false;\n\n\tfunction getGeolocation(){\n\n\t\treturn new Promise(function( resolve, reject){\n\n\t\t\tif(navigator.geolocation){\n\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\tfunction(position){\n\t\t\t\t\t\tresolve(position)\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tenableHighAccuracy: false,\n\t\t\t\t\t\ttimeout: 15000,\n\t\t\t\t\t\tmaximumAge: 0\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treject('Geolocation is not available in this browser');\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\tfunction wasResponseGood(response){\n\n\t\treturn new Promise( function(resolve, reject){\n\n\t\t\tif(response.ok){\n\t\t\t\tresponse.json()\n\t\t\t\t\t.then(function(json){\n\t\t\t\t\t\tresolve(json);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function(err){\n\t\t\t\t\t\tconsole.log('An error occurred with request', err);\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t} else {\n\t\t\t\treject(response);\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\tfunction joinListOfCinemasWithListings(cinemas, times){\n\n\t\treturn cinemas.map(function(cinema){\n\n\t\t\t\tfor(var x = 0; x < times.length; x += 1){\n\t\t\t\t\tif(times[x] === null){\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tif(times[x].cinema === cinema.id){\n\t\t\t\t\t\tcinema.listings = times[x].listings;\n\t\t\t\t\t\ttimes.splice(x, 1);\n\t\t\t\t\t\treturn cinema;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t})\n\t\t\t.filter(function(item){\n\t\t\t\treturn item !== null;\n\t\t\t})\n\t\t;\n\n\t}\n\n\tfunction resetDayOffsetButtons(){\n\t\tdayOffsetButtons.forEach(function(button){\n\t\t\tbutton.classList.remove('activeDay');\n\t\t});\n\t}\n\n\tfunction generateViewFromData(cinemasWithTimes, offset){\n\n\t\tvar timesDocumentFragment = document.createDocumentFragment();\n\n\t\tcinemasWithTimes.forEach(function(cinema){\n\n\t\t\tvar cinemaContainer = document.createElement('div');\n\t\t\tvar cinemaTitle = document.createElement('h2');\n\t\t\tvar cinemaDistance = document.createElement('span');\n\n\t\t\tcinemaContainer.classList.add('cinema');\n\n\t\t\tcinemaTitle.textContent = cinema.name;\n\t\t\tcinemaDistance.textContent = '(' + cinema.distance + ' miles)';\n\n\t\t\tcinemaTitle.appendChild(cinemaDistance);\n\n\t\t\tcinemaContainer.appendChild(cinemaTitle);\n\n\t\t\tcinema.listings.sort( function(a, b){\n\t\t\t\tif(a.title > b.title){\n\t\t\t\t\treturn 1\n\t\t\t\t} else {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar d = new Date(),\n\t\t\t\tthisHour = d.getHours(),\n\t\t\t\tthisMinute = d.getMinutes();\n\n\t\t\tcinema.listings.forEach(function(listing){\n\n\t\t\t\tvar listingContainer = document.createElement('div');\n\t\t\t\tvar listingTitle = document.createElement('h3');\n\t\t\t\tvar listingTimesContainer = document.createElement('ol');\n\n\t\t\t\tlistingContainer.classList.add('listing');\n\t\t\t\tlistingTitle.textContent = listing.title;\n\n\t\t\t\tvar setNext = false;\n\n\t\t\t\tlisting.times.forEach(function(time){\n\n\t\t\t\t\tvar timeLi = document.createElement('li');\n\t\t\t\t\ttimeLi.textContent = time;\n\n\t\t\t\t\tif(offset === 0){\n\t\t\t\t\t\tvar theTime = time.split(\":\");\n\t\t\t\t\t\tvar canCatch = undefined;\n\n\t\t\t\t\t\tif(thisHour < parseInt(theTime[0])){\n\t\t\t\t\t\t\tcanCatch = true\n\t\t\t\t\t\t} else if(thisHour == parseInt(theTime[0]) && thisMinute < parseInt(theTime[1])){\n\t\t\t\t\t\t\tcanCatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcanCatch = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!setNext && canCatch){\n\t\t\t\t\t\t\ttimeLi.setAttribute('class', 'nextTime')\n\t\t\t\t\t\t\tsetNext = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!canCatch){\n\t\t\t\t\t\t\ttimeLi.setAttribute('class','missed');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif(!setNext){\n\t\t\t\t\t\t\ttimeLi.setAttribute('class', 'nextTime')\n\t\t\t\t\t\t\tsetNext = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tlistingTimesContainer.appendChild(timeLi);\n\n\t\t\t\t});\n\n\t\t\t\tlistingContainer.appendChild(listingTitle);\n\t\t\t\tlistingContainer.appendChild(listingTimesContainer);\n\t\t\t\tcinemaContainer.appendChild(listingContainer);\n\t\t\t});\n\n\t\t\ttimesDocumentFragment.appendChild(cinemaContainer);\n\n\t\t});\n\n\t\treturn timesDocumentFragment;\n\t}\n\n\tfunction searchForCinemasByGeolocation(latitude, longitude, offset){\n\n\t\tconsole.log(latitude, longitude);\n\t\treturn fetch(APIRoot + '/search/cinemas/coordinates/' + latitude + '/' + longitude)\n\t\t\t.then(function(response){\n\t\t\t\treturn wasResponseGood(response);\n\t\t\t})\n\t\t\t.catch(function(err){\n\t\t\t\tconsole.log('Could not fetch searchForCinemasByLocation', err);\n\t\t\t\tthrow err;\n\t\t\t})\n\t\t;\n\n\t}\n\n\tfunction searchForCinemasByLocation(location){\n\n\t\tconsole.log(location);\n\t\treturn fetch(APIRoot + '/search/cinemas/location/' + location)\n\t\t\t.then(function(response){\n\t\t\t\treturn wasResponseGood(response);\n\t\t\t})\n\t\t\t.catch(function(err){\n\t\t\t\tconsole.log('Could not fetch searchForCinemasByLocation', err);\n\t\t\t\tthrow err;\n\t\t\t})\n\t\t;\n\n\t}\n\n\tfunction searchForCinemasByPostcode(postcode){\n\n\t\tconsole.log(postcode);\n\t\treturn fetch(APIRoot + '/search/cinemas/postcode/' + postcode)\n\t\t\t.then(function(response){\n\t\t\t\treturn wasResponseGood(response);\n\t\t\t})\n\t\t\t.catch(function(err){\n\t\t\t\tconsole.log('Could not fetch searchForCinemasByPostcode', err);\n\t\t\t\tthrow err;\n\t\t\t})\n\t\t;\n\n\t}\n\n\tfunction getManyCinemaTimesById(listOfCinemaIDs, offset){\n\n\t\toffset = offset || 0;\n\n\t\treturn fetch(APIRoot + '/get/times/many/' + listOfCinemaIDs.join(',') + '?day=' + offset)\n\t\t\t.then(function(response){\n\t\t\t\treturn wasResponseGood(response);\n\t\t\t})\n\t\t\t.catch(function(err){\n\t\t\t\tconsole.log('Could not fetch searchForCinemasByLocation', err);\n\t\t\t\tthrow err;\n\t\t\t})\n\t\t;\n\t}\n\n\tfunction getCinemasAndTimesFromLocation(location, offset){\n\n\t\toffset = offset || 0;\n\n\t\twindow.__cinelist.working.icon('working');\n\t\twindow.__cinelist.working.update('Searching for ' + location + ' cinemas');\n\t\twindow.__cinelist.working.show();\n\n\t\treturn searchForCinemasByLocation(location)\n\t\t\t.then(function(cinemaData){\n\n\t\t\t\tconsole.log(cinemaData);\n\n\t\t\t\tvar cinemaIDs = cinemaData.cinemas.map(function(datum, idx){\n\t\t\t\t\t\tif(idx < 30){\n\t\t\t\t\t\t\treturn datum.id;\n\t\t\t\t\t\t} else if(datum.distance < 5){\n\t\t\t\t\t\t\treturn datum.id;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\twindow.__cinelist.working.update('Getting times for ' + location + ' cinemas');\n\n\t\t\t\treturn getManyCinemaTimesById(cinemaIDs, offset)\n\t\t\t\t\t.then(function(listingsData){\n\t\t\t\t\t\treturn joinListOfCinemasWithListings(cinemaData.cinemas, listingsData.results);\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t})\n\t\t;\n\n\t}\n\n\tfunction getCinemasAndTimesFromGeolocation(latitude, longitude, offset){\n\n\t\treturn searchForCinemasByGeolocation(latitude, longitude, offset)\n\t\t\t.then(function(cinemaData){\n\n\t\t\t\tconsole.log(cinemaData);\n\t\t\t\tcurrentLocation = cinemaData.postcode;\n\t\t\t\tcurrentLocationIsPostcode = true;\n\n\t\t\t\tvar cinemaIDs = cinemaData.cinemas.map(function(datum){\n\t\t\t\t\treturn datum.id;\n\t\t\t\t});\n\n\t\t\t\twindow.__cinelist.working.update('Getting times for nearby cinemas');\n\n\t\t\t\treturn getManyCinemaTimesById(cinemaIDs, offset)\n\t\t\t\t\t.then(function(listingsData){\n\t\t\t\t\t\treturn joinListOfCinemasWithListings(cinemaData.cinemas, listingsData.results);\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t})\n\t\t;\n\n\t}\n\n\tfunction getCinemasAndTimesFromPostcode(postcode, offset){\n\n\t\treturn searchForCinemasByPostcode(postcode, offset)\n\t\t\t.then(function(cinemaData){\n\n\t\t\t\tconsole.log(cinemaData);\n\t\t\t\tcurrentLocation = cinemaData.postcode;\n\t\t\t\tcurrentLocationIsPostcode = true;\n\n\t\t\t\tvar cinemaIDs = cinemaData.cinemas.map(function(datum){\n\t\t\t\t\treturn datum.id;\n\t\t\t\t});\n\n\t\t\t\twindow.__cinelist.working.update('Getting times for nearby cinemas');\n\n\t\t\t\treturn getManyCinemaTimesById(cinemaIDs, offset)\n\t\t\t\t\t.then(function(listingsData){\n\t\t\t\t\t\treturn joinListOfCinemasWithListings(cinemaData.cinemas, listingsData.results);\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t})\n\t\t;\n\n\t}\n\n\tfunction locationSubmitted(location){\n\n\t\thome.dataset.visible = \"false\";\n\t\tsearchForm.dataset.firstload = \"false\";\n\t\t\n\t\tcurrentLocation = location;\n\t\tcurrentLocationIsPostcode = false;\n\n\t\tresetDayOffsetButtons();\n\t\tdayOffsetButtons[0].classList.add('activeDay');\n\t\tdayoffsetContainer.dataset.active = \"false\";\n\n\t\tgetCinemasAndTimesFromLocation(currentLocation, 0)\n\t\t\t.then(function(cinemasWithTimes){\n\t\t\t\tconsole.log(cinemasWithTimes);\n\t\t\t\ttimesContainer.innerHTML = \"\";\n\t\t\t\ttimesContainer.appendChild(generateViewFromData(cinemasWithTimes, 0));\n\t\t\t\twindow.__cinelist.working.hide();\n\t\t\t\tdayoffsetContainer.dataset.active = \"true\";\n\t\t\t})\n\t\t\t.catch(function(err){\n\n\t\t\t\twindow.__cinelist.working.icon('error');\n\t\t\t\twindow.__cinelist.working.update('Sorry - something went wrong getting your times');\n\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\twindow.__cinelist.working.hide();\n\t\t\t\t}, 4000);\n\n\t\t\t})\n\t\t;\n\n\t}\n\n\tfunction bindEvents(){\n\n\t\tsearchForm.addEventListener('submit', function(e){\n\t\t\tprevent(e);\n\n\t\t\tif(this[0].value === \"\"){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis[0].blur();\n\t\t\tthis.dataset.firstload = \"false\";\n\n\t\t\twindow.history.pushState({}, 'CineList | ' + this[0].value, '?place=' + this[0].value);\n\n\t\t\tlocationSubmitted(this[0].value);\n\n\t\t}, false);\n\n\t\tgeoTrigger.addEventListener('click', function(e){\n\t\t\tprevent(e);\n\t\t\tconsole.log(e);\n\n\t\t\thome.dataset.visible = \"false\";\n\t\t\tsearchForm[0].value = \"\";\n\t\t\tsearchForm.dataset.firstload = \"false\";\n\n\t\t\tresetDayOffsetButtons();\n\t\t\tdayOffsetButtons[0].classList.add('activeDay');\n\n\t\t\twindow.__cinelist.working.icon('working');\n\t\t\twindow.__cinelist.working.update('Figuring out where you are...');\n\t\t\twindow.__cinelist.working.show();\n\t\t\tdayoffsetContainer.dataset.active = \"false\";\n\n\t\t\tdayoffsetContainer.dataset.active = \"false\";\n\n\t\t\tgetGeolocation()\n\t\t\t\t.then(function(data){\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t\twindow.__cinelist.working.update('Working out which cinemas are near you...');\n\t\t\t\t\tgetCinemasAndTimesFromGeolocation(data.coords.latitude, data.coords.longitude, 0)\n\t\t\t\t\t\t.then(function(cinemasWithTimes){\n\t\t\t\t\t\t\tconsole.log(cinemasWithTimes);\n\t\t\t\t\t\t\ttimesContainer.innerHTML = \"\";\n\t\t\t\t\t\t\ttimesContainer.appendChild(generateViewFromData(cinemasWithTimes, 0));\n\t\t\t\t\t\t\twindow.__cinelist.working.hide();\n\t\t\t\t\t\t\tdayoffsetContainer.dataset.active = \"true\";\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\twindow.__cinelist.working.update('Sorry - CineList couldn\\'t find your location');\n\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\twindow.__cinelist.working.hide();\n\t\t\t\t\t}, 4000);\n\n\t\t\t\t})\n\t\t\t;\n\n\t\t}, false);\n\n\t}\n\n\tbindEvents();\n\n\t(function(){\n\t\tvar days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\t\tvar today = new Date().getDay();\n\n\t\tdayOffsetButtons.forEach(function(offsetBtn){\n\n\t\t\tvar offset = parseInt(offsetBtn.dataset.offset);\n\t\t\tvar dayInt = offset + today;\n\n\t\t\tif(dayInt >= days.length){\n\t\t\t\tdayInt = dayInt - 7;\n\t\t\t}\n\n\t\t\tif(offset === 0){\n\t\t\t\toffsetBtn.textContent = 'Today';\n\t\t\t} else if(offset === 1){\n\t\t\t\toffsetBtn.textContent = 'Tomorrow';\n\t\t\t} else {\n\t\t\t\toffsetBtn.textContent = days[dayInt];\n\t\t\t}\n\n\t\t\toffsetBtn.addEventListener('click', function(e){\n\t\t\t\tprevent(e);\n\n\t\t\t\tresetDayOffsetButtons();\n\n\t\t\t\toffsetBtn.classList.add('activeDay');\n\n\t\t\t\tvar dateOffset = parseInt(this.dataset.offset);\n\t\t\t\tconsole.log(dateOffset);\n\n\t\t\t\tvar appropriateSearch = currentLocationIsPostcode ? getCinemasAndTimesFromPostcode : getCinemasAndTimesFromLocation;\n\t\t\t\t\n\t\t\t\twindow.__cinelist.working.icon('working');\n\t\t\t\twindow.__cinelist.working.update('Getting ' + days[dayInt] + ' times for local cinemas');\n\t\t\t\twindow.__cinelist.working.show();\n\n\t\t\t\tappropriateSearch(currentLocation, parseInt(this.dataset.offset))\n\t\t\t\t\t.then(function(cinemasWithTimes){\n\t\t\t\t\t\tconsole.log(cinemasWithTimes);\n\t\t\t\t\t\ttimesContainer.innerHTML = \"\";\n\t\t\t\t\t\ttimesContainer.appendChild(generateViewFromData(cinemasWithTimes, dateOffset));\n\t\t\t\t\t\twindow.__cinelist.working.hide();\n\t\t\t\t\t\tdayoffsetContainer.dataset.active = \"true\";\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function(err){\n\n\t\t\t\t\t\twindow.__cinelist.working.icon('error');\n\t\t\t\t\t\twindow.__cinelist.working.update('Sorry - something went wrong getting your times');\n\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\twindow.__cinelist.working.hide();\n\t\t\t\t\t\t}, 4000);\n\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t}, false);\n\n\t\t});\n\n\t})();\n\n\t(function(){\n\n\t\tvar queryString = window.location.search;\n\t\tvar queryParameters = {};\n\n\t\tqueryString.slice(1).split('&').forEach( function(keyPair){\n\t\t\tvar split = keyPair.split('=');\n\t\t\tqueryParameters[split[0]] = split[1];\n\t\t});\n\n\t\tconsole.log(queryParameters);\n\n\t\tif(queryParameters.place !== undefined){\n\t\t\tsearchForm[0].value = decodeURIComponent( queryParameters.place.replace('/', '') );\n\t\t\tlocationSubmitted(queryParameters.place);\n\t\t}\n\n\t})();\n\n\tconsole.log('Initialised');\n\n}());\n",
        "output": "str",
        "x": 535,
        "y": 400,
        "wires": [
            [
                "66fc158.8d674ec"
            ]
        ]
    },
    {
        "id": "31b5f63.1faec0a",
        "type": "function",
        "z": "74e7ce82.3e484",
        "name": "Set Content Type",
        "func": "\nmsg.headers = {\n    \"Content-Type\" : \"application/javascript\"\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 760,
        "y": 280,
        "wires": [
            [
                "c8db0462.894fd8"
            ]
        ]
    },
    {
        "id": "70a720e7.ee4e",
        "type": "debug",
        "z": "74e7ce82.3e484",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 720,
        "y": 235,
        "wires": []
    },
    {
        "id": "ecdc9d24.33dad",
        "type": "http in",
        "z": "74e7ce82.3e484",
        "name": "",
        "url": "/cinelist/manifest.json",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 315,
        "y": 340,
        "wires": [
            [
                "11121466.8cd66c"
            ]
        ]
    },
    {
        "id": "11121466.8cd66c",
        "type": "template",
        "z": "74e7ce82.3e484",
        "name": "Manifest",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n  \"name\": \"CineList\",\n  \"short_name\": \"CineList\",\n  \"start_url\": \"/index.html?homescreen=1\",\n  \"display\": \"standalone\",\n  \"icons\": [{\n        \"src\": \"/icon/144.png\",\n        \"sizes\": \"144x144\",\n        \"type\": \"image/png\"\n      },\n      {\n        \"src\": \"/icon/400.png\",\n        \"sizes\": \"400x400\",\n        \"type\": \"image/png\"\n      }],\n  \"background_color\": \"#FFFFFF\",\n  \"theme_color\": \"#000000\",\n  \"description\" : \"Cinema websites are rubbish. CineList makes it easy to get local cinema showtimes across the UK.\"\n}",
        "output": "str",
        "x": 535,
        "y": 340,
        "wires": [
            [
                "dc1c5799.761bd8"
            ]
        ]
    },
    {
        "id": "dc1c5799.761bd8",
        "type": "function",
        "z": "74e7ce82.3e484",
        "name": "Set Content Type",
        "func": "\nmsg.headers = {\n    \"Content-Type\" : \"application/json\"\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 760,
        "y": 340,
        "wires": [
            [
                "c8db0462.894fd8"
            ]
        ]
    }
]